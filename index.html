<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>@</title>
<link rel="icon" type="image/svg" href="https://www.svgrepo.com/download/235301/lotus.svg">
<link rel="apple-touch-icon-precomposed" href="https://www.svgrepo.com/download/235301/lotus.svg" sizes="72x72">

<style>
@charset "UTF-8";*{box-sizing:border-box;font-family:SFU AmericanType,monospace,Courier New;font-size:19px;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}body{--select-book-group-color:#00008b;--select-book-group-filter:invert(14%) sepia(49%) saturate(4923%) hue-rotate(236deg) brightness(81%) contrast(147%);&:has(#selBookGroup>option:nth-of-type(2):checked){--select-book-group-color:darkred;--select-book-group-filter:invert(6%) sepia(86%) saturate(6340%) hue-rotate(360deg) brightness(111%) contrast(108%)}&:has(#selBookGroup>option:nth-of-type(3):checked){--select-book-group-color:#006400;--select-book-group-filter:invert(22%) sepia(99%) saturate(1440%) hue-rotate(95deg) brightness(90%) contrast(105%)}}:root{--playlist-item-title-font-size:21px;--playlist-item-title-font-weight:400;--button-hover-bground-color:#e5e7eb;--select-hover-bground-filter:invert(19%) sepia(33%) saturate(6688%) hue-rotate(278deg) brightness(91%) contrast(89%);--button-hover-border-color:#8d28a5;--button-border-style:1px solid #bdbec0}audio{display:none;width:100%}div[name=divContainer]{--audio-playing-current-progress-percent:383px;--audio-playing-current-progress-remained-color:#8f8f8f;--audio-playing-current-progress-played-color:#21ff15;margin:5px auto;text-align:center;width:100%;&>*{max-width:100%;width:100%}&>div[name=divCtnTop]{margin-bottom:-5px}}@media (pointer:fine){:root{--playlist-item-title-font-size:18px;--playlist-item-title-font-weight:400}*{font-size:17px}}p.bookChapIntro{border-top:1px solid #add8e6;column-gap:30px;column-rule:1px solid #add8e6;columns:300px 3;margin-top:10px;padding-top:5px;text-align:justify;&:first-letter{color:var(--select-book-group-color);float:inline-start;font-size:3.5em;font-weight:700;line-height:1;margin-inline-end:.25rem;margin-bottom:-.25em;margin-top:-.15em;padding:0 3px;text-transform:uppercase}&>.bookChapIntroImg{float:left;margin-right:10px;width:100px}}.flex-container{display:flex;flex-direction:column;gap:5px 15px}div[name=divCtnAudioControlExtraBig]{display:none}.flex-container>div,h2{flex:auto}.flex-container>div:has(>div>#elmArtwork){flex:0 0 auto;max-width:100%;order:2}.flex-container>div:has(>div>#elmArtwork)>*{margin-bottom:5px}.flex-container #elmArtwork{border:1px solid bisque;border-radius:30px 0;box-shadow:2px 2px 10px #0007;max-width:100%;&[src*="i.ytimg.com"][src*="hqdefault.jpg"]{border:none;clip-path:xywh(0 12.5% 100% 75% round var(--workart-border-radius));margin-bottom:calc(-3px - 9.5%);margin-top:-9.2%;transition:margin .5s}}.flex-container div:has(>#elmArtwork[src*="i.ytimg.com"][src*="hqdefault.jpg"]){--workart-border-radius:30px 0;background-color:#f1b874;border-radius:var(--workart-border-radius);filter:drop-shadow(2px 2px 10px #0007);margin:0 auto;padding:1px;width:fit-content}.flex-container .noInternetImg{margin-bottom:15px!important;width:min(100%,400px)}.flex-container>div:last-child{flex-grow:1}.flex-container>:first-child{margin-right:0}@media only screen and (min-width:850px){.flex-container{flex-direction:row}div[name=divContainer]>div[name=divCtnTop]{margin-bottom:5px}div[name=divCtnAudioControlExtraBig]{display:flex}.ap-sub-panel>button.ap-controls:is(.ap-rewind-btn,.ap-fastforward-btn){display:none}.flex-container>div:has(>div>#elmArtwork){max-width:40%;order:0}}@media only screen and (min-width:1100px){div[name=divContainer]{width:1100px}}.flex-button-container{display:flex;flex-flow:row wrap;justify-content:space-evenly}details{margin-top:3px;max-width:100%;overflow:hidden}summary{display:inline-block;padding-top:5px}summary::-webkit-details-marker{display:none}summary>span{cursor:pointer;text-align:center}@media screen and (min-width:800px){summary:has(>span[id=elmBookTitle]){background:conic-gradient(from 12deg at 84% 40%,#efd9bd 115deg,#c2965e 0 50%,#b1ceec 0 295deg,#f2c079 0);border-radius:11px;box-shadow:3px 3px 5px rgba(0,0,0,.34);margin:10px auto 5px;max-width:calc(100% - 40px);min-width:60%;padding:10px 8px;transform:skew(-25deg,0);&>span{display:inline-block;transform:skew(25deg,0)}}}summary>span:before{border:6px solid transparent;border-left-color:red;border-width:6px 9px;content:"";display:inline-block;height:0;margin-right:5px;transform:translateY(-2px);transform-origin:40% 50%;transition:rotate .3s ease-out;width:0}details[open]>summary>span:before{rotate:90deg}div.detailContent{box-sizing:border-box;max-height:0;max-width:100%;overflow:hidden;transition:padding .1s ease,max-height 1s ease-out}details+div.detailContent#elmChapterInfor{transition:max-height .5s ease-out}details[open]+div.detailContent{max-height:5000px;padding:3px 0}#elmBookTitle:before{border-left-color:#00008b}#elmChapterTitle{color:red;font-size:25px;font-weight:700;text-align:center;& *{font-size:inherit}}#elmChapterInfor{margin-bottom:5px}#elmBookTitle{color:#00008b;font-size:23px;font-weight:700;text-align:center;text-wrap:pretty}@media (hover:hover) and (pointer:fine){#elmBookTitle{text-wrap:nowrap}}#elmBookInfo{padding-left:5px;text-align:justify;text-justify:inter-word}#selBookGroup{-moz-appearance:none;-webkit-appearance:none;appearance:none;background:transparent url(https://uxwing.com/wp-content/themes/uxwing/download/education-school/books-icon.svg) 50% 3px/25px no-repeat!important;border:2px solid #000;border-radius:15%;color:#000;cursor:pointer;filter:var(--select-book-group-filter);font-size:17px;padding-bottom:4px;padding-top:25px!important;text-align-last:center;text-indent:0}#selBookGroup:hover{filter:var(--select-hover-bground-filter);-webkit-transition:background .2s ease;transition:background .2s ease}#elmPlayingTime{color:green;flex-shrink:0;font-size:xx-large;font-weight:700;margin-top:-1px;text-align:center;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none;display:flex;flex-flow:row nowrap;&>*{font:inherit}&>.plt-slash{color:#000;margin-top:-3px;padding:0 5px}&.paused{&>:is(.plt-time,.plt-duration){animation:timer-blink-kf 2s step-start .3s infinite;color:#888}&>.plt-slash{color:inherit}}}@keyframes timer-blink-kf{0%{opacity:1}50%{opacity:0}80%{opacity:1}to{opacity:1}}div:has(>#elmPlayingTime){align-items:center;display:flex;flex-shrink:0;flex:1 0 9em;font-size:xx-large;justify-content:center;margin:6px auto}@media only screen and (min-width:850px){div:has(>#elmPlayingTime){--b:2px;--s:20px;--c1:var(--select-book-group-color);--c2:#dddd;position:relative;&:before{background:repeating-conic-gradient(var(--c1) 0 25%,var(--c2) 0 50%) 0 0/var(--s) var(--s) round;border-radius:1em;content:"";inset:0;-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;padding:var(--b);pointer-events:none;position:absolute}}}@media only screen and (max-width:850px){div:has(>#elmPlayingTime){border:none;flex:0}}div[name=HourglassSpining]{color:#006400;position:relative;transform:translateX(-80px)}div[name=HourglassSpining]>span{font-size:2em;font-weight:700;margin-left:10px;position:absolute;top:50%;transform:translateY(-50%)}#elmBookTotalDuration{color:#006400;margin:5px 0;&>span{font-size:x-large;font-weight:700}&>svg:first-of-type{color:#006400;font-size:1.45em;margin:auto -4px -.35em 5px}&>svg:last-of-type{color:#006400;font-size:1.1em;margin:auto 4px -4px 8px}}#elmSelBookTitles{border-color:var(--select-book-group-color);border-width:2px;margin:2px auto;max-width:100%}.dropdown-book-spinner{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent url(https://uxwing.com/wp-content/themes/uxwing/download/education-school/books-icon.svg) right .2em center/1.4em no-repeat;border-color:#0000;border-radius:.4em;line-height:1.8em;padding-left:5px;padding-right:1.8em;&:focus{border-width:2.5px!important;outline:none}&::-ms-expand{display:none}}#elmInnerMcFlexCtn>span>label:before{color:red;content:url(https://uxwing.com/wp-content/themes/uxwing/download/peoples-avatars/speak-talk-voice-icon.svg);display:inline-block;margin:-1px 7px;transform:rotateY(180deg);width:23px}#elmInnerMcFlexCtn>span>label{font-size:var(--playlist-item-title-font-size);font-weight:700;margin-right:15px}#elmInnerMcFlexCtn>span:first-of-type>label{color:darkred}#elmInnerMcFlexCtn>span:nth-of-type(2)>label{color:#00008b}#elmInnerMcFlexCtn>span:nth-of-type(3)>label{color:#9932cc}fieldset{background-color:#f4f4e52b;border:1px solid #bdbec0;border-radius:.4em;max-width:100%;padding:.3em;&>legend{color:var(--select-book-group-color);font-size:.875em;font-weight:600;margin-left:.5em;text-align:left;white-space:nowrap}}p{margin:5px 2px}button,select{color:#000}a{&:link,&:visited{text-decoration:none}&:hover{background-color:#e3e8f4;border:1px solid #666;border-radius:5px;border-right-width:5px;padding:2px 5px 4px 3px}}dfn,var{font-size:inherit;font-style:normal;font-weight:inherit;text-decoration:none}input[type=radio]:checked{accent-color:red}.glowing-border{animation:glow-keyframe 1s 1}@keyframes glow-keyframe{0%{box-shadow:0 0 5px grey,0 0 10px grey,0 0 15px grey}50%{box-shadow:0 0 20px grey,0 0 30px grey,0 0 40px grey}75%{box-shadow:7px 8px 15px -3px grey,2px 7px 6px -2px grey,0 0 0 grey}}ul.inlineList,ul.inlineListInfor{display:inline;padding-inline-start:2px}ul.inlineList>li:not(:last-of-type):after{color:darkred;content:" ┋ "}ul.inlineListInfor{padding-inline-start:0}ul.inlineListInfor>li:before{color:#006400;content:"∴";padding-left:10px;padding-right:7px}ul.inlineList>li,ul.inlineListInfor>li{display:inline;&>span#percentageListened{background:linear-gradient(90deg,rgba(139,198,236,.5),rgba(149,153,226,.5)) 0 0 /50% 100% no-repeat;border:1px solid #0fa8a8;border-radius:6px;font-size:.85em;font-weight:700;padding:0 5px;transition:background-size .3s}}ul.inlineList{counter-reset:anchor}ul.inlineList>li>a[href].srcPlaying{background-color:#fff3e5;border:1px solid #730a50;border-left-width:5px;border-radius:5px;color:#00008b;font-weight:700;padding:1px 5px 2px 0;&:hover{background-color:#f6d5af}}ul.inlineList>li>a[href].srcPlaying:before{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%2300008b' viewBox='0 0 92.2 122.88'%3E%3Cpath d='M92.2 60.97 0 122.88V0z' style='fill-rule:evenodd;clip-rule:evenodd'/%3E%3C/svg%3E");margin-left:2px}ul.inlineList>li:only-of-type>a[href].srcPlaying:before{content:""}ul.inlineList>li>a[href]{counter-increment:anchor;white-space:nowrap}ul.inlineList>li>a[href]:before{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%2300E' viewBox='300 150 424 724'%3E%3Cpath d='M725.4 853.3H256c-47.1 0-85.3-38.2-85.3-85.3V298.7c0-47.2 38.2-85.4 85.3-85.4h170.7v85.4H256V768h469.4V597.3h85.3V768c0 47.1-38.2 85.3-85.3 85.3M499.2 584.8l-60.1-60.3L707.6 256H554.7v-85.3h298.7v298.6H768V316.4z'/%3E%3C/svg%3E");background-position:0 50%;background-repeat:no-repeat;background-size:13px 13px;content:"\2002" counter(anchor) ".";padding-left:16px;padding-right:6px}ul.inlineList>li>a.outsideLink[href]:before{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%2300E' viewBox='150 120 724 724'%3E%3Cpath d='M301.8 418.7 214 506.5A192 192 0 1 0 485.5 778l117-117a192 192 0 0 0-53-309L512 389.5a64 64 0 0 0-9.9 12.7 128 128 0 0 1 55.1 213.6l-116.9 117a128 128 0 1 1-181.1-181.1L310 501a257.2 257.2 0 0 1-8.2-82.4z'/%3E%3Cpath d='M421.5 299a192 192 0 0 0 53 309l49.6-49.7a128 128 0 0 1-57.3-214.1l116.9-117a128 128 0 1 1 181.1 181.1L714 459c7.2 26.9 9.9 54.7 8.2 82.4l87.8-87.8A192 192 0 1 0 538.5 182z'/%3E%3C/svg%3E")}ul.inlineList>li>a:is([href*="youtube.com"],[href*=GetAudioYoutube]):before{background:url(https://www.svgrepo.com/download/475700/youtube-color.svg) 0/20px no-repeat!important;width:35px}ul.inlineList>li>a[href$=".pdf"]:before{background:url(https://uxwing.com/wp-content/themes/uxwing/download/file-and-folder-type/pdf-icon.svg) 0/18px no-repeat}ul.inlineList>li>a[href*="archive.org"]:not(.srcPlaying):before{background:url(https://www.svgrepo.com/download/173820/historic-theatre.svg) 0/18px no-repeat}ul.inlineList>li:only-of-type>a[href]:before{content:""}svg.svg-img-infor{color:#0fa8a8;display:inline-block;max-height:1.4em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.1em;fill:currentColor;font-size:inherit;margin-bottom:-.3em;margin-right:5px;&:hover{color:#0d8707!important}}svg.svg-img-infor:has(use:is([href="#icnSvgListenTime"],[href="#icnSvgChapGroupIcon"])){font-size:.9em;margin-bottom:-.25em}svg.svg-img-infor:has(use[href="#icnSvgRemainTime"]){font-size:1.1em;margin-bottom:-.35em}svg.svg-img-infor:has(use:is([href="#icnSvgDuration"],[href="#icnSvgMediaLinks"])){font-size:1.15em;margin-bottom:-.35em}svg.svg-img-infor:has(use[href="#icnSvgBooks"]){font-size:1.15em;margin-bottom:-.4em}.control-button-flex{align-items:center;background-color:transparent;display:flex;flex-flow:row wrap;gap:5px;justify-content:center;margin-bottom:5px;max-width:100%}.control-button-flex button,.svgButton{-webkit-appearance:button;appearance:button;background-color:transparent;background-image:none;border:var(--button-border-style);border-radius:20%;color:inherit;cursor:pointer;margin:0;padding:4px 4px 1px;text-transform:none}.control-button-flex button:hover,.svgButton:hover{background-color:var(--button-hover-bground-color);color:var(--button-hover-border-color);--audio-playing-current-progress-played-color:#0ee302;--audio-playing-current-progress-remained-color:#656565;-webkit-transition:background-color .2s ease;transition:background-color .2s ease}svg.button-svg-img{display:inline-block;height:1.25em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.25em;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;font-size:inherit;margin:auto -2px;-webkit-transition:fill .2s cubic-bezier(.4,0,.2,1) 0s;transition:fill .2s cubic-bezier(.4,0,.2,1) 0s}.\!text-\[15px\]{font-size:16px!important}.\!text-\[20px\]{font-size:20px!important}.\!text-\[25px\]{font-size:25px!important}.\!text-\[28px\]{font-size:28px!important}.\!text-\[30px\]{font-size:30px!important}.\!text-\[35px\]{font-size:35px!important}.\!text-\[40px\]{font-size:40px!important}.\!text-\[50px\]{font-size:50px!important}.\!text-\[55px\]{font-size:55px!important}.\!text-\[80px\]{font-size:80px!important}.rotate-90{transform:rotate(90deg)}.rotate-180{transform:rotate(180deg)}.elm-hidden{display:none!important}.elm-disabled{background-color:#ddd8d8!important;color:gray!important;cursor:not-allowed!important;pointer-events:none}.animate-spin{animation:spin-keyframe 1s linear infinite}@keyframes spin-keyframe{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ap-container{background-color:#dfdbe5;border:1px solid #008b8b;border-radius:8px;max-width:100%;padding:4px 0}.ap-panel,.ap-sub-panel{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.ap-sub-panel{-webkit-box-flex:0;-webkit-flex:0;-ms-flex:0;flex:0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.ap--track{-webkit-box-flex:1;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;padding:0 5px}.ap--playback,.ap--playback>.ap-controls,.ap--settings,.ap--settings>.ap-controls{-webkit-box-flex:0;-webkit-flex:0;-ms-flex:0;flex:0}.ap--playback button,.ap--settings button{padding-left:6px;padding-right:6px}.ap-info{-webkit-align-self:flex-start;position:relative;width:100%;-ms-flex-item-align:start;align-self:flex-start;padding:5px 0 0}.ap-title-time{align-items:flex-start;display:flex;flex-flow:row nowrap;justify-content:space-between}.ap-title{flex:1 1 350px;font-size:15px;min-width:0;overflow:hidden;padding-right:10px;position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap}.ap-time{flex:0 0 auto}.ap-time *{font-size:15px}.ap-progress-container{cursor:pointer;padding:5px 0 10px}.ap-progress{background:#c4c4c4;border-radius:5px;height:5px;position:relative}.ap-progress-bar,.ap-progress-preload-bar{border-radius:5px 0 0 5px;bottom:0;left:0;position:absolute;top:0;transition:width .5s;width:0}.ap-progress-preload-bar{background:#a6a6a6;z-index:0}.ap-progress-bar{background:#f50;z-index:1}.ap-progress-bar:after{background:#f50;border-radius:6px;content:"";height:12px;margin-top:-4px;opacity:.3;position:absolute;right:-5px;top:0;-webkit-transition:opacity .3s ease;transition:opacity .3s ease;width:12px}.ap-progress-container:hover .ap-progress-bar:after{opacity:1}.ap-progress-bar--loading{--c:repeating-linear-gradient(135deg,var(--select-book-group-color,#6100ee) 0 12px,#bbb 0 20px) no-repeat;--w:18%;--b:.5px;animation:l16 2s cubic-bezier(.5,0,.5,1) infinite alternate;background:var(--c),#d7b8fc;background-size:var(--w) calc(100% - var(--b)*2);border:var(--b) solid #000;&>*{visibility:hidden}}@keyframes l16{0%{background-position:calc(-5% - var(--w)) var(--b)}to{background-position:calc(105% + var(--w)) var(--b)}}.ap-buffer-bar{border-radius:4px;display:block;height:4px;line-height:5px;width:100%}.ap-controls{background:none;border:0;color:#222;display:block;height:50px;outline:0;position:relative;text-align:center;-webkit-transition:background .2s ease;transition:background .2s ease;z-index:2;&:hover{background-color:#ccc}}.ap-controls{appearance:button;-webkit-appearance:button;background-color:transparent;background-image:none;border-radius:20%;color:inherit;cursor:pointer;margin:0;text-transform:none}.ap-controls:hover,.svgButton:hover{background-color:var(--button-hover-bground-color);color:var(--button-hover-border-color);--audio-playing-current-progress-played-color:#0ee302;--audio-playing-current-progress-remained-color:#656565}.ap-controls:active{background:rgba(0,0,0,.1)}.ap-volume-container{z-index:3}.ap-volume{background:#f2f2f2;border:1px solid #ccc;border-bottom:0;bottom:50px;height:0;overflow:hidden;position:absolute;right:0;-webkit-transition:height .2s cubic-bezier(.17,.72,.26,1.23);transition:height .2s cubic-bezier(.17,.72,.26,1.23);visibility:hidden;width:min(100%,35px)}.ap-volume-btn{display:block;padding-right:9px!important;text-align:center;width:100%}.ap-volume-btn>svg>.ap--volume-off,.muted>svg>.ap--volume-on{display:none}.muted>svg>.ap--volume-off{display:inline}.ap-volume-container:hover{background:#ddd}.ap-volume-container:hover .ap-volume{height:120px;visibility:visible}.ap-volume-progress{background:rgba(0,0,0,.2);border-radius:3px;display:block;height:100px;margin:10px auto;position:relative;width:4px}.ap-volume-bar{background:#f50;border-radius:3px;bottom:0;height:50%;left:0;position:absolute;right:0}.ap-speed-container{align-items:center;display:flex;gap:1px}.ap-change-speed-buttons{align-items:stretch;background-color:transparent;display:flex;flex-flow:column wrap;gap:0;justify-content:center}.ap-change-speed-buttons>button{background-color:transparent;border:none;padding:0 2px}.ap-speed-option-select{-moz-appearance:none;-webkit-appearance:none;appearance:none;background:transparent url(https://uxwing.com/wp-content/themes/uxwing/download/transportation-automotive/speed-test-icon.svg) 57% 3px/30px no-repeat;border:none;border-radius:8px;color:#000;cursor:pointer;font-size:15px;padding-bottom:4px;padding-top:30px;text-align-last:center}.ap-speed-option-select:hover{filter:var(--select-hover-bground-filter)}.ap-change-speed-buttons>button:hover{background-color:var(--button-hover-bground-color)!important;color:var(--button-hover-border-color)}.ap-active{background:rgba(0,0,0,.15);opacity:1}@media(min-width:850px){.ap-title{max-width:330px}}@media(min-width:950px){.ap-title{max-width:440px}}@media(min-width:1050px){.ap-title{max-width:580px}}@media(max-width:850px){.ap-title{max-width:200px}}@media(max-width:680px){.ap-container{background-color:transparent;border:none;height:auto;width:100%}.ap-panel{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;height:auto;justify-content:space-evenly}.ap--track{background-color:#ddd;border-radius:10px;margin-bottom:10px;padding:8px 10px;-webkit-box-ordinal-group:2;-webkit-order:1;-ms-flex-order:1;order:1;-webkit-box-flex:1;-webkit-flex:1 1 100%;-ms-flex:1 1 100%;flex:1 1 100%}.ap--playback{-webkit-box-flex:1;-webkit-flex:1 1 70%;-ms-flex:1 1 70%;flex:1 1 70%;-webkit-box-ordinal-group:3;-webkit-order:2;-ms-flex-order:2;order:2}.ap--settings{-webkit-box-ordinal-group:4;-webkit-order:3;-ms-flex-order:3;order:3}.ap--playback>.ap-controls{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}}:is(ol#elmPlaylist,ol.lstBookTitlesSetting){border:1px solid #bdbec0;border-radius:10px;contain-intrinsic-size:5005px;content-visibility:auto;list-style:none;margin:0;max-height:450px;overflow-x:hidden;overflow-y:auto;padding-left:40px}:is(ol#elmPlaylist,ol.lstBookTitlesSetting) li{border-bottom:1px solid #730a50c4;color:#4f4f4f;cursor:pointer;line-height:21px;padding:10px 0 5px 7px;position:relative;text-align:left;transition:color .4s;&:hover{background:linear-gradient(90deg,rgba(255,138,0,.2),#fff)!important;box-shadow:2px 2px 15px 4px rgba(51,51,51,.18);transform:translate(.5%);&:before{background-color:#f1a25a38!important}}&:before{align-items:center;background:#afafaf54;border:1.5px solid #454545;border-radius:50%;color:#000;content:counter(list-item);display:flex;font-size:var(--playlist-item-title-font-size);font-weight:700;height:32px;justify-content:center;left:-36px;position:absolute;top:2px;width:32px}&.threeDigitOrdernalNo:before{font-size:.9em}&.fourDigitOrdernalNo:before{font-size:.8em}&.beingPlay{background:linear-gradient(90deg,rgba(156,39,176,.2),#fff0)!important;box-shadow:2px 2px 15px 7px hsla(0,69%,83%,.27);&:before{background:rgba(156,39,176,.25);border-color:#d52323}}&>span{color:#4f4f4f;font-size:var(--playlist-item-title-font-size);font-weight:var(--playlist-item-title-font-weight)}&>code{font-size:.9em}& [data-rAlignGroup]{display:inline-block;text-align:right}}:is(ol#elmPlaylist,ol.lstBookTitlesSetting) li:nth-of-type(2n){background:linear-gradient(270deg,hsla(0,0%,54%,.2),#fff);&:before{background:#2378d547;border-color:#2378d5}&>span{color:#2378d5}}:is(ol#elmPlaylist,ol.lstBookTitlesSetting) li:first-of-type{border-top:1px solid #730a50c4}ol.lstBookTitlesSetting>li:has(>input[type=checkbox]:not(:checked)){&>code,&>span{color:#639858!important}&:before{color:#999!important}}ol#elmPlaylist:has(section){padding-left:0!important}ol#elmPlaylist>input[type=checkbox]{display:none}ol#elmPlaylist>input[type=checkbox]+label+section{max-height:0;max-width:0;opacity:0;overflow:hidden;padding-left:40px!important;transform:scaleY(1);-webkit-transition:all .5s ease;-moz-transition:all .5s ease;-o-transition:all .5s ease;transition:all .5s ease;&>label.chapter-group-summary{align-items:center;color:#f85012;display:flex;justify-content:space-evenly;margin-left:-40px;padding:5px 0;pointer-events:none;&>span>code{color:#043268}}}ol#elmPlaylist>input[type=checkbox]:checked+label+section{max-height:100%;max-width:100%;opacity:1;transform:scaleY(1)}ol#elmPlaylist>input[type=checkbox]+label{align-items:center;color:#8b007f;cursor:pointer;display:flex;justify-content:center;margin:4px auto 4px 2px;padding:7px 0 7px 5px;&.is-sticky{background-image:linear-gradient(90deg,#e9d8c788 0,#ffffff99 51%,#e9d8c788);border:1.5px solid #902a88;border-radius:5px;position:-webkit-sticky;position:sticky;top:-.1px;z-index:2}&.stickyPinned{background-image:linear-gradient(90deg,#b7d1e6e9 0,#eef2f3dd 51%,#b7d1e6cc)!important;border-right-width:5px!important;color:red;&:before{border-top-color:red;rotate:-180deg!important;transform:translateY(4px)}}&:has(+section>li.beingPlay){background-image:linear-gradient(to top left,#abb1f3bd,#ffffff2e 80%);color:#7419c4;font-weight:700;&:before{border-top-color:#7419c4}}&>span>code.underlineAnim{--bg-h:2px;background-image:linear-gradient(90deg,#6a5acd,grey);background-position:0 calc(1em + 4px + var(--bg-h));background-repeat:no-repeat;background-size:0 var(--bg-h);padding-bottom:3px;text-decoration:none;transition:background-size .5s ease-in-out}&:hover{color:#008b8b!important;&:before{border-top-color:#008b8b!important}&>span>code.underlineAnim{background-position-x:left;background-size:100% var(--bg-h)}}&:before{border:5px solid transparent;border-top-color:#8b007f;border-width:10px 5px;content:"";display:inline-block;height:0;margin-left:4px;transform:translate(-5px,calc(50% - 2px));transform-origin:25% 50%;-webkit-transition:all .5s ease;-moz-transition:all .5s ease;-o-transition:all .5s ease;transition:all .5s ease;width:0}}@media (pointer:coarse){ol#elmPlaylist>input[type=checkbox]+label>span>code.underlineAnim{--bg-h:1.5px;background-position:0 calc(1em - 1px)}}ol#elmPlaylist>input[type=checkbox]:not(:checked)+label{background-image:linear-gradient(to bottom right,#fdfcfb00,#e2d1c3b3);border:1px solid #8b007f;border-left-width:5px;border-radius:5px;justify-content:space-between;padding-right:5px;&:has(+section>li.beingPlay){background-image:linear-gradient(to bottom right,#abb1f3bd,#ffffff2e 80%)}&:before{rotate:-90deg;transform:translate(-3px,4px)}}ol#elmPlaylist li.beingPlay:after{bottom:4px;content:url('data:image/svg+xml,<svg fill="red" viewBox="0 0 10.5 7" xmlns="http://www.w3.org/2000/svg"><rect transform="translate(.5 6) rotate(180) translate(-.5 -6)" x="-.5" y="5" width="1.5" height="2"><animate attributeName="height" dur="1.2s" keyTimes="0;0.5;1" repeatCount="indefinite" values="2;7;2"/> </rect> <rect transform="translate(3.5 4.5) rotate(180) translate(-3.5 -4.5)" x="2.5" y="2" width="1.5" height="5"> <animate attributeName="height" dur="2.8s" keyTimes="0;0.4;0.8;1" repeatCount="indefinite" values="5;1;7;5"/> </rect> <rect transform="translate(6.5 3.5) rotate(180) translate(-6.5 -3.5)" x="5.5" width="1.5" height="7"> <animate attributeName="height" dur="1s" keyTimes="0;0.5;1" repeatCount="indefinite" values="7;0;7"/> </rect> <rect transform="translate(9.5 5) rotate(180) translate(-9.5 -5)" x="8.5" y="3" width="1.5" height="4"> <animate attributeName="height" dur="4.7s" keyTimes="0;0.5;1" repeatCount="indefinite" values="2;7;2"/> </rect> </svg>');display:block;position:absolute;right:4px;transform:scaleY(1.3);width:18px}ol#lstJsFileDataSetting{max-height:min(calc(80dvh - 160px),600px)!important}ol#lstJsFileDataSetting>li{counter-reset:bookKitListCounter;padding:3px 5px 0 0;& div:has(>span>input[type=checkbox][role=switch][attr-chkbox-Data-jsFile]){border:1px solid #ae7676;border-radius:5px;display:flex;flex-flow:row nowrap;justify-content:stretch;padding:5px;--illustrated-bgrnd-color:#f5c7c7aa;background-image:linear-gradient(to right,transparent 30%,var(--illustrated-bgrnd-color) 100%),repeating-linear-gradient(-40deg,#fffc 0 25px,#f4f4f4cc 0 50px);&>:first-child{color:#00008b;flex-grow:1;font-weight:700;margin-top:0;&>summary{padding-top:0}&>summary>span:before{border-left-color:#00008b;transform:translateX(2px)}}&>:last-child{align-self:center;flex-grow:0;text-align:right}&+div.detailContent{-moz-columns:330px 2;-webkit-columns:330px 2;columns:330px 2;padding:3px 0;text-align:justify;&>h2{column-span:all;margin:5px 0;text-align:center}}&:has(details[open])+div.detailContent{max-height:2000px}}& div:has(>span>input[type=checkbox][role=switch][attr-chkbox-Data-jsFile][data-state-val="0"]){border-color:#363636;--illustrated-bgrnd-color:#909090aa}& div:has(>span>input[type=checkbox][role=switch][attr-chkbox-Data-jsFile][data-state-val="1"]){border-color:#653302;--illustrated-bgrnd-color:#f49b43aa}& div:has(>span>input[type=checkbox][role=switch][attr-chkbox-Data-jsFile][data-state-val="2"]){border-color:#093a56;--illustrated-bgrnd-color:#95ceefaa}& p.dbFileBookList{counter-increment:bookKitListCounter;counter-reset:dbBookListCounter;margin:2px 0 0;&:not(:last-of-type){border-image:linear-gradient(90deg,#c9b7e6,#af90a4) 1 /0 0 1px 0;padding-bottom:5px}&:before{color:#9932cc;content:counter(bookKitListCounter,upper-roman) ". ";counter-increment:section;font-weight:700}&>code{counter-increment:dbBookListCounter;display:inline;word-spacing:-.15em;&:before{color:#9932cc;content:" ∵\2005" counter(dbBookListCounter) ". ";font-size:.9em}&:nth-of-type(odd){color:#9f5c28}&:nth-of-type(2n){color:#272782}&:only-of-type:before{content:" ∴ "}}}& input[type=checkbox][role=switch][attr-chkbox-Data-jsFile]{&:checked+label:before{content:"Fresh Load"}&:not(:checked)+label:before{content:"No show"}&:indeterminate+label:before{content:"Cache Load"}}}fieldset:has(>div[name=DBStatistics]){display:flex;flex-direction:column;justify-content:space-evenly;padding:1px;&>div[name=DBStatistics]>dfn{font-size:.85em;font-weight:400}}.niceScrollBar{&:not(ol#elmPlaylist){overscroll-behavior:contain}&::-webkit-scrollbar{width:10px}&::-webkit-scrollbar-track{background-color:#e7e7e7;border:1px solid #cacaca;border-radius:8px}&::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#a3b3bd;border:3px solid transparent;border-radius:8px}}div[name=bookKitChkboxContainer]{justify-content:space-evenly;max-height:5em;overflow:hidden auto}div[name=bookKitChkboxContainer]>div[class^=bookKitNo]{-webkit-tap-highlight-color:#0000;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}.bookKitNo0:hover>label,div[name=bookKitChkboxContainer]:has(>.bookKitNo0:hover)+ol>li.bookKitNo0-Childs{background:linear-gradient(90deg,rgba(0,123,255,.2),#fff)!important}.bookKitNo1:hover>label,div[name=bookKitChkboxContainer]:has(>.bookKitNo1:hover)+ol>li.bookKitNo1-Childs{background:linear-gradient(90deg,rgba(255,226,0,.2),#fff)!important}.bookKitNo2:hover>label,div[name=bookKitChkboxContainer]:has(>.bookKitNo2:hover)+ol>li.bookKitNo2-Childs{background:linear-gradient(90deg,#d34af933,#fff)!important}.bookKitNo3:hover>label,div[name=bookKitChkboxContainer]:has(>.bookKitNo3:hover)+ol>li.bookKitNo3-Childs{background:linear-gradient(90deg,#f9884a33,#fff)!important}.bookKitNo4:hover>label,div[name=bookKitChkboxContainer]:has(>.bookKitNo4:hover)+ol>li.bookKitNo4-Childs{background:linear-gradient(90deg,#524af933,#fff)!important}button[name=togglePlaylistExtraTitles]{display:none}div[name=divContainer]:has(ol#elmPlaylist li>div.item-2nd-main-div) button[name=togglePlaylistExtraTitles]{display:block}div[name=divContainer]:has(ol#elmPlaylist.hideOptionExtraTitle) button[name=togglePlaylistExtraTitles]{color:red}div[name=toastContainer]{--toastify-toast-offset:20px;--toastify-toast-top:max(var(--toastify-toast-offset),env(safe-area-inset-top));--toastify-toast-right:max(var(--toastify-toast-offset),env(safe-area-inset-right));--toastify-toast-left:max(var(--toastify-toast-offset),env(safe-area-inset-left));--toastify-toast-bottom:max(var(--toastify-toast-offset),env(safe-area-inset-bottom));display:flex;pointer-events:none;position:fixed;z-index:999999;&[location=Bottom-Right]{align-items:flex-end;bottom:var(--toastify-toast-bottom);flex-direction:column-reverse;right:var(--toastify-toast-right);&>.toast-element{&+&{margin-bottom:calc(var(--toastify-toast-bottom)/2)}}}&[location=Top-Right]{align-items:flex-end;flex-direction:column;right:var(--toastify-toast-right);top:var(--toastify-toast-top);&>.toast-element{&+&{margin-top:calc(var(--toastify-toast-top)/2)}}}&[location=Bottom-Left]{align-items:flex-start;bottom:var(--toastify-toast-bottom);flex-direction:column-reverse;left:var(--toastify-toast-left);&>.toast-element{&+&{margin-bottom:calc(var(--toastify-toast-bottom)/2)}}}&[location=Top-Left]{align-items:flex-start;flex-direction:column;left:var(--toastify-toast-left);top:var(--toastify-toast-top);&>.toast-element{&+&{margin-top:calc(var(--toastify-toast-top)/2)}}}}.toast-element{--toast-color-light-bgrnd:#eeed;--toast-color-dark-bgrnd:#333b;--toast-color-dark-text:#fff;--toast-color-info:#3498db;--toast-color-info-lightest:#aae3f6;--toast-color-success:#07bc0c;--toast-color-success-lightest:#80d280;--toast-color-warning:#ffc021;--toast-color-warning-lightest:#ffdd80;--toast-color-error:#e74c3c;--toast-color-error-lightest:#fd9c9f;--toast-color-promise:#9542fa;--toast-color-promise-lightest:#b378fb;--toast-border-width:1.5px;--progress-bar-height:calc(var(--toast-border-width)*2);align-items:center;background-color:var(--toast-color-light-bgrnd);border:var(--toast-border-width) solid #666;border-left:5px solid;border-radius:5px;box-shadow:5px 5px 25px 0 #666a;cursor:pointer;display:flex;max-width:min(calc(100vw - 30px),750px);min-width:200px;padding:5px 10px;pointer-events:auto;position:relative;z-index:13;&.toast-manual{bottom:0;left:var(--toastify-toast-left);position:fixed}&>.toast__icon{display:inline-block;flex-grow:0;padding:4px 8px 0 0;user-select:none;&>svg{height:1.25em;width:1.25em;fill:currentColor}}&>.toast__msg{color:#eee;flex-grow:1;font-size:1.15rem;line-height:1.5}&>.toast-progress{background-color:#4070f4;bottom:calc(0px - var(--toast-border-width));height:var(--progress-bar-height);left:-2px;position:absolute;width:calc(100% + 2px)}}.toast-element.toast-dark-theme{background-color:var(--toast-color-dark-bgrnd);border-bottom:var(--progress-bar-height) solid #000;&>.toast__msg{color:var(--toast-color-dark-text)!important}&>.toast-progress{bottom:calc(0px - var(--progress-bar-height))!important}}.toast-element.toast-color-theme{border-color:var(--toast-color-dark-bgrnd)!important;&>.toast__icon,&>.toast__msg{color:var(--toast-color-dark-text)!important}}.toast-element.toast-mono-theme{background-color:var(--toast-color-dark-bgrnd);&>.toast__msg{color:var(--toast-color-dark-text)!important;white-space:pre-wrap;&>svg{margin-bottom:-3px}}&>.toast__icon{color:var(--toast-color-dark-text)!important}&>.toast-progress{background-color:var(--toast-color-dark-text)!important}}@media only screen and (max-width:450px){.toast-element{&>.toast__icon{padding:2px 8px 0 0;&>svg{height:1.15em;width:1.15em}}&>.toast__msg{font-size:1rem}}}.toast-type--Promise{border-color:var(--toast-color-promise);border-bottom:var(--toast-border-width) solid var(--toast-color-promise)!important;color:var(--toast-color-dark-bgrnd);&>.toast__icon{color:var(--toast-color-dark-bgrnd);&>svg{animation:spin-keyframe 1s linear infinite;animation-timing-function:steps(12,jump-none);height:1.4em;width:1.4em}}&>.toast__msg{color:var(--toast-color-dark-bgrnd)}&>.toast-progress{background-color:var(--toast-color-promise)}&.toast-dark-theme{color:var(--toast-color-dark-text);&>.toast__icon{color:var(--toast-color-dark-text)}}&.toast-color-theme{background-color:color-mix(in srgb,var(--toast-color-promise),transparent 10%);color:var(--toast-color-dark-text);&>.toast__icon{color:var(--toast-color-dark-text)}}}.toast-type--Infor{border-color:var(--toast-color-info);&>.toast__icon{color:var(--toast-color-info)}&>.toast__msg{color:#043268}&>.toast-progress{background-color:var(--toast-color-info)}&.toast-color-theme{background-color:color-mix(in srgb,var(--toast-color-info),transparent 10%);&>.toast-progress{background-color:var(--toast-color-info-lightest)}}}.toast-type--Success{border-color:var(--toast-color-success);&>.toast__icon{color:var(--toast-color-success)}&>.toast__msg{color:#026516}&>.toast-progress{background-color:var(--toast-color-success)}&.toast-color-theme{background-color:color-mix(in srgb,var(--toast-color-success),transparent 10%);&>.toast-progress{background-color:var(--toast-color-success-lightest)}}}.toast-type--Warning{border-color:var(--toast-color-warning);&>.toast__icon{color:var(--toast-color-warning)}&>.toast__msg{color:#543d02}&>.toast-progress{background-color:var(--toast-color-warning)}&.toast-color-theme{background-color:color-mix(in srgb,var(--toast-color-warning),transparent 10%);&>.toast-progress{background-color:var(--toast-color-warning-lightest)}}}.toast-type--Error{border-color:var(--toast-color-error);&>.toast__icon{color:var(--toast-color-error)}&>.toast__msg{color:#8a1c04}&>.toast-progress{background-color:var(--toast-color-error)}&.toast-color-theme{background-color:color-mix(in srgb,var(--toast-color-error),transparent 10%);&>.toast-progress{background-color:var(--toast-color-error-lightest)}}}@keyframes progress-keyframe{to{width:0}}@keyframes Toastify__slideManualIn{0%{transform:translateX(calc(-100% - 32px))}to{transform:translateX(0)}}@keyframes Toastify__slideManualOut{0%{transform:translateY(0)}to{transform:translateY(calc(100vh + 100%))}}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(calc(100vw + 100px),0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,0,0)}to{opacity:0;transform:translate3d(calc(100vw + 100px),0,0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(calc(-100vw - 100px),0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,0,0)}to{opacity:0;transform:translate3d(calc(-100vw - 100px),0,0)}}@keyframes Toastify__bounceInBottom{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,calc(100vh + 100px),0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutBottom{20%{transform:translate3d(0,-10px,0)}40%,45%{opacity:1;transform:translate3d(0,20px,0)}to{opacity:0;transform:translate3d(0,calc(100vh + 100px),0)}}@keyframes Toastify__bounceInTop{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,calc(-100vh - 100px),0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutTop{20%{transform:translate3d(0,-10px,0)}40%,45%{opacity:1;transform:translate3d(0,20px,0)}to{opacity:0;transform:translate3d(0,calc(-100vh - 100px),0)}}@keyframes Toastify__slideInRight{0%{opacity:0;transform:translateX(calc(100% + 100px))}to{opacity:1;transform:translateX(0)}}@keyframes Toastify__slideOutRight{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(calc(100% + 100px))}}@keyframes Toastify__slideInLeft{0%{opacity:0;transform:translateX(-120vw)}to{opacity:1;transform:translateX(0)}}@keyframes Toastify__slideOutLeft{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(-120vw)}}@keyframes Toastify__slideInTop{0%{opacity:0;transform:translateY(-50vh)}to{opacity:1;transform:translateY(0)}}@keyframes Toastify__slideOutTop{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-100vh)}}@keyframes Toastify__slideInBottom{0%{opacity:0;transform:translateY(calc(100vh + 50px))}to{opacity:1;transform:translateY(0)}}@keyframes Toastify__slideOutBottom{0%{transform:translateY(0)}to{opacity:0;transform:translateY(calc(100vh + 50px))}}@keyframes Toastify__ellipticInRight{0%{opacity:0;transform:translateX(800px) rotateY(-30deg) scale(0);transform-origin:-100% 50%}to{opacity:1;transform:translateX(0) rotateY(0) scale(1);transform-origin:-1800px 50%}}@keyframes Toastify__ellipticOutRight{0%{opacity:1;transform:translateX(0) rotateY(0) scale(1);transform-origin:-1800px 50%}to{opacity:1;transform:translateX(1000px) rotateY(-30deg) scale(0);transform-origin:-100% 50%}}@keyframes Toastify__ellipticInLeft{0%{opacity:0;transform:translateX(-800px) rotateY(30deg) scale(0);transform-origin:-100% 50%}to{opacity:1;transform:translateX(0) rotateY(0) scale(1);transform-origin:1800px 50%}}@keyframes Toastify__ellipticOutLeft{0%{opacity:1;transform:translateX(0) rotateY(0) scale(1);transform-origin:2000px 50%}to{opacity:1;transform:translateX(-1000px) rotateY(30deg) scale(0);transform-origin:-100% 50%}}@keyframes Toastify__ellipticInTop{0%{opacity:0;transform:translateY(-600px) rotateX(-30deg) scale(0);transform-origin:50% 100%}to{opacity:1;transform:translateY(0) rotateX(0) scale(1);transform-origin:50% 1400px}}@keyframes Toastify__ellipticOutTop{0%{opacity:1;transform:translateY(0) rotateX(0) scale(1);transform-origin:50% 1400px}to{opacity:1;transform:translateY(-600px) rotateX(-30deg) scale(0);transform-origin:50% 100%}}@keyframes Toastify__ellipticInBottom{0%{opacity:0;transform:translateY(600px) rotateX(30deg) scale(0);transform-origin:50% 100%}to{opacity:1;transform:translateY(0) rotateX(0) scale(1);transform-origin:50% -1400px}}@keyframes Toastify__ellipticOutBottom{0%{opacity:1;transform:translateY(0) rotateX(0) scale(1);transform-origin:50% -1400px}to{opacity:1;transform:translateY(600px) rotateX(30deg) scale(0);transform-origin:50% 100%}}@keyframes Toastify__flipInHorz{0%{opacity:0;transform:rotateX(80deg)}to{opacity:1;transform:rotateX(0)}}@keyframes Toastify__flipOutHorz{0%{opacity:1;transform:rotateX(0)}to{opacity:0;transform:rotateX(70deg)}}@keyframes Toastify__flipInVert{0%{opacity:0;transform:rotate3d(1,1,0,-80deg)}to{opacity:1;transform:rotate3d(1,1,0,0deg)}}@keyframes Toastify__flipOutVert{0%{opacity:1;transform:rotate3d(1,1,0,0deg)}to{opacity:0;transform:rotate3d(1,1,0,-70deg)}}@keyframes Toastify__slitInHorz{0%{opacity:0;transform:translateZ(-800px) rotateX(90deg)}54%{opacity:1;transform:translateZ(-160px) rotateX(87deg)}to{transform:translateZ(0) rotateX(0)}}@keyframes Toastify__slitOutHorz{0%{opacity:1;transform:translateZ(0) rotateX(0)}54%{opacity:1;transform:translateZ(-160px) rotateX(87deg)}to{opacity:0;transform:translateZ(-800px) rotateX(90deg)}}@keyframes Toastify__slitInVert{0%{opacity:0;transform:translateZ(-800px) rotateY(90deg)}54%{opacity:1;transform:translateZ(-160px) rotateY(87deg)}to{transform:translateZ(0) rotateY(0)}}@keyframes Toastify__slitOutVert{0%{opacity:1;transform:translateZ(0) rotateY(0)}54%{opacity:1;transform:translateZ(-160px) rotateY(87deg)}to{opacity:0;transform:translateZ(-800px) rotateY(90deg)}}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}to{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}to{opacity:0;transform:scale3d(.3,.3,.3)}}@keyframes Toastify__swirlIn{0%{opacity:0;transform:rotate(-540deg) scale(0)}to{opacity:1;transform:rotate(0) scale(1)}}@keyframes Toastify__swirlOut{0%{opacity:1;transform:rotate(0) scale(1)}to{opacity:0;transform:rotate(-540deg) scale(0)}}.havingShortPopup{display:inline-block;position:relative}.havingShortPopup .shortPoup{background-color:#656565;border:1px solid gray;border-radius:6px;box-shadow:0 20px 30px -10px #26394d;color:#fff;left:50%;opacity:0;padding:5px;position:absolute;text-align:center;top:100%;transform:translateX(var(--data-translateX,-50%));transition:opacity 1s;visibility:hidden;width:min(500px,calc(100vw - 40px));z-index:5}.havingShortPopup .shortPoup:after{border:8px solid transparent;border-bottom-color:#656565;bottom:100%;content:" ";left:var(--data-translateX-pseudo-after,calc(50% - 8px));position:absolute}.havingShortPopup .shortPoupShow{opacity:1;visibility:visible!important}.shortPoup input:not([type=button]){width:10em}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{appearance:textfield;-moz-appearance:textfield}.shortPoup input+span{padding-right:30px}.shortPoup>*{margin-bottom:5px}.shortPoup>label{display:inline-block;font-size:.9em}.shortPoup>label>b{color:#d0f399;font-size:1.1em;font-weight:400}.shortPoup input:invalid+span.checkInputValidity:after{color:#ff7272;content:"✖";font-size:1.2em;padding-left:5px;position:absolute}.shortPoup input:valid+span.checkInputValidity:after{color:#80f9f9;content:"✓";font-size:1.15em;padding-left:5px;position:absolute}.havingShortPopup>button:has(+#sleepTimerDivPopup){&.sleepTimerActive{animation:sleepTimerActive_colorChange 3s infinite alternate}&+div>input#ipSleepTimer{caret-color:var(--select-book-group-color);&::placeholder{color:var(--select-book-group-color);opacity:.7}}}@keyframes sleepTimerActive_colorChange{0%,40%{color:red}to{color:#c5a91e}}#elmSleepTimerCountDown{background:beige;border-radius:5px;color:darkred;font-size:1.3em;padding:0 5px;&.almostReachingEnd{animation:timer-blink-kf 2s step-start .3s infinite}svg:has(+&){color:darkred}}.activeDragItem{background-color:#666;box-shadow:0 1px 4px rgba(181,14,14,.16),0 0 0 3px #7c4c4c}.draggingGhostElem{background-color:orange;border:2px solid #00008b;list-style-type:none;opacity:1!important;pointer-events:none;position:absolute;& *{color:#000!important;font-weight:700;opacity:1!important}&>input[type=checkbox]{border:1px solid darkred!important;float:right;font-size:20px;margin-right:7px}}.activeDropItem{background-color:#21ff1577!important;box-shadow:0 1px 4px rgba(0,0,0,.16),0 0 0 3px #333;transform:translateX(50px) scaleX(1.2)}.modalPopup .modalPopupOverlay{background:rgba(0,0,0,.7);display:none;height:100vh;left:0;position:fixed;top:0;width:100vw;z-index:9}.modalPopup .modalPopupContentWrapper{background-color:#fff;border-radius:20px;box-shadow:0 0 10px #111;box-sizing:border-box;display:block;left:50%;overflow:hidden;padding:10px;position:absolute;position:fixed;text-align:center;top:0;transform:translate(-50%,-50%) scale(0);transition:all .3s ease-in-out;width:min(80vw,850px);z-index:10;--__s:45px;--__c:#a088b921}@media (max-width:700px){.modalPopup .modalPopupContentWrapper{width:95vw}}.modalPopup .modalHeader{align-items:center;display:flex;justify-content:space-between;margin-top:-10px}.modalPopupContent #elmHistoryWipeAll{align-items:center;display:flex;width:34px;&+label:after{content:"Wipe out all saved data"}}.modalPopupContent #elmHistoryWipeAllButDataCfg+label:after{content:"Reset to new DBs cfg above"}.modalPopupContent #elmCheckDBFilesUpdate+label:after{content:"Check new DBs edition"}.modalPopupContent #chkShowHideAllHistChapDetails+label:after{content:"Show/Hide chapers infor"}.modalPopupContent #chkDisableCircleProgressButton{&:checked+label:before{color:var(--select-book-group-color);content:"Show Play progress"}&:not(:checked)+label:before{content:"Hide Play progress"}}.modalPopupContent #chkHideBufferBar{&:checked+label:before{color:var(--select-book-group-color);content:"Show audio buffer bar"}&:not(:checked)+label:before{content:"Hide audio buffer bar"}}@media (min-width:800px){.modalPopupContent #chkShowHideAllHistChapDetails+label:after{content:"Ẩn/Hiện chi tiết các chương sách"}.modalPopupContent #elmHistoryWipeAll+label:after{content:"Xóa toàn bộ thông tin đã lưu"}.modalPopupContent #elmHistoryWipeAllButDataCfg+label:after{content:"Nạp lại theo cấu hình CSDL mới"}.modalPopupContent #elmCheckDBFilesUpdate+label:after{content:"Kiểm tra phiên bản mới các CSDL"}.modalPopupContent #chkDisableCircleProgressButton{&:checked+label:before{content:"Hiện tiến trình trên nút Play"}&:not(:checked)+label:before{content:"Ẩn tiến trình trên nút Play"}}.modalPopupContent #chkHideBufferBar{&:checked+label:before{content:"Hiện thanh audio buffer"}&:not(:checked)+label:before{content:"Ẩn thanh audio buffer"}}}.modalPopup .closeModal{background:#eee;border:1px solid #aaa;border-radius:6px;cursor:pointer;height:34px;padding:2px;position:absolute;right:10px;text-align:center;top:5px;width:34px;&:before{background:transparent url(https://uxwing.com/wp-content/themes/uxwing/download/checkmark-cross/remove-icon.svg) 0 0/30px 30px no-repeat!important;content:" ";display:block;height:30px;text-align:center;width:30px}&:hover{background:#ccc;&:before{filter:invert(14%) sepia(98%) saturate(7458%) hue-rotate(358deg) brightness(91%) contrast(122%);transition:filter .15s ease-out}}}.modalPopupContent .bounding-box{background-color:#f0f8ff44;border:1px solid gray;border-radius:10px;margin:5px 0;padding:5px 0 2px}.modalPopup.activeModalPopup .modalPopupOverlay{backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);display:block}.modalPopup.activeModalPopup .modalPopupContentWrapper{transform:translate(-50%,max(calc(25dvh - 25%),1px)) scale(1);&:focus{outline:none}}.modalPopupContent label[for=selPopupBookGroup]{display:none}.modalPopupContent #selPopupBookGroup{border-color:#000;border-width:2px;filter:var(--select-book-group-filter);width:90%}@media (min-width:500px){.modalPopupContent label[for=selPopupBookGroup]{display:block}.modalPopupContent #selPopupBookGroup{width:20em}}ol.lstBookTitlesSetting{margin:5px 0!important;max-height:min(calc(80dvh - 100px),600px)!important}ol#lstBookTitlesSetting{max-height:min(calc(80dvh - 130px),600px)!important}ol.lstBookTitlesSetting>li>input[type=checkbox]{border:1px solid darkred!important;float:right;font-size:20px;margin-right:7px}input[type=checkbox][role=switch]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid;border-radius:1em;box-sizing:content-box;color:inherit;font-size:inherit;height:1em;margin:auto;position:relative;vertical-align:text-bottom;width:2em;&:checked:hover{background:color-mix(in srgb,#8bb9ee 60%,CanvasText 10%)}&:not(:checked):hover{background:color-mix(in srgb,GrayText 30%,CanvasText 10%)}&:indeterminate:hover{background:color-mix(in srgb,GrayText 30%,#fff 70%)}&:before{background:currentcolor;border:1px solid;border-radius:50%;box-sizing:border-box;content:"";height:.7em;left:0;margin:0 .15em;position:absolute;top:50%;transform:translateY(-50%);width:.7em}&:checked:before{background:#0d8707;left:1em}&:indeterminate{background:transparent;&:before{background:#b8b8b8;border-radius:20%;left:.5em;scale:.9;transform:translateY(calc(-50% - .05em))}}&:disabled{opacity:.4}}[name=Toast-Setting]{max-height:min(calc(90dvh - 130px),600px)!important;overflow-y:auto}.fancyRadioContainer{display:flex;-webkit-box-align:center;align-items:center;flex-wrap:wrap;gap:5px;justify-content:flex-start;margin-bottom:5px;padding:2px 4px 4px 10px;&>input[type=radio].fancyRadioHidden{margin-right:8px;opacity:0;position:absolute;z-index:-1}}input[type=radio].fancyRadioHidden+label.fancyRadioLabel{color:#333;cursor:pointer;font-weight:300;line-height:1.8;margin-right:.6em;padding-left:1.6em;padding-right:1em;position:relative;transition:all .25s ease 0s;vertical-align:middle;z-index:1;&:before{border:2px solid #e91e63;border-radius:1em;box-sizing:border-box;content:" ";display:block;height:1.2em;left:0;position:absolute;top:.3em;transition:all .25s ease 0s;width:1.2em;z-index:-1}&.fancyRadioLabelPurple:before{border-color:#941ee9}&.fancyRadioLabelBlue:before{border-color:#1e1ee9}&.fancyRadioLabelGold:before{border-color:#d47a11}&.fancyRadioLabelRandomChoose{&:after{background-color:#938f8f;border-radius:50%;box-sizing:border-box;content:" ";display:block;height:.8em;left:.2em;position:absolute;top:.5em;width:.8em;z-index:-1}}}input[type=radio].fancyRadioHidden:checked+label.fancyRadioLabel{color:#fff;padding-left:1em;&:before{background:#e91e63;height:1.8em;top:1px;width:100%}&.fancyRadioLabelPurple:before{background:#941ee9}&.fancyRadioLabelBlue:before{background:#1e1ee9}&.fancyRadioLabelGold:before{background:#d47a11}}.setting-elm-disabled{background-color:#ddd8d866;border-image:linear-gradient(90deg,#743ad5,#d53a9d) 1 /1.5px 0;cursor:not-allowed;pointer-events:none}div[name=hotkeysSettingWrapper]{max-height:min(calc(100dvh - 70px),780px)!important;overflow:hidden auto;width:100%;&>div{display:block}&>div>fieldset{align-items:center;display:grid;grid-auto-flow:row;grid-template-columns:[hotKey] min-content [description] 1fr;justify-items:start;grid-gap:.2em .5em;@media screen and (min-width:800px){&.lanscape-content{grid-template-columns:[hotKey] auto [description] 1fr}}& *{font-size:.9em}&>span.commonGuide{background-color:#f0f8ff44;border:1px solid gray;border-radius:10px;grid-column:span 2;line-height:1.3;padding:2px 5px;text-align:justify}&>samp{align-self:center;grid-column:hotKey;grid-row:auto;justify-self:end;text-align:right}&>label{border:0;grid-column:description;grid-row:auto;padding:.4em;text-align:left}& kbd{background-color:#eee;border:1px solid #b4b4b4;border-radius:3px;box-shadow:0 1px 1px rgba(0,0,0,.2),inset 0 2px 0 0 hsla(0,0%,100%,.7);color:#333;display:inline-block;font-size:.95em;font-weight:700;line-height:1.2;margin-bottom:3px;padding:2px 4px;white-space:nowrap;&.ignoreModifierKeys{color:var(--select-book-group-color)}}&>div[name=coryright]{align-items:center;display:flex;flex-flow:row nowrap;font-size:1.1rem;grid-column:span 2;text-align:left;&>[name=authorName]{display:inline-block;height:1em;line-height:1.3em;overflow:hidden;&:after{animation:l39-1 4.5s steps(20) infinite alternate,l39-2 3s infinite alternate;content:"🄱🅈 🄲🄷🄸🄽🄷🅅🅃🅁\A🅑🅈 🄲🄷🄸🄽🄷🅅🅃🅁\A🅑🅨 🅲🄷🄸🄽🄷🅅🅃🅁\A🅑🅨 🅲🅷🄸🄽🄷🅅🅃🅁\A🅑🅨 🅲🅷🅸🄽🄷🅅🅃🅁\A🅑🅨 🅲🅷🅸🅽🄷🅅🅃🅁\A🅑🅨 🅲🅷🅸🅽🅷🅅🅃🅁\A🅑🅨 🅲🅷🅸🅽🅷🆅🅃🅁\A🅑🅨 🅲🅷🅸🅽🅷🆅🆃🅁\A🅑🅨 🅲🅷🅸🅽🅷🆅🆃🆁\AⒷ🅨 🅲🅷🅸🅽🅷🆅🆃🆁\AⒷⓎ 🅲🅷🅸🅽🅷🆅🆃🆁\AⒷⓎ Ⓒ🅷🅸🅽🅷🆅🆃🆁\AⒷⓎ ⒸⒽ🅸🅽🅷🆅🆃🆁\AⒷⓎ ⒸⒽⒾ🅽🅷🆅🆃🆁\AⒷⓎ ⒸⒽⒾⓃ🅷🆅🆃🆁\AⒷⓎ ⒸⒽⒾⓃⒽ🆅🆃🆁\AⒷⓎ ⒸⒽⒾⓃⒽⓋ🆃🆁\AⒷⓎ ⒸⒽⒾⓃⒽⓋⓉ🆁\AⒷⓎ ⒸⒽⒾⓃⒽⓋⓉⓇ";display:inline-block;font-size:1rem;white-space:pre}}}}}@media (pointer:fine){div[name=authorName]{height:1.2em!important;line-height:1.2em!important}}@keyframes l39-1{to{transform:translateY(-100%)}}@keyframes l39-2{0%{color:#000}20%{color:blue}60%{color:red}80%{color:green}to{color:#000}}@media (min-width:800px){div[name=hotkeysSettingWrapper]>div{align-items:baseline;column-gap:8px;display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr))}}.tabs-group{display:flex;flex-wrap:wrap;margin:0 auto;width:100%;&>label{--active-tab-header-text-color:#222;--inactive-tab-header-text-color:#fff;--active-tab-header-bg-color:#93cef8;--inactive-tab-header-bg-color:#699879;--tab-header-border-color:#fff;--tab-header-border-width:1px;--padd-width:.7em;--pad-skew:13deg;background:var(--inactive-tab-header-bg-color);border-radius:.5rem .5rem 0 0;color:var(--inactive-tab-header-text-color);cursor:pointer;display:inline-block;margin:0 .3rem 0 calc(-4px + var(--padd-width));order:0;padding:.5rem calc(2px + var(--padd-width)/2) .1rem;position:relative;&:first-of-type{margin-left:calc(-1px + var(--padd-width))}&:after,&:before{background-color:inherit;bottom:0;content:" ";position:absolute;top:0;width:var(--padd-width);z-index:-1}&:before{border-left:var(--tab-header-border-width) solid var(--tab-header-border-color);border-radius:calc(2px + var(--padd-width)/2) 0 0 0;left:calc(-2px - var(--padd-width)/2);transform:skew(calc(0deg - var(--pad-skew)))}&:after{border-radius:0 calc(2px + var(--padd-width)/2) 0 0;border-right:var(--tab-header-border-width) solid var(--tab-header-border-color);right:calc(-2px - var(--padd-width)/2);transform:skew(var(--pad-skew));z-index:1}&>code{position:relative;z-index:2;--tooltip-timeout:6s;&>svg{font-size:1.1em!important}}&:has(use[href="#icnSvgKeyboard"]){padding-top:.35em}}&>.tab-content{background:var(--active-tab-header-bg-color);border:1px solid #666;border-radius:0 10px 10px;display:none;flex-flow:column nowrap;flex-grow:1;max-height:calc(100dvh - 60px);order:99;padding:5px;width:100%}&>input[type=radio]{display:none}}body:has(#selBookGroup>option:nth-of-type(2):checked) .tabs-group>label{--active-tab-header-bg-color:#c9c5f2;--inactive-tab-header-bg-color:#945396}body:has(#selBookGroup>option:nth-of-type(3):checked) .tabs-group>label{--active-tab-header-bg-color:#ccc;--inactive-tab-header-bg-color:#666}.tabs-group>input[type=radio]:checked+label{background:var(--active-tab-header-bg-color);color:var(--active-tab-header-text-color);&:before{z-index:1}&+.tab-content{display:flex;flex-flow:column}}#loadingPageWrapper{background:#fff;height:100vh;left:0;opacity:1;position:fixed;top:0;transition:opacity .5s linear;width:100vw;z-index:15;&>div{left:0;margin:0 auto;position:absolute;right:0;top:30%;width:fit-content}}.loader-bar-nonstop{border:.15rem solid;border-radius:2rem;color:#514b82;height:1.5rem;overflow:hidden;position:relative;width:100%;&:before{animation:l14 1s linear infinite;background:currentColor;border-radius:inherit;bottom:0;box-shadow:-10px 0 12px 3px currentColor;clip-path:polygon(0 5%,100% 0,100% 100%,0 95%,-30px 50%);content:"";left:-20px;margin:2px;position:absolute;top:0;width:14px}}@keyframes l14{0%{color:#514b82}20%{color:#ef5d74}40%{color:#f9a74b}60%{color:#60beeb}80%{color:#fbef5a}to{color:#514b82;left:calc(100% + 20px)}}.loading-text-loader{color:#0000;font-size:3em;font-weight:700;line-height:1.5;width:fit-content;--wave-color:#008000aa;-webkit-text-stroke:1px #000;-webkit-text-stroke-color:var(--select-book-group-color,#000);animation:l9 2s linear infinite;background:radial-gradient(1.13em at 50% 1.6em,var(--wave-color) 99%,#0000 101%) calc(50% - 1.6em) 0/3.2em 100% text,radial-gradient(1.13em at 50% -.8em,#0000 99%,var(--wave-color) 101%) 50% .8em/3.2em 100% repeat-x text;&:before{content:"Loading"}}@keyframes l9{to{background-position:calc(50% + 1.6em) 0,calc(50% + 3.2em) .8em}}.loading-text-splash-screen{font-size:3.5em;--wave-color:#000b;animation:l9 2s linear infinite,l10 2s linear infinite alternate;margin-top:-.25em}@keyframes l10{0%{-webkit-text-stroke-color:#514b82}20%{-webkit-text-stroke-color:#ef5d74}40%{-webkit-text-stroke-color:#f9a74b}60%{-webkit-text-stroke-color:#60beeb}80%{-webkit-text-stroke-color:#fbef5a}to{-webkit-text-strokecolor:#514b82}}.circus-background{--__s:30px;--__c:#e2c9b921;--_l:#0000 46%,var(--__c) 47% 53%,#0000 54%;background:radial-gradient(100% 100% at 100% 100%,var(--_l)) var(--__s) var(--__s),radial-gradient(100% 100% at 0 0,var(--_l)) var(--__s) var(--__s),radial-gradient(100% 100%,#0000 22%,var(--__c) 23% 29%,#0000 30% 34%,var(--__c) 35% 41%,#0000 42%) transparent;background-size:calc(var(--__s)*2) calc(var(--__s)*2)}.radial-background{--__s:80px;--c1:#fff;--__c:#f8994f20;--_s:calc(var(--__s)*2) calc(var(--__s)*2);--_g:35.36% 35.36% at;--_c:#0000 66%,var(--__c) 68% 70%,#0000 72%;background:radial-gradient(var(--_g) 100% 25%,var(--_c)) var(--__s) var(--__s)/var(--_s),radial-gradient(var(--_g) 0 75%,var(--_c)) var(--__s) var(--__s)/var(--_s),radial-gradient(var(--_g) 100% 25%,var(--_c)) 0 0/var(--_s),radial-gradient(var(--_g) 0 75%,var(--_c)) 0 0/var(--_s),repeating-conic-gradient(var(--c1) 0 25%,#0000 0 50%) 0 0/var(--_s),radial-gradient(var(--_c)) 0 calc(var(--__s)/2)/var(--__s) var(--__s) var(--c1)}@media (pointer:coarse) and (hover:none){.circus-background{--__c:#e2c9b938}.radial-background{--__c:#f2a06040}.sdd-chapterList-background{--__c:#a7677820}}[data-tooltip]{--arrow-size:3px;--tooltip-timeout:5s;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);user-select:none;-webkit-user-select:none;-webkit-touch-callout:none;&:after,&:before{bottom:calc(100% - 5px + var(--arrow-size));left:50%;opacity:0;pointer-events:none;position:absolute;transition:.2s;visibility:hidden;z-index:12}&:before{background-color:rgba(59,72,80,.9);background-image:linear-gradient(30deg,rgba(59,72,80,.44),rgba(59,68,75,.44),rgba(60,82,88,.44));border-radius:6px;box-shadow:0 0 14px rgba(0,0,0,.6);box-sizing:border-box;color:#fff;content:attr(data-tooltip);font-size:14px;font-weight:400;max-width:min(500px,calc(100vw - 30px));min-width:60px;padding:10px 18px;text-align:center;transform:translate(var(--data-translateX,-50%),calc(0px - var(--arrow-size))) scale(.5);white-space:pre-wrap;width:max-content;width:-moz-max-content}&:after{border-color:rgba(55,64,70,.9) transparent transparent;border-style:solid;border-width:var(--arrow-size) var(--arrow-size) 0 var(--arrow-size);content:"";transform:translateX(-50%) scaleY(0);transform-origin:top;transition-duration:0s}&:hover:after,&:hover:before{animation:.3s ease-out var(--tooltip-timeout) 1 forwards keyframe-auto-hide-tooltip-timeout;opacity:1;visibility:visible}&:hover:before{transform:translate(var(--data-translateX,-50%),calc(0px - var(--arrow-size))) scale(1);transition-delay:.3s}&:hover:after{transform:translateX(-50%) scaleY(1);transition-delay:.5s;transition-duration:.2s}}@media (pointer:coarse) and (hover:none){[data-tooltip]{--tooltip-timeout:4s}}@keyframes keyframe-auto-hide-tooltip-timeout{to{opacity:0;visibility:hidden}}[data-tooltip-location=left]{&:after,&:before{bottom:50%;left:auto;right:calc(100% - 5px + var(--arrow-size))}&:before{transform:translate(calc(0px - var(--arrow-size)),50%) scale(.5)}&:hover:before{transform:translate(calc(0px - var(--arrow-size)),var(--data-translateY,50%)) scale(1)}&:after{border-color:transparent transparent transparent rgba(55,64,70,.9);border-width:var(--arrow-size) 0 var(--arrow-size) var(--arrow-size);transform:translateY(50%) scaleX(0);transform-origin:left}&:hover:after{transform:translateY(50%) scaleX(1)}}[data-tooltip-location=right]{&:after,&:before{bottom:50%;left:calc(100% - 5px + var(--arrow-size))}&:before{transform:translate(var(--arrow-size),50%) scale(.5)}&:hover:before{transform:translate(var(--arrow-size),var(--data-translateY,50%)) scale(1)}&:after{border-color:transparent rgba(55,64,70,.9) transparent transparent;border-width:var(--arrow-size) var(--arrow-size) var(--arrow-size) 0;transform:translateY(50%) scaleX(0);transform-origin:right}&:hover:after{transform:translateY(50%) scaleX(1)}}[data-tooltip-location=bottom]{&:after,&:before{bottom:auto;top:calc(100% - 5px + var(--arrow-size))}&:before{transform:translate(var(--data-translateX,-50%),var(--arrow-size)) scale(.5)}&:hover:before{transform:translate(var(--data-translateX,-50%),var(--arrow-size)) scale(1)}&:after{border-color:transparent transparent rgba(55,64,70,.9);border-width:0 var(--arrow-size) var(--arrow-size) var(--arrow-size);transform-origin:bottom}}div[name=divCtnTop]>div:has(>details[name=chapterInforDetails]:not(:has([open]))+div.ap-container){margin-top:5px}div[name=divCtnTop]>div:has(>details[name=chapterInforDetails][open]){&>.detailContent{padding-bottom:60px}&+div.ap-container{margin-top:-60px}}div#ListeningHistoryWrapper{max-height:min(calc(100dvh - 70px),780px)!important;overflow:hidden auto;padding-top:0;text-align:left;width:100%}.treeview{--ul-padding-left:20px;--vertical-lines-indent:calc(var(--ul-padding-left)/2);--horizon-lines-top:25px;--li-padd-left:5px;--li-padd-top:5px;border-radius:4px;margin-bottom:0!important;min-height:20px;padding:3px;& ul{padding-left:var(--ul-padding-left)}&>ul{margin:0;padding:0 5px 0 0;&>li>label{color:#000!important}&>li:after,&>li:before{border:0}}}@media screen and (max-width:500px){.treeview{--ul-padding-left:14px}}.treeview li{list-style-type:none;margin:0;padding:var(--li-padd-top) 0 0 var(--li-padd-left);position:relative;&:after,&:before{content:"";left:calc(0px - var(--vertical-lines-indent));position:absolute;right:auto}&:before{border-left:1px solid #999;height:100%;top:0;width:1px}&:last-child:before{height:var(--horizon-lines-top)}&:after{border-top:1px solid #999;height:var(--vertical-lines-indent);top:var(--horizon-lines-top);width:calc(var(--li-padd-left) + var(--vertical-lines-indent))}&>label{border:1px solid #666;border-radius:5px;display:inline-block;font-size:.9em;padding:3px 8px;text-decoration:none;&:not(.treeview>ul>li>label)>*{font-size:inherit;pointer-events:none}& [data-rAlignGroup]{display:inline-block;&[data-rAlignGroup=listenedTime]{text-align:right}}}&:nth-of-type(odd)>label>:is(span.histTitle,svg.svg-img-infor){color:#272782}&:nth-of-type(2n)>label>:is(span.histTitle,svg.svg-img-infor){color:#9f5c28}}li.chapter_li{--horizon-lines-top:50%;cursor:pointer;width:fit-content;&.last-playing-chapter>label{background:linear-gradient(270deg,#ddd,#fff0);border:1.5px solid var(--select-book-group-color)!important}&:hover>label{background:#ddd;border:1px solid #94a0b4;color:#000}}li.chapter_li.last-playing-chapter>label:before,li.parent_li.last-playing-book>label:after{--dot-size:6px;background-color:red;border-radius:50%;content:"";display:block;height:var(--dot-size);left:calc(6px - var(--dot-size)/2);position:absolute;top:calc(var(--horizon-lines-top) - var(--dot-size)/2);width:var(--dot-size);z-index:1}li.parent_li.last-playing-book>label:after{background-color:#80f}.treeview li.parent_li{&:has(>ul):not(.treeview>ul>li.parent_li){padding-bottom:calc(var(--li-padd-top)*1.5);padding-top:calc(var(--li-padd-top)*1.5)}&.last-playing-book{&>label{background:linear-gradient(90deg,#ff8a0033,#fff0);border:2px solid var(--select-book-group-color)!important}& li.last-playing-chapter>label{background:linear-gradient(90deg,#9c27b033,#fff0)!important}}&>input[type=checkbox]{display:none}&>input[type=checkbox]+label{cursor:pointer;&:hover,&:hover+ul li>label{background-color:#eee9;border:1px solid #333;color:#333}&:hover+ul li:after,&:hover+ul li:before{border-color:var(--select-book-group-color);border-width:1.5px}&:not([for=outer_listening_history]):before{--triangle-height:8px;--triangle-width:5px;border:5px solid transparent;border-top-color:#00588b;border-width:var(--triangle-height) var(--triangle-width);content:"";display:inline-block;height:0;left:calc(var(--triangle-width)/2 + .5px - var(--li-padd-left)/2 - var(--vertical-lines-indent));position:absolute;top:calc(var(--horizon-lines-top) - var(--triangle-height));transform:translate(-5px,calc(50% - 2px));transform-origin:25% 50%;transition:all .5s ease;width:0;z-index:1}&:hover:before{border-top-color:#8d1db9!important}}&>input[type=checkbox]:not(:checked)+label{border-left-width:4px!important;&:before{border-top-color:red;rotate:-90deg;transform:translate(-3px,3px)}}&>input[type=checkbox]+label+ul{max-height:0;overflow:hidden;transition:max-height 1s ease}&>input[type=checkbox]:checked+label+ul{max-height:5000px}}div[name=sdd-BookTitlesDropdown-container]{margin:5px auto;position:relative;width:min(800px,95vw)}div[name=sdd-ChaptersListDropdown-container]{margin-bottom:5px}.sdd-wrapper{--color-black:#1a1a1a;--color-darks:#333;--color-darkgreys:grey;--color-greys:#ccc;--color-light:#f5f5f5;--color-white:#fff;--color-blues:#3c83f6;--color-dark-blues:#0950c3;--color-dark-light_yellow:rgba(255,138,0,.2);--shadow-small:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);--shadow-medium:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);--shadow-large:7px 8px 15px -3px rgba(0,0,0,.4),2px 7px 6px -2px rgba(0,0,0,.2);--shadow-bottom:0px 3px 3px 0px #1115;margin:0 auto;max-width:min(800px,100%,95vw);position:relative;width:100%;& *{box-sizing:border-box;margin:0;padding:0;text-align:left}& em.item-order{color:#b8860b;display:inline-block;font-size:.9em;font-style:normal;margin-right:3px;text-align:right}& .item-slight-details{color:var(--select-book-group-color);font-size:.875rem}}.sdd-wrapper .sdd-controls{background-clip:padding-box;border:2px solid var(--select-book-group-color);border-radius:.4rem;box-shadow:var(--shadow-medium);color:var(--color-black);cursor:pointer;height:auto;line-height:1.2;outline:none;padding:.4rem 1.7em .4rem .5rem;position:relative;transition:all .3s ease-in-out;user-select:none;width:100%;--sdd-avatar-icon:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='102.4 153.6 870.4 819.2'><path d='M512 819.2c-23.3 31.1-60.5 51.2-102.4 51.2H179.2a76.8 76.8 0 0 1-76.8-76.8V230.4a76.8 76.8 0 0 1 76.8-76.8h230.4c41.9 0 79.1 20.1 102.4 51.2 23.3-31.1 60.5-51.2 102.4-51.2h230.4a76.8 76.8 0 0 1 76.8 76.8v358.4c0-41.9-20.1-79.1-51.2-102.4v-256a25.6 25.6 0 0 0-25.6-25.6H614.4a76.8 76.8 0 0 0-76.8 76.8v460.8c0 26.8 13.8 50.5 34.7 64.2 6.6 22.7 16.5 43.9 29.2 63.2a127.8 127.8 0 0 1-89.5-50.6M153.6 230.4v563.2a25.6 25.6 0 0 0 25.6 25.6h230.4a76.8 76.8 0 0 0 76.8-76.8V281.6a76.8 76.8 0 0 0-76.8-76.8H179.2a25.6 25.6 0 0 0-25.6 25.6M892.2 824a127.5 127.5 0 0 0 29.4-81.6 25.6 25.6 0 0 1 51.2 0 179.3 179.3 0 0 1-153.6 177.4v27.4a25.6 25.6 0 0 1-51.2 0v-27.4a179.8 179.8 0 0 1-136.3-100.6 178.5 178.5 0 0 1-17.3-76.8 25.6 25.6 0 0 1 51.2 0A127.5 127.5 0 0 0 695 824c23.4 28.3 58.9 46.4 98.5 46.4h.2c39.7 0 75.1-18.1 98.5-46.4M716.8 588.8a76.8 76.8 0 0 1 153.6 0v153.6a76.8 76.8 0 0 1-153.6 0z'/></svg>");&:after{--bg-size:1.5em;background:var(--sdd-avatar-icon) right 0 center /var(--bg-size) no-repeat;content:"";filter:var(--select-book-group-filter);height:var(--bg-size);position:absolute;right:.25em;top:50%;translate:0 -50%;width:var(--bg-size)}&:hover:after{filter:var(--select-hover-bground-filter)}&.single-line{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}.sdd-wrapper .sdd-dropdown-wrapper{background-color:var(--color-white);border:2px solid var(--color-greys);border-radius:.25rem;box-shadow:var(--shadow-large);left:0;position:absolute;top:100%;width:100%;z-index:20}.sdd-wrapper .sdd-dropdown-border-bottom-stripes{height:5px;--__c:var(--select-book-group-color);animation:sdd-dbb-stripes 2s linear infinite;background:linear-gradient(-45deg,var(--__c) 60%,transparent 60%,transparent 75%,var(--__c) 75%) 0 0 /40px 20px}@keyframes sdd-dbb-stripes{0%{background-position:40px 0}to{background-position:0 0}}.sdd-wrapper.sdd-wrapper-chapterList{& .sdd-controls:after{background-image:url(https://uxwing.com/wp-content/themes/uxwing/download/web-app-development/stack-icon.svg);background-size:1.3em}& .input-wrapper input.sdd-search-box{caret-color:var(--select-book-group-color);&::placeholder{color:var(--select-book-group-color);opacity:.7}}& .sdd-dropdown-wrapper .sdd-dropdown-content{--__s:240px;--__c:#a7677816;--__c2:transparent;--_g:#0000 54%,var(--__c) 54% 57%,#0000 57%;background:radial-gradient(farthest-side at -33.33% 50%,var(--_g)) 0 calc(var(--__s)/2),radial-gradient(farthest-side at 50% 133.33%,var(--_g)) calc(var(--__s)/2) 0,radial-gradient(farthest-side at 133.33% 50%,var(--_g)),radial-gradient(farthest-side at 50% -33.33%,var(--_g)),var(--__c2);background-size:calc(var(--__s)/4.667) var(--__s),var(--__s) calc(var(--__s)/4.667);& .sdd-dropdown-item:nth-of-type(odd){color:#7d1f21}}& .sdd-dropdown-wrapper .sdd-dropdown-border-bottom{--__c:var(--select-book-group-color);--__h:8px;--__s:25px;--__cw:65%;animation:none;background:linear-gradient(#0fa8a8 0 0) var(--__cw) 100%/3px 100% no-repeat,var(--color-light);box-shadow:0 2px 0 var(--__c);display:grid;height:var(--__h);&:after,&:before{animation:sdd-dbb-sc .8s linear infinite;background:repeating-linear-gradient(90deg,var(--__c) 0 calc(var(--__h)*1.5),#0000 0 100%) 0 0/var(--__s) 100%;clip-path:inset(0 calc(100% - var(--__cw)) 0 0);content:"";grid-area:1/1}&:before{background:radial-gradient(circle calc(var(--__h)/2) at calc(var(--__h)/2) 50%,color-mix(in hsl,var(--__c) 40%,#d3cf00) 99%,#0000) 0 0/var(--__s) 100%;clip-path:inset(0 0 0 var(--__cw))}}}@keyframes sdd-dbb-sc{to{background-position:var(--__s) 0}}@media (pointer:fine) and (hover:hover){.sdd-wrapper .sdd-dropdown-border-bottom-factory{--__h:6px;--__s:20px}}.sdd-wrapper .input-wrapper{background-color:var(--color-light);border:1px solid grey;border-radius:5px;box-shadow:var(--shadow-bottom);display:grid;grid-template-columns:minmax(0,1fr) minmax(1rem,max-content);position:relative;div.sdd-control-buttons{display:grid;grid-auto-flow:column dense;margin:auto 5px;place-items:center end;&>button{appearance:none;background-color:transparent;border:none;color:var(--select-book-group-color);cursor:pointer;height:1.4em;margin-left:3px;width:1.4em;&:hover{border-color:var(--color-blues)!important}&:active,&:focus{border:1px solid var(--color-greys);box-shadow:none;color:var(--color-dark-blues);outline:none!important}&>svg{color:inherit;fill:currentColor}&.toggle-extra-title-button[attr-extra-title-hidden]{color:red}}&>button.clear-input-button,&>button.close-open-groups-button,&>button.toggle-extra-title-button{display:none}&>button.search-diacritics-option-button{background-color:bisque;border:2px solid var(--select-book-group-color);border-radius:.2em;color:#8b008b;display:grid;padding:.15em;place-items:center;&.search-diacritics-exactSearch{background-color:unset;border-color:#666;color:#333;&>svg{filter:blur(.7px) drop-shadow(-1px -1px 4px var(--select-book-group-color))}}}}}.sdd-wrapper:has(div.sdd-dropdown-wrapper>div.sdd-dropdown-content>div.optgroup) .close-open-groups-button{display:block;font-size:.85em}.sdd-wrapper:has(div.sdd-dropdown-wrapper>div.sdd-dropdown-content div.sdd-dropdown-item>div.item-2nd-main-div) .toggle-extra-title-button{display:block}.sdd-wrapper .input-wrapper .sdd-search-box{background-clip:padding-box;background-color:transparent;border:none;caret-color:#d53498;color:var(--color-black);display:block;font-family:inherit;font-size:1.1rem!important;font-weight:400;height:auto;line-height:1.8;outline:none;padding:.2rem 0 .1rem .8rem;&:invalid{&+div.sdd-control-buttons>button.clear-input-button{display:none}}&:valid{&+div.sdd-control-buttons>button.clear-input-button{align-items:center;display:grid}}}.sdd-wrapper .sdd-dropdown-content{counter-reset:dropdownItemCounter;max-height:0;overflow:hidden scroll;transition:max-height .5s ease-in-out;--sdd-dropdown-item-color-light:color-mix(in srgb,var(--select-book-group-color),transparent 70%);--sdd-dropdown-item-color-extra-light:color-mix(in srgb,var(--select-book-group-color),transparent 82%);&::-webkit-scrollbar{height:auto;width:5px}&::-webkit-scrollbar-thumb{background-color:var(--color-blues);border-radius:.25rem;box-shadow:var(--shadow-small)}&>.sdd-dropdown-status-bar{background-color:#000a;border:1.5px solid #000;border-radius:.5em;color:#fff;opacity:1;padding:.5em .8em;position:absolute;right:.1em;text-align:center;top:2.65rem;transition:all .5s ease-in-out;visibility:visible;z-index:5;&.statusbar-hidden{opacity:0;visibility:hidden}&>mark{color:var(--select-book-group-color);font-weight:700;padding:0 4px 2px}}}#elmPlaylist.hideOptionExtraTitle li>.item-2nd-main-div,.sdd-wrapper.hideOptionExtraTitle .sdd-dropdown-item>.item-2nd-main-div{display:none}.sdd-dropdown-content .sdd-dropdown-item{background-color:transparent;color:#5b0a72;counter-increment:dropdownItemCounter;cursor:pointer;font-family:inherit;font-size:1rem;font-weight:400;line-height:inherit;padding:.4rem .25rem .4rem 1.25rem;position:relative;user-select:none;&:nth-of-type(2n){background:linear-gradient(270deg,hsla(0,0%,54%,.2),transparent);color:var(--color-black)}&>.item-2nd-main-div{color:#555;font-size:.85em;margin-top:2px;& span{font-size:inherit}& span.forceTextLeft{&>var{text-align:left!important}}}&>.englishTitle{padding-right:.7em;text-align:right}&:after{content:counter(dropdownItemCounter);font-size:.7em;position:absolute;right:3px;top:calc(50% - .5em)}&:only-of-type:after{content:""}&.disabled{background:unset;color:var(--color-darkgreys);cursor:default!important;pointer-events:none;& *{color:inherit}}&:not(:last-child){border-bottom:1px solid #8080805e}& span.highlight{background:rgba(255,237,40,.4);border-radius:1px;text-decoration:underline}&.is-active,&.is-active:hover{background:linear-gradient(-165deg,transparent,transparent 30%,var(--color-dark-light_yellow))}&.is-selected,&.is-selected:hover{--s:15px;background:linear-gradient(25deg,transparent 0,#ccca 70%,var(--sdd-dropdown-item-color-light) -10%);clip-path:polygon(0 0,calc(100% - var(--s)) 0,100% 50%,calc(100% - var(--s)) 100%,0 100%);padding-right:calc(var(--s));&:before{content:"";left:.35em;position:absolute;top:calc(50% - 9px);transform:rotate(30deg);--tick-size:6.5px;--tick-decor:3.5px solid var(--sdd-dropdown-item-color-light);border-bottom:var(--tick-decor);border-right:var(--tick-decor);height:calc(var(--tick-size)*2);width:var(--tick-size)}}&.is-active.is-selected{background:linear-gradient(25deg,var(--color-dark-light_yellow) 0,#ccca 70%,var(--sdd-dropdown-item-color-light) -10%)}& [data-rAlignGroup]{display:inline-block;text-align:right}& svg{color:var(--select-book-group-color)}}.subTitle{font-size:.85em!important;&>i{color:#008333;font-size:inherit}}.sdd-dropdown-content .subTitle{display:inline-block;text-wrap:balance}.sdd-controls .subTitle{color:var(--select-book-group-color)}.sdd-dropdown-content.allow-hover-on-item .sdd-dropdown-item:hover{background:linear-gradient(45deg,var(--color-greys) 60%,transparent);color:var(--color-black);transition:all .2s ease-in-out}.sdd-dropdown-content .optgroup{border:1.5px solid #cfcdcf;border-radius:5px 5px 0 0;counter-reset:dropdownItemCounter;margin-top:5px;&>input[type=checkbox]{display:none}& input[type=checkbox]+.optgroup-header{background:#fff;background-image:repeating-linear-gradient(45deg,var(--sdd-dropdown-item-color-extra-light) 0 15px,#d9dbe999 0 30px);border-bottom:2px solid #c1c1c1;border-radius:4px 4px 0 0;border-top:1.5px solid #837d7dc9;box-shadow:var(--shadow-bottom);color:#595b5d;cursor:pointer;display:block;font-size:1rem;font-weight:700;line-height:1.5;max-width:100%;padding:3px .75rem;&.disabled{color:var(--color-darkgreys);cursor:default!important;pointer-events:none;& *{color:inherit!important}}&:before{border:5px solid transparent;border-top-color:#110470;border-width:10px 5px;content:"";display:inline-block;height:0;margin-left:4px;transform:translate(-5px,50%);transform-origin:25% 50%;-webkit-transition:all .5s ease;-moz-transition:all .5s ease;-o-transition:all .5s ease;transition:all .5s ease;width:0}& .item-slight-details{color:var(--select-book-group-color);font-size:.875rem}}&:has(:is(.is-active,.is-selected)) input[type=checkbox]+.optgroup-header{background-image:linear-gradient(to right,transparent 10%,var(--color-dark-light_yellow) 51%,transparent 90%),repeating-linear-gradient(-45deg,#fffc 0 20px,#f4f4f4cc 0 40px)}@media (hover:hover) and (pointer:fine){&:has(.is-active) input[type=checkbox]+.optgroup-header{background-image:linear-gradient(to right,transparent 10%,var(--color-dark-light_yellow) 51%,transparent 90%),repeating-linear-gradient(-45deg,#fffc 0 20px,#f4f4f4cc 0 40px)}&:has(.is-selected) input[type=checkbox]+.optgroup-header{background-image:linear-gradient(to right,transparent 10%,var(--sdd-dropdown-item-color-light) 51%,transparent 90%),repeating-linear-gradient(-45deg,#fffc 0 20px,#f4f4f4cc 0 40px)}&:has(.is-active.is-selected) input[type=checkbox]+.optgroup-header{background-image:linear-gradient(to right,transparent 10%,var(--color-dark-light_yellow) 51%,var(--sdd-dropdown-item-color-light) 80%,transparent 100%),repeating-linear-gradient(-45deg,#fffc 0 20px,#f4f4f4cc 0 40px)}}& input[type=checkbox]:not(:checked)+.optgroup-header{&:before{rotate:-90deg;transform:translate(-60%,4px)}}& input[type=checkbox]+.optgroup-header+section{max-height:0;overflow:hidden;transition:max-height .5s ease}& input[type=checkbox]:checked+.optgroup-header+section{max-height:100%;max-width:100%;opacity:1}}.sdd-dropdown-content .no_results{color:var(--select-book-group-color);padding:.5em 0;text-align:center}
</style>
</head>

<body onload="loadPage();" class="niceScrollBar">
<div id="loadingPageWrapper"><div><div class="loader-bar-nonstop"></div><div class="loading-text-loader loading-text-splash-screen"></div></div></div><div class="modalPopup" id="modalSettingPopup"><div class="modalPopupOverlay" onclick="ssData.setting.closeSettingModal()"></div><div class="modalPopupContentWrapper circus-background" tabindex="0"><div class="modalPopupContent"><div class="closeModal" onclick="ssData.setting.closeSettingModal()"></div><div class="tabs-group"><input type="radio" name="tabs-component" id="radioTabBookSetting" checked="checked"><label for="radioTabBookSetting"><code data-tooltip="Thiết đặt Book Kits / Book Sets. Có thể:&#xa;– Ẩn/Hiện sách trong danh sách các tựa sách ở trang chủ.&#xa;– Kéo thả để đảo thứ tự các sách.&#xa;– Có thể thực hiện độc lập cho từng 'Kiểu phân nhóm'.&#xa;– Một số thông tin về Book Set (bộ sách), Book Kit (kho sách) xem trong tooltip của checkbox 'Book Set/Kit View'" data-tooltip-location="bottom"><svg class="button-svg-img"><use href="#icnSvgBookSets"/></svg></code></label><div class="tab-content"><div class="flex-button-container bounding-box"><div class="control-button-flex" style="padding-top:2px"><label for="selPopupBookGroup">Kiểu phân nhóm:</label><select id="selPopupBookGroup" class="dropdown-book-spinner" title="Những cách nhóm thứ tự các truyện"></select></div><span class="control-button-flex"><input id="chkShowBookKit" type="checkbox" class="!text-[25px]" role="switch" title="Danh sách hiển thị phía dưới là Book Kit hay Book Set"><label for="chkShowBookKit" data-tooltip="set in openSettingModal()" data-tooltip-location="bottom" style="color:var(--select-book-group-color);--data-translateX:-75%">Book Set view</label></span></div><div name="bookTitlesSettingWrapper"><div name="bookKitChkboxContainer" class="control-button-flex"></div><ol id="lstBookTitlesSetting" class="lstBookTitlesSetting niceScrollBar"></ol></div></div><input type="radio" name="tabs-component" id="radioTabListenHistory"><label for="radioTabListenHistory"><code data-tooltip="Lịch sử các cuốn sách đã nghe.&#xa;– Thông tin về các cuốn sách đã nghe (gần nhất ở trên), các chương đang nghe dở cũng thời gian.&#xa;– Bấm vào tam giác nhỏ ở điểm giao các dòng kẻ, bên trái mục thông tin sách để xóa cuốn sách đó khỏi lịch sử nghe sách.&#xa;– Có thể dùng nút lệnh để xóa toàn bộ thông tin lịch sử nghe sách." data-tooltip-location="bottom"><svg class="button-svg-img"><use href="#icnSvgHistory"/></svg></code></label><div class="tab-content"><div id="ListeningHistoryWrapper" class="treeview niceScrollBar bounding-box"></div><div class="flex-button-container bounding-box"><span class="control-button-flex"><input id="chkShowHideAllHistChapDetails" type="checkbox" class="!text-[25px]" checked="" role="switch"><label for="chkShowHideAllHistChapDetails"></label></span><span class="control-button-flex"><button id="elmHistoryClear" data-tooltip="Xóa toàn bộ Lịch sử nghe sách" data-tooltip-location="top"><svg class="!text-[20px] button-svg-img"><use href="#icnSvgClearHistory"/></svg></button><label for="elmHistoryClear">Xóa lịch sử nghe sách</label></span></div></div><input type="radio" name="tabs-component" id="radioTabUIOthers"><label for="radioTabUIOthers"><code data-tooltip="Thiết đặt giao diện (GUI).&#xa;– Chủ yếu thiết đặt cho Toast.&#xa;– Thiết đặt cho thanh tiến trình (Circle Progress) trên nút Play, thanh Buffer Bar.&#xa;– Một số nút lệnh xóa dữ liệu trang Web lưu nhằm nâng cao trải nghiệm người dùng." data-tooltip-location="bottom"><svg class="button-svg-img"><use href="#icnSvgGUI"/></svg></code></label><div class="tab-content"><div class="flex-button-container bounding-box"><span class="control-button-flex"><input id="chkDisableCircleProgressButton" type="checkbox" class="!text-[30px]" checked="" role="switch" title="Ẩn/Hiện tiến trình phát hình tròn bao quanh nút Play/Pause"><label for="chkDisableCircleProgressButton"></label></span><span class="control-button-flex"><input id="chkHideBufferBar" type="checkbox" class="!text-[30px]" checked="" role="switch" title="Ẩn/Hiện thanh tiến trình dữ liệu audio đã được tải về máy (buffer)"><label for="chkHideBufferBar"></label></span></div><div name="Toast-Setting" class="niceScrollBar bounding-box"></div><div class="flex-button-container bounding-box"><span class="control-button-flex"><button onclick="historyCls.wipeAll(0)" data-tooltip="Xóa toàn bộ lịch sử thông tin trang Web đã ghi nhận. Nạp lại trang Web" id="elmHistoryWipeAll"><svg class="!text-[25px] button-svg-img"><use href="#icnSvgFullTrashBin"/></svg></button><label for="elmHistoryWipeAll"></label></span></div></div><input type="radio" name="tabs-component" id="radioTabJsFileDataSetting"><label for="radioTabJsFileDataSetting"><code data-tooltip="Thiết đặt Database file.&#xa;– Xem thông tin về các Book Kit, các sách của mỗi Book Kit trong từng file Database.&#xa;– Lựa chọn Database file để hiện các sách trong phiên làm việc tới.&#xa;– Kéo thả để đảo thứ tự nạp các Database (do đó thứ tự sách bị đảo theo, dù các thứ tự này có thể thay đổi lại trong tab Book Setting)" data-tooltip-location="bottom"><svg class="button-svg-img"><use href="#icnSvgDatabaseConfig"/></svg></code></label><div class="tab-content"><div name="jsFileDataSettingWrapper" style="flex-grow:1"><ol id="lstJsFileDataSetting" class="lstBookTitlesSetting niceScrollBar"></ol></div><fieldset><legend>Thống kê</legend><div name="DBStatistics"></div><div class="flex-button-container"><span class="control-button-flex"><button onclick="ssData.setting.handyCheckDBsEdition(!0)" data-tooltip="Kiểm tra để tìm xem có phiên bản (edition) mới các file dữ liệu (Database- DB). Nếu có phiên bản mới của một file dữ liệu, bạn có thể cần phải khởi động lại app để cập nhật dữ liệu mới nhật." id="elmCheckDBFilesUpdate"><svg class="!text-[20px] button-svg-img"><use href="#icnSvgCheckDBsUpdate"/></svg></button><label for="elmCheckDBFilesUpdate"></label></span><span class="control-button-flex"><button onclick="historyCls.wipeAll(1)" data-tooltip="Xóa toàn bộ lịch sử thông tin trang Web đã ghi nhận ngoài cấu hình file database chọn ở bảng phía trên. Nạp lại trang Web" id="elmHistoryWipeAllButDataCfg"><svg class="!text-[20px] button-svg-img"><use href="#icnSvgTrashBin"/></svg></button><label for="elmHistoryWipeAllButDataCfg"></label></span></div></fieldset></div><input type="radio" name="tabs-component" id="radioTabHotKeysSetting"><label for="radioTabHotKeysSetting"><code data-tooltip="Xem thông tin phím tắt điều khiển trang Web, bao gồm:&#xa;– Phím tắt cho Danh mục sách/chương (Search-Dropdown)&#xa;– Phím tắt điều khiển player (Audio–Player).&#xa;– Phím tắt chung của trang chủ.&#xa;– Phím tắt trong cửa số cấu hình này." data-tooltip-location="bottom"><svg class="button-svg-img"><use href="#icnSvgKeyboard"/></svg></code></label><div class="tab-content"><div name="hotkeysSettingWrapper" class="niceScrollBar"></div></div></div></div></div></div><div name="divContainer"><div name="divCtnTop"><audio id="elmMyAudio" autoplay controls src=""></audio><div><div name="sdd-BookTitlesDropdown-container"></div><div id="elmDivMcRadioCtn"><p id="elmInnerMcFlexCtn" class="flex-button-container"></p></div></div><div><details open name="chapterInforDetails"><summary><span id="elmChapterTitle"></span></summary></details><div id="elmChapterInfor" class="detailContent"></div></div><div class="ap-container"><div class="ap-panel"><div class="ap-sub-panel ap--playback" name="divCtnAudioControlBottom"><button class="ap-controls ap-reload-btn" data-tooltip="Nạp lại link truyện" data-tooltip-location="bottom" style="--data-translateX:-15px"><svg class="!text-[20px] button-svg-img"><use href="#icnSvgReload"/></svg></button><button class="ap-controls ap-prev-btn" title="Nghe chương trước"><svg class="!text-[30px] rotate-180 button-svg-img"><use href="#icnSvgSkipNext"/></svg></button><button class="ap-controls ap-rewind-btn" onclick="xAudio.currentTime-=10" title="Lùi lại 10 giây"><svg class="!text-[20px] rotate-180 button-svg-img"><use href="#icnSvgFastForward"/></svg></button><button class="ap-controls ap-play-pause-btn" title="Phát/Dừng truyện"><svg class="!text-[40px] button-svg-img"><use href="#icnSvgPlay" svg-icon-name="PlayPauseIcon"/></svg></button><button class="ap-controls ap-fastforward-btn" onclick="xAudio.currentTime+=10" title="Tiến lên 10 giây"><svg class="!text-[20px] button-svg-img"><use href="#icnSvgFastForward"/></svg></button><button class="ap-controls ap-next-btn" title="Nghe chương sau"><svg class="!text-[30px] button-svg-img"><use href="#icnSvgSkipNext"/></svg></button></div><div class="ap-sub-panel ap--track"><div class="ap-info"><div class="ap-title-time"><div class="ap-title"></div><div class="ap-time"><span class="ap-time--remains">0:00 / 0:00</span></div></div><div class="ap-progress-container"><div class="ap-progress"><div class="ap-progress-bar" style="width:10%"></div><div class="ap-progress-preload-bar" style="width:100%"></div></div></div><canvas class="ap-buffer-bar"></canvas></div></div><div class="ap-sub-panel ap--settings"><div class="ap-controls ap-volume-container"><button class="ap-controls ap-volume-btn"><svg class="!text-[15px] button-svg-img"><use href="#icnSvgVolumeOn" class="ap--volume-on"/><use href="#icnSvgVolumeOff" class="ap--volume-off"/></svg></button><div class="ap-volume"><div class="ap-volume-progress"><div class="ap-volume-bar" style="height:70px"></div></div></div></div><div class="ap-controls ap-speed-container"><span class="ap-change-speed-buttons"><button class="ap-speed-decrease-speed" title="Giảm tốc độ phát"><svg class="!text-[15px] button-svg-img"><use href="#icnSvgMinusSign"/></svg></button><button class="ap-speed-increase-speed" title="Tăng tốc độ phát"><svg class="!text-[15px] button-svg-img"><use href="#icnSvgPlusSign"/></svg></button></span><select class="ap-speed-option-select" title="Chọn tốc độ phát"></select></div></div></div></div></div><div class="flex-container"><div><div id="elmPlayingTime"><div class="plt-time"></div><div class="plt-slash">/</div><div class="plt-duration"></div></div><div name="HourglassSpining"><svg class="!text-[30px] button-svg-img animate-spin"><use href="#icnSvgHourGlass"/></svg><span class="loading-text-loader"></span></div></div><div name="divCtnAudioControl" class="flex-button-container"><div class="control-button-flex" name="divOtherControlTop"><button onclick="utilityHandles.togglePlaylistExtraTitles()" name="togglePlaylistExtraTitles" data-tooltip="Ẩn/hiện tiêu đề phụ cho danh mục chương sách."><svg class="!text-[20px] button-svg-img"><use href="#icnSvgToggleExtraTitlesBtn"/></svg></button><button onclick="utilityHandles.gotoPlayingChapter()" data-tooltip="Đến chương đang phát"><svg class="!text-[20px] button-svg-img rotate-90"><use href="#icnSvgJump2PlayingChap"/></svg></button><div class="havingShortPopup"><button onclick="utilityHandles.showSeekAudioDurationPopup()" data-tooltip="Chọn thời gian nghe"><svg class="!text-[28px] button-svg-img"><use href="#icnSvgRunJumping"/></svg></button><div id="seekDurationDivPopup" class="shortPoup"><label for="ipAudioDuration"></label><input id="ipAudioDuration" type="text" inputmode="text" maxlength="10" pattern="" placeholder="Nhập thời gian"><span class="checkInputValidity"></span></div></div></div><div class="control-button-flex" name="divHistoryControlTop"><div class="havingShortPopup"><button onclick="utilityHandles.showSleepTimerPopup()" data-tooltip="Hẹn giờ tắt Audio (nút sẽ chuyển sang màu đỏ).&#xa– Nhập 0 hoặc để trắng: Tắt hẹn giờ (nút hẹn giờ chuyển về màu đen).&#xa– Nhập -1 để audio tự tắt khi phát hết chương sách hiện tại."><svg class="!text-[28px] button-svg-img"><use href="#icnSvgSleepTimer"/></svg></button><div id="sleepTimerDivPopup" class="shortPoup SleepTimer"><label for="ipSleepTimer"></label><datalist id="sleepTimersDatalist"></datalist><input id="ipSleepTimer" placeholder="⏲ Hẹn giờ tắt" maxlength="10" list="sleepTimersDatalist"><span class="checkInputValidity"></span></div></div><select id="selBookGroup" title="Đổi cách nhóm thứ tự các truyện"></select><button onclick="ssData.setting.openSettingModal()"><svg class="!text-[30px] button-svg-img"><use href="#icnSvgSetting"/></svg></button></div><div class="control-button-flex" name="divHistoryControlTop"><button id="elmHistoryGoBackward" onclick="historyCls.historyGo(-1)" title="Lịch sử nghe: Sách ngay trước" data-tooltip-location="bottom"><svg class="!text-[30px] rotate-180 button-svg-img"><use href="#icnSvgHistoryForward"/></svg></button><button id="elmHistoryGoForward" onclick="historyCls.historyGo(1)" title="Lịch sử nghe: Sách tiếp theo" data-tooltip-location="bottom"><svg class="!text-[30px] button-svg-img"><use href="#icnSvgHistoryForward"/></svg></button></div><div class="control-button-flex" name="divChapterGroupControls"><span><input id="allChapGrpChkbox" type="checkbox" checked="checked" class="!text-[25px]" role="switch" title="Đóng/mở tất cả các chapter group">&emsp13;<label for="allChapGrpChkbox" data-tooltip="Đóng/mở tất cả các chapter group" data-tooltip-location="bottom">Nhóm chương</label></span></div></div></div><div name="divCtnMiddle" class="flex-container"><div><div><img id="elmArtwork"></div><svg class="noInternetImg elm-hidden"><use href="#svgIconNoInternetConnection"/></svg><div class="control-button-flex elm-hidden"><svg class="!text-[25px] button-svg-img"><use href="#icnSvgSleepTimer"/></svg><span id="elmSleepTimerCountDown">00:00</span></div><div id="elmBookTotalDuration" xrole="containing-tooltip"><svg class="svg-img-infor" style="margin-right:4px"><use href="#icnSvgDuration"/></svg><span data-tooltip="Tổng thời gian cả cuốn sách">00:00:00</span><svg class="svg-img-infor"><use href="#icnSvgListenTime"/></svg><span data-tooltip="Thời gian thực tế nghe cả cuốn sách với tốc độ phát hiện tại" role="listeningTime">00:00:00</span></div><div class="control-button-flex" style="color:#29689e" name="divCtnAudioControlExtraBig"><button onclick="xAudio.currentTime-=20" class="ap-rewind-btn" title="Lùi lại 20 giây"><svg class="!text-[50px] rotate-180 button-svg-img"><use href="#icnSvgFastForward"/></svg></button><button title="Phát/Dừng truyện"><svg class="!text-[80px] button-svg-img"><use href="#icnSvgPlay" svg-icon-name="PlayPauseIcon"/></svg></button><button onclick="xAudio.currentTime+=20" class="ap-fastforward-btn" title="Tiến lên 20 giây"><svg class="!text-[50px] button-svg-img"><use href="#icnSvgFastForward"/></svg></button></div></div><div name="elmPlaylistCtn"><div name="sdd-ChaptersListDropdown-container"></div><ol id="elmPlaylist" class="radial-background niceScrollBar"></ol></div></div><div name="divCtnBottom"><details ontoggle="if(this.open) setTimeout(_ => reposTooltips(document.getElementById('elmBookInfo')), 500); this.removeAttribute('ontoggle')"><summary><span id="elmBookTitle"></span></summary></details><div id="elmBookInfo" class="detailContent"></div></div></div>

<script>
"use strict";
class DBFiles{static LMODE=Object.freeze({noShow:0,freshLoad:1,cacheLoad:2});static loadJS=function createLoadJS(){var _loadJsInternalCache={};var head=document.getElementsByTagName("head")[0]||document.documentElement;const _WATERMARK="Chinhvtr";function getExternalScript(url,byUrlOrId=true){if(!url)return null;if(byUrlOrId)url=url.split("?")[0];const _queryStr=byUrlOrId?"script[src^='"+url+"']":"script[id='"+url+"']";const _scripts=document.querySelectorAll(_queryStr);let _foundScript=null;_scripts.forEach(_script=>{if(!_foundScript&&_script.watermark!==_WATERMARK){console.warn("loadJS: found external script (one that not loaded by loadJs) with "+(byUrlOrId?"url":"id")+":",url);_foundScript=_script}});return _foundScript}function appendScriptByText(head,script){head.appendChild(script);return Promise.resolve(script)}function appendScriptByUrl(head,script){return new Promise(function(resolve,reject){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!script.readyState||script.readyState==="loaded"||script.readyState==="complete")){done=true;script.onload=script.onreadystatechange=null;resolve(script)}};script.onerror=reject;head.appendChild(script)})}function createScriptElem(options){var script=document.createElement("script");script.charset=options.charset||"utf-8";script.type=options.type||"text/javascript";script["async"]=!!options["async"];script.id=options.id;script.extAttr=options.extAttr||{};script.watermark=_WATERMARK;script.timestamp=(new Date).toLocaleString();const _DEF_VERSION=Math.round(performance.now());let _dbUrl=options.url;const _versReg=_dbUrl.match(/v\=(\d+)/);if(_versReg){let _version=parseInt(_versReg[1]);if(isNaN(_version))_version=_DEF_VERSION;if(options.freshLoad)_dbUrl=_dbUrl.replace(_versReg[0],"v="+ ++_version)}else _dbUrl+=(_dbUrl.indexOf("?")>-1?"":"?")+"v="+_DEF_VERSION;script.urlVersion=options.url=_dbUrl;if(options.url){script.src=options.url}if(options.text){script.text=options.text}return script}function exec(options){if(typeof options==="string"){options={url:options}}const _DEFAULT_OPTIONS={cacheEnable:true,allowExternal:false,allowReload:false,freshLoad:false,removeMarkup:true,debug:false};options=Object.assign({},_DEFAULT_OPTIONS,options);if(options.freshLoad)options.allowReload=true;let _scriptId=options.id||options.url.split("?")[0].hashCode();options.id=_scriptId;let _cachedScriptEntry=_loadJsInternalCache[_scriptId];if(_cachedScriptEntry){if(!!options.debug){console.warn("loadJS: Script hit - this script has been loaded by loadJS in current page session. id:",_scriptId,"; url:",options.url)}if(!options.allowReload)return _cachedScriptEntry}else if(options.allowExternal){let el=getExternalScript(options.url);if(el){let promise=Promise.resolve(el);if(_scriptId){_loadJsInternalCache[_scriptId]=promise}return promise}}if(!options.url&&!options.text){throw new Error("load-js: must provide a url or text to load")}const _scriptElem=createScriptElem(options);var pendingPromise=(options.url?appendScriptByUrl:appendScriptByText)(head,_scriptElem);if(options.removeMarkup!==false)pendingPromise["finally"](_=>{_scriptElem.remove()});if(_scriptId&&options.cacheEnable!==false){_loadJsInternalCache[_scriptId]=pendingPromise}return pendingPromise}return function load(items){return items instanceof Array?Promise.allSettled(items.map(exec)):exec(items)}}();static deployDB(_jsDBName,_loadMode){const bookKitVars=[];this.name=_jsDBName;for(const key of Object.getOwnPropertyNames(this)){if(key.match(/\_Data$/)&&typeof this[key]=="object"){bookKitVars.push(key)}}const _newJsDBFile={dbName:this.name,dbs:bookKitVars,loadMode:_loadMode};const _jsDBFileIdx=ssData.jsDBFiles.findIndex(_dbFile=>_dbFile.dbName==_jsDBName);if(_jsDBFileIdx==-1)ssData.jsDBFiles.push(_newJsDBFile);else ssData.jsDBFiles.splice(_jsDBFileIdx,1,_newJsDBFile)}static checkDBFilesEdition(_ivkFrom){const _DEF_DB_EDITION=100;let _DBsHasNewEdition=[];let _DBsLoadedVeryFirstTimeCounter=0;xDBFilesCfg.toLoad.forEach((_dbItem,i)=>{let _latestDbEdition=_DEF_DB_EDITION;if(_DEFAULT_CFG?.cDBFilesEdt?.edt??false){_latestDbEdition=i<_DEFAULT_CFG.cDBFilesEdt.edt.length?_DEFAULT_CFG.cDBFilesEdt.edt[i]:_DEF_DB_EDITION}if(!_dbItem.hasOwnProperty("edt")||_dbItem.edt<_latestDbEdition){if(!_dbItem.hasOwnProperty("edt"))_DBsLoadedVeryFirstTimeCounter++;_dbItem.edt=_latestDbEdition;_DBsHasNewEdition.push(_dbItem.dbName)}});return _DBsHasNewEdition.length>0?{DBsHasNewEdition:_DBsHasNewEdition,noDBsBefore:_DBsLoadedVeryFirstTimeCounter==_DBsHasNewEdition.length}:null}static importDBfromFiles(_ivkFrom,_promiseCB,_allSettleCB){let toLoadArr=xDBFilesCfg.toLoad;let _newEditionDBs=DBFiles.checkDBFilesEdition(0);let _DBsHasNewEdition=[];if(_newEditionDBs){const _newDBNotifyMsg=_DBarray=>{let _msg="";if(_DBarray.length>0)_msg=(_msg==""?"":"<br>")+`${_DBarray.length>1?"Các ":""}CSDL ${_DBarray.map(t=>"<mark style='color:red;font-weight:bold'>"+t+"</mark>").join(", ")} có phiên bản mới`;return _msg};let _msg="";let _toastCallback=_=>{};_DBsHasNewEdition=_newEditionDBs.DBsHasNewEdition;if(_newEditionDBs.noDBsBefore){if(_ivkFrom==0)_msg="Sử dụng app lần đầu tiên hoặc dữ liệu lưu của các phiên làm việc trước của app đã bị xóa sạch!"}else{const _DBloadHide=_DBsHasNewEdition.filter(_dbName=>toLoadArr.find(_dbItem=>_dbItem.dbName==_dbName).loadMode==DBFiles.LMODE.noShow);const _DBloadShow=_DBsHasNewEdition.filter(_dbName=>!_DBloadHide.includes(_dbName));if(_DBloadShow.length>0){let _localMsg=_newDBNotifyMsg(_DBloadShow);if(_localMsg!="")_msg+=_localMsg+", đã được App tự động "+(_ivkFrom==0?"cập nhật.":"tải xuống (Dữ liệu mới chỉ cập nhật khi nạp lại trang Web.).")}if(_DBloadHide.length>0){let _localMsg=_newDBNotifyMsg(_DBloadHide);if(_localMsg!="")_msg+=(_msg==""?"":"<br>")+_localMsg+", đã được App tự động cập nhật nhưng đang ở chế độ ẩn."}if(_DBloadHide.length<_DBsHasNewEdition.length&&_ivkFrom==1)_toastCallback=_=>{if(confirm("CSDL có phiên bản mới. Cần nạp lại trang Web để cập nhật dữ liệu mới.\n\n Sẽ chỉ mất vài giây. Bạn có muốn nạp lại trang Web ngay bây giờ?"))window.location.reload(true)}}if(toast&&_ivkFrom==1)toast.showToast(_msg,toast.ToastType.Infor,{duration:15e3,cbEnd:_toastCallback});else ssData.delayedNotification.push({msg:_msg,option:{duration:15e3}})}const _newDBcheck=_dbItem=>{if(_DBsHasNewEdition.length==0)return false;return Boolean(_DBsHasNewEdition.find(_dbName=>_dbItem.dbName==_dbName))};const _filterFnc=_dbItem=>{if(_ivkFrom==0){return _dbItem.loadMode!=DBFiles.LMODE.noShow||_newDBcheck(_dbItem)}else{return _newDBcheck(_dbItem)}};let _jsDataFiles=toLoadArr.filter(_dbItem=>_filterFnc(_dbItem)).map(_dbItem=>({url:_dbItem.dbUrl,freshLoad:_dbItem.loadMode==DBFiles.LMODE.freshLoad||_newDBcheck(_dbItem),extAttr:{jsDBName:_dbItem.dbName,loadMode:_dbItem.loadMode}}));DBFiles.loadJS(_jsDataFiles).then(_res=>{_res.forEach(_prom=>{if(_prom.status==="fulfilled"){const _scriptElm=_prom.value;const _extAttr=_scriptElm.extAttr;const _jsDBName=_extAttr.jsDBName;const _dbFileCfgItm=xDBFilesCfg.toLoad.find(_item=>_item.dbName==_jsDBName);if(!_dbFileCfgItm)return console.log("importDBfromFiles(): somehow there is a database script element that not found in xDBFilesCfg.toLoad");_dbFileCfgItm.failCount=0;_dbFileCfgItm.dbUrl=_scriptElm.urlVersion;if(_dbFileCfgItm.loadMode==DBFiles.LMODE.noShow){}else{if(_dbFileCfgItm.loadMode==DBFiles.LMODE.freshLoad){_dbFileCfgItm.loadMode=DBFiles.LMODE.cacheLoad;console.warn(`importDBfromFiles(): Database file ${_dbFileCfgItm.dbUrl} has change loadMode from 1 to 2 (Load from Browser's Cache on next session)`)}}if("function"==typeof _promiseCB){if(_ivkFrom==0)_promiseCB(_scriptElm);if(_ivkFrom==1)_promiseCB(_scriptElm)}}else if(_prom.status==="rejected"){const _scriptElm=_prom.reason.target;const _jsDBName=_scriptElm.extAttr.jsDBName;const _dbFileCfgItm=xDBFilesCfg.toLoad.find(_item=>_item.dbName==_jsDBName);if(_dbFileCfgItm){_dbFileCfgItm.loadMode=DBFiles.LMODE.noShow;if(typeof _dbFileCfgItm.failCount=="number")_dbFileCfgItm.failCount++;else _dbFileCfgItm.failCount=1;console.log(`Database file ${_dbFileCfgItm.dbUrl} has change loadMode to 0 (No show on next session)`)}}});if("function"==typeof _allSettleCB)_allSettleCB()});return _DBsHasNewEdition}}function loadPage(){DBFiles.loadJS("config.js").then(_ret=>{function getFromStorage(_storageName){let resState=localStorage.getItem(_storageName);if(resState!=null){try{resState=JSON.parse(resState)}catch(e){resState=null}}return resState}xState=getFromStorage("xState")??structuredClone(_DEFAULT_CFG.xState);xState=Object.assign({},_DEFAULT_CFG.xState,xState);if(!xState.hasOwnProperty("history"))xState.history=structuredClone(_DEFAULT_CFG.xState.history);xState.history=Object.assign({},_DEFAULT_CFG.xState.history,xState.history);xDBFilesCfg=getFromStorage("xDBFilesCfg")??structuredClone(_DEFAULT_CFG.xDBFilesCfg);if(!xState.hasOwnProperty("toastCfg"))xState.toastCfg={};xDBFilesCfg=Object.assign({},_DEFAULT_CFG.xDBFilesCfg,xDBFilesCfg);ssData.lastDBCheck=Date.now();if(!ssData.hasOwnProperty("delayedNotification"))ssData.delayedNotification=[];xDBFilesCfg.len=_DEFAULT_CFG.xDBFilesCfg.len;if(!(xDBFilesCfg.toLoad instanceof Array))xDBFilesCfg.toLoad=[];let toLoadArr=xDBFilesCfg.toLoad;const _DEF_LOADMODE=DBFiles.LMODE.cacheLoad;const _DB_MAX_FAILCOUNT=10;const _DB_FILE_REFIX="data_";let _toLoadArrTemp=[...Array(xDBFilesCfg.len).keys()].map(i=>{return{fileNo:i,dbName:`${_DB_FILE_REFIX}${i}`,dbUrl:`${_DB_FILE_REFIX}${i}.js`,loadMode:_DEF_LOADMODE,failCount:0}});if(_toLoadArrTemp.length<toLoadArr.length){let _removedDBs="";for(let i=_toLoadArrTemp.length;i<toLoadArr.length;i++)_removedDBs+="<mark>"+toLoadArr[i].dbName+"</mark>";ssData.delayedNotification.push({msg:"Database "+_removedDBs+" bị loại khỏi app.",option:{duration:1e4}});toLoadArr.length=_toLoadArrTemp.length}const _pageLoadedFirstTime=toLoadArr.length==0;for(let i=0;i<_toLoadArrTemp.length;i++){const _toLoadItemTmp=_toLoadArrTemp[i];if(!toLoadArr.find(_item=>_item.fileNo==_toLoadItemTmp.fileNo)){toLoadArr.push(_toLoadItemTmp);if(!_pageLoadedFirstTime)ssData.delayedNotification.push({msg:"Có database <mark>"+_toLoadItemTmp.dbName+"</mark> mới được thêm vào app.",option:{duration:1e4}})}}if(toLoadArr.every(_lm=>_lm.loadMode==DBFiles.LMODE.noShow)){toLoadArr.find(_lm=>_lm.fileNo==0).loadMode=_DEF_LOADMODE}toLoadArr.forEach((_dbItem,i)=>{if(_dbItem.loadMode==DBFiles.LMODE.cacheLoad&&_dbItem.failCount>_DB_MAX_FAILCOUNT)_dbItem.loadMode=DBFiles.LMODE.noShow});ssData.jsDBFiles=[];const _promiseCB=_scriptElm=>{const _extAttr=_scriptElm.extAttr;const _jsDBName=_extAttr.jsDBName;const _dbFileCfgItm=xDBFilesCfg.toLoad.find(_item=>_item.dbName==_jsDBName);if(_dbFileCfgItm.loadMode>0)DBFiles.deployDB.call(window[_jsDBName],_jsDBName,_extAttr.loadMode);else window[_jsDBName]=undefined};DBFiles.importDBfromFiles(0,_promiseCB,init)})["catch"](err=>{console.error(err);alert("Không nạp được file config.js, trang Web không thể hoạt động.")})}String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})};String.prototype.hashCode=function(){let hash=0;if(this.length===0)return hash;for(let i=0;i<this.length;i++){hash=(hash<<5)-hash+this.charCodeAt(i)|0}return(hash>>>0).toString(36)};const pad=(n,width,z)=>String(n+"").padStart(width,z||"0");const makeBrk=m=>m?"["+m+"]":"";const int2Roman=num=>{const romanValues={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};let roman="";for(let key in romanValues){while(num>=romanValues[key]){roman+=key;num-=romanValues[key]}}return roman};const makeSvgFromSprite=(_spriteName,_options)=>{let _class="",_inlineStyle="",_title="";if(_options){if(_options["class"])_class=`class="${_options["class"]}"`;if(_options.style)_inlineStyle=`style="${_options.style}"`}return`<svg ${_class} ${_inlineStyle} ${_title}> <use href="#${_spriteName}"/> </svg>`};const getHostName=url=>{if(!url.trim())return"";let domain=new URL(url);let names=domain.hostname.split(".");names.splice(-1,1);if(names.length===0)return"Link";else{let hName="Link";if(["com","net","org","gov","edu","info"].includes(names.at(-1)))hName=names.at(-2)??"Link";else hName=names.at(-1);const _NamesMap={phatphapungdung:"PPƯD",phapthihoi:"PhápThíHội",dieuphapam:"DPA",tinhtong:"PhápHành",theravada:"Theravāda",thuvienanime:"Tóm tắt",audioaz:"AudioAZ",youtube:"YT",dropboxusercontent:"Dropbox",googleapis:"Google"};return _NamesMap[hName]??hName.toProperCase()}};const commaNum=x=>x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");const toSeconds=str=>{if(!str)return 0;let t=str.split(":").map(n=>{return isNaN(parseInt(n))?0:parseInt(n)});return t.reduce((r,elem)=>r*60+elem,0)};const toHhMmSs=(sec,_verbose=0)=>{if(isNaN(sec))return"00:00";sec=sec<<0;if(sec<0)sec=-sec;if(_verbose<2){const toMmSs=sec=>pad(~~(sec/60)%60,2)+":"+pad(sec%60,2);const mmss=sec%3600;if(_verbose==0)return(sec>=3600?commaNum(~~(sec/3600))+":":"")+toMmSs(mmss);if(_verbose==1){const d=~~(sec/86400),h=~~(sec/3600)%24;return[d===0?"":commaNum(d)+" ngày ⅋ ",h>0?h+":":"",toMmSs(mmss)].join("")}}if(_verbose==2)return Object.entries({"ngày":~~(sec/86400),"giờ":~~(sec/3600)%24,"phút":~~(sec/60)%60,"giây":sec%60}).filter(val=>val[1]!==0).map(([key,val])=>`${val} ${key}`).join(", ")};function getUrlVars(){let vars={};let parts=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){vars[key]=value});return vars}Element.prototype.css=function(attr){if(typeof attr==="string"){return getComputedStyle(this,"")[attr]}else if(typeof attr==="object"){for(let name in attr){if(this.style[name]!==undefined){this.style[name]=attr[name]}}}};Element.prototype.attr=function(attrName,attrVal){if(attrVal===undefined)return this.getAttribute("attr-"+attrName)||this.getAttribute(attrName);else{this.setAttribute("attr-"+attrName,attrVal)}};function setChkboxState(_chkBox,_state){if(_state===0){_chkBox.indeterminate=false;_chkBox.checked=false}else if(_state===1){_chkBox.indeterminate=false;_chkBox.checked=true}else _chkBox.indeterminate=true;_chkBox.dataset.stateVal=_state}let changeAudioSrc=_justReload=>{let _currBook=xAudio.getAttribute("attr-Book");let _currChap=parseInt(xAudio.getAttribute("attr-Chap"));let chapDataUrl=ssData.bookData.findBookFromId(_currBook).parts[_currChap-1].url;let elmMp3Links=document.getElementById("elmMp3Links");let cSrcIdx=-1,_audioSrc="";let _allMediaAnchors=elmMp3Links.querySelectorAll("li[role='audioSrc']> a");_allMediaAnchors.forEach((_anchor,_i)=>{if(_anchor.classList.contains("srcPlaying"))cSrcIdx=_i});if(cSrcIdx==-1){cSrcIdx=parseInt(xState.history.books[_currBook]["urlLine"]);if(isNaN(cSrcIdx)){cSrcIdx=xState.history.books[_currBook]["urlLine"]=0}if(chapDataUrl.length<=cSrcIdx)cSrcIdx=0}else{cSrcIdx=(cSrcIdx+1)%chapDataUrl.length;xState.history.books[_currBook]["urlLine"]=cSrcIdx}ssData.audioPlayer.loadSrc(chapDataUrl[cSrcIdx],_justReload??false);(function changePlayingMp3Style(cSrcIdx){let elmMp3Links=document.getElementById("elmMp3Links");elmMp3Links.querySelectorAll("a.srcPlaying").forEach(_=>{_.classList.remove("srcPlaying")});let _newMp3Anchor=elmMp3Links.querySelector("li[role='audioSrc']:nth-of-type("+(cSrcIdx+1)+") > a");if(_newMp3Anchor){let _mp3Link=_newMp3Anchor.getAttribute("href");let _linkHash=_mp3Link.hashCode();_newMp3Anchor.setAttribute("hash-code",_linkHash);_newMp3Anchor.classList.add("srcPlaying");if(!_newMp3Anchor.classList.contains("gotFileSize"))utilityHandles.getFileSize(_mp3Link,_msg=>{if(!_msg.success||document.querySelector("#elmMp3Links a.srcPlaying")?.getAttribute("hash-code")!=_linkHash)return;_newMp3Anchor.innerHTML+=` ${_msg.msg}`;_newMp3Anchor.classList.add("gotFileSize")})}})(cSrcIdx)};let Toast=function ToastObj(){function locateToastManually(toastElem){const BOTTOM_START=20,TOAST_GAP=10;toastElem.setAttribute("newToastAdded","");let _toastElems=document.querySelectorAll(".toast-element:not([newToastAdded])");toastElem.removeAttribute("newToastAdded");let _allToastSizes=[{cssBottom:BOTTOM_START-TOAST_GAP,txt:"Dummy Marking Toast",rect:{top:window.innerHeight-BOTTOM_START+TOAST_GAP,height:0}}];_toastElems.forEach(_elm=>{_allToastSizes.push({cssBottom:parseInt(_elm.style.bottom),txt:_elm.innerText,rect:_elm.getBoundingClientRect()})});_allToastSizes=_allToastSizes.sort((a,b)=>a.cssBottom-b.cssBottom);let _thisCSSBottom=BOTTOM_START;let _currHeight=toastElem.getBoundingClientRect().height;let calNextBottom=i=>{return _allToastSizes[i].cssBottom+_allToastSizes[i].rect.height+TOAST_GAP};if(_allToastSizes.length>1){for(let i=1;i<_allToastSizes.length;i++){let _prevTop=_allToastSizes[i-1].rect.top;let _nextBottom=_allToastSizes[i].rect.bottom;if(_prevTop-_nextBottom>_currHeight+TOAST_GAP){_thisCSSBottom=calNextBottom(i-1);break}if(i==_allToastSizes.length-1)_thisCSSBottom=calNextBottom(i)}}toastElem.style.bottom=_thisCSSBottom+"px"}function toastCounter(){return toastCounter.count++}toastCounter.count=0;let toastConfig=null;function getToastConfig(){return toastConfig}const toastChoices={modes:["manual-Bottom-Left","Top-Left","Top-Right","Bottom-Left","Bottom-Right"],modes_weighted:[1,2,2,2,20],themes:["toast-light-theme","toast-dark-theme","toast-color-theme","toast-mono-theme"],themes_weighted:[1,1,1,8],animations:["bounce--m","slide--m","elliptic--m","zoom","flip--i","swirl","slit--i"],posssibleAnimDirs:function(_animName,_location){let _regEx=_animName.match(/\-\-([mi]+)/);let _animTimeFnc=["ease-out","ease-in"];if(_animName.match(/^(bounce|zoom|flip)/))_animTimeFnc=["cubic-bezier(.68,-0.55,.4,1.6)","cubic-bezier(.68,-0.55,.26,1.35)"];if(!_regEx)return{anim:_animName,dir:null,animTimeFnc:_animTimeFnc};_animName=_animName.replace(_regEx[0],"");if(_regEx[1]=="m"){let _sides=_location?_location.split("-").slice(-2):[];_sides=_sides.map(_side=>_side.toProperCase());return{anim:_animName,dir:_sides.length==2?_sides:null,animTimeFnc:_animTimeFnc}}if(_regEx[1]=="i"){return{anim:_animName,dir:["Horz","Vert"],animTimeFnc:_animTimeFnc}}}};function weightedRandom(items,weights){if(items.length!==weights.length){throw new Error("Items and weights must be of the same size")}if(!items.length){throw new Error("Items must not be empty")}const cumulativeWeights=[];for(let i=0;i<weights.length;i+=1){cumulativeWeights[i]=weights[i]+(cumulativeWeights[i-1]||0)}const maxCumulativeWeight=cumulativeWeights[cumulativeWeights.length-1];const randomNumber=maxCumulativeWeight*Math.random();for(let itemIndex=0;itemIndex<items.length;itemIndex+=1){if(cumulativeWeights[itemIndex]>=randomNumber){return{item:items[itemIndex],index:itemIndex}}}}function setToastMode(){function getChoice(_choiceName,_testChoice){let _choiceArrayName=_choiceName+"s";let _choiceIdx=_testChoice??xState.toastCfg?.[_choiceName]??-1;if(_choiceIdx==-1)if(toastChoices.hasOwnProperty(_choiceArrayName+"_weighted"))_choiceIdx=weightedRandom(toastChoices[_choiceArrayName],toastChoices[_choiceArrayName+"_weighted"]).index;else _choiceIdx=Math.floor(Math.random()*toastChoices[_choiceArrayName].length);return[_choiceIdx,toastChoices[_choiceArrayName][_choiceIdx]]}const[_theme,_themeName]=getChoice("theme");const[_mode,_containerLocation]=getChoice("mode");let[_animMode,_animName]=getChoice("animation");toastConfig={mode:_mode,location:_containerLocation,theme:_theme,themeName:_themeName,animMode:_animMode};let _toastContainer=document.querySelector(`[name="toastContainer"][location="${_containerLocation}"]`);if(!_toastContainer){_toastContainer=document.createElement("DIV");_toastContainer.setAttribute("name","toastContainer");document.body.appendChild(_toastContainer)}_toastContainer.setAttribute("location",_containerLocation);let[_animDir,_animDirName]=[-1,""];let _possAnimDirs=toastChoices.posssibleAnimDirs(_animName,_containerLocation);_animName=_possAnimDirs.anim;let _animTimeFnc=_possAnimDirs.animTimeFnc;if(_possAnimDirs.dir!==null){toastChoices["animDirs"]=_possAnimDirs.dir;[_animDir,_animDirName]=getChoice("animDir")}if(_mode==0){[_animName,_animDir,_animDirName]=["slideManual",-1,""];_animTimeFnc[1]="cubic-bezier(.68,-0.55,.26,1.35)"}toastConfig["animName"]=_animName;toastConfig["animDir"]=_animDir;toastConfig["animDirName"]=_animDirName;toastConfig["animTimeFnc"]=_animTimeFnc}setToastMode();let depressToastFlag=false;function depressToast(flag){if(flag==undefined)return depressToastFlag;else depressToastFlag=flag}const ToastType=Object.freeze({Infor:"Infor",Success:"Success",Warning:"Warning",Error:"Error",Promise:"Promise"});function isBasicType(_toastType){return!(_toastType==ToastType.Promise)}function defaultDuration(_toastType){let _defaulDur=2e3;switch(_toastType){case ToastType.Success:_defaulDur=2e3;break;case ToastType.Infor:_defaulDur=3e3;break;case ToastType.Warning:_defaulDur=4e3;break;case ToastType.Error:case ToastType.Promise:_defaulDur=5e3;break;default:_defaulDur=2e3}return _defaulDur}const DEBUG=false;function makeToast(_msg,_toastType,options){_toastType=_toastType??ToastType.Infor;let _duration=Math.max(options?.duration??0,defaultDuration(_toastType));_duration+=2e3;const _PERSISTANCE=options?.persistance??false;const _inPhase=options?.["in"]??(options?.oldToastElem?false:true);const _outPhase=options?.out??isBasicType(_toastType);let toastElem=_inPhase?document.createElement("div"):options?.oldToastElem;if(_inPhase){toastElem.setAttribute("toast-no",toastCounter());if(_PERSISTANCE)toastElem.setAttribute("isPersistance",true);toastElem.classList.add(toastConfig.themeName)}else{toastElem.classList.forEach(_cls=>{if(_cls.indexOf("toast-type--")>-1)toastElem.classList.remove(_cls)});if(!document.contains(toastElem)){console.log("Toast has been removed");return}}toastElem.classList.add("toast-element",`toast-type--${_toastType}`);toastElem.innerHTML=` <div class="toast__icon">${makeSvgFromSprite("svgIconToast"+_toastType)}</div> <div class="toast__msg">${_msg}</div> <div class="toast-progress"></div> `;const ANIM_IN_DUR=500,ANIM_OUT_DUR=500;let _delay=_duration-ANIM_IN_DUR-ANIM_OUT_DUR;const _IN_ANIMATE=`Toastify__${toastConfig.animName}In${toastConfig.animDirName} ${ANIM_IN_DUR}ms ${toastConfig.animTimeFnc[0]}`,_OUT_ANIMATE_CLICK=`Toastify__${toastConfig.animName}Out${toastConfig.animDirName} ${ANIM_OUT_DUR}ms ${toastConfig.animTimeFnc[1]} forwards`,_OUT_ANIMATE=_OUT_ANIMATE_CLICK.replace(" forwards",` ${_delay}ms forwards`);if(toastConfig.mode==0){toastElem.classList.add("toast-manual");_inPhase&&document.body.appendChild(toastElem);if(_inPhase)locateToastManually(toastElem)}else{toastElem.classList.add("toast-auto");_inPhase&&document.querySelector(`[name="toastContainer"][location="${toastConfig.location}"]`).appendChild(toastElem)}let _animationStr="";if(_inPhase){_animationStr=_IN_ANIMATE}if(_outPhase){if(!DEBUG)_animationStr+=(_animationStr==""?"":", ")+_OUT_ANIMATE}if(_animationStr)toastElem.style.animation=_animationStr;if(_inPhase)toastElem.addEventListener("click",evt=>{toastElem.getAnimations().forEach(_anim=>{_anim.finish()});toastElem.style.animation=_OUT_ANIMATE_CLICK;let _newAnmations=toastElem.getAnimations();if(Array.isArray(_newAnmations)&&_newAnmations.length>0)_newAnmations[0].play();setTimeout(function(){options.cbEnd&&options.cbEnd();if(toastElem)toastElem.remove();toastElem=null},ANIM_OUT_DUR+50);evt.stopPropagation()});let _progressBar=toastElem.querySelector(".toast-progress");_progressBar.classList.toggle("elm-hidden",!_outPhase);if(_outPhase&&!DEBUG){_progressBar.style.animation=`progress-keyframe ${_delay}ms linear forwards`;const autoRemoveTO=setTimeout(function(){toastElem.remove();toastElem=null;options.cbEnd&&options.cbEnd()},_duration);toastElem.addEventListener("click",()=>{clearTimeout(autoRemoveTO)})}if(_inPhase&&!_outPhase)return toastElem}function dismissAll(isExtensiveWipe){document.querySelectorAll(`.toast-element${isExtensiveWipe?"":":not([isPersistance])"}`).forEach(_toastElem=>_toastElem.click())}function showBasicToast(msg,toastType,options){if(depressToastFlag){depressToastFlag=false;return}if(document.hidden)return;makeToast(msg,toastType,{duration:options?.duration??2e3,persistance:options?.persistance??false,out:true,cbEnd:options?.cbEnd})}function showDelayedToast(){if(!ssData.delayedNotification||ssData.delayedNotification.length===0){return}ssData.delayedNotification.forEach(_msg=>{showBasicToast(_msg.msg,ToastType.Infor,{duration:_msg.option.duration,persistance:true,cbEnd:_msg.option.cbEnd})});ssData.delayedNotification.length=0}class ChainToasts{_localToastElem=null;constructor(msg,toastType,options){if(depressToastFlag){depressToastFlag=false;this._localToastElem=null;return}if(document.hidden){this._localToastElem=null;return}this._localToastElem=makeToast(msg,toastType??ToastType.Promise,{persistance:options?.persistance??false})}showNextToast(msg,toastType){if(!this._localToastElem||!document.contains(this._localToastElem))return;makeToast(msg,toastType??ToastType.Promise,{oldToastElem:this._localToastElem,"in":false,out:false})}checkoutToast(msg,toastType){if(!this._localToastElem||!document.contains(this._localToastElem))return;makeToast(msg,toastType??ToastType.Success,{oldToastElem:this._localToastElem,"in":false,out:true});this._localToastElem=null}}function promise(_promise,options){let toastElem=makeToast(options.pending,ToastType.Promise,{persistance:options?.persistance??false,out:false});_promise.then(_=>{document.contains(toastElem)&&makeToast(options.success,ToastType.Success,{oldToastElem:toastElem,"in":false,out:true})})["catch"](_err=>{document.contains(toastElem)&&makeToast(makeBrk(_err.message)+" "+options.error,ToastType.Error,{oldToastElem:toastElem,"in":false,out:true})})}return{depressToast:depressToast,ToastType:ToastType,toastChoices:toastChoices,getToastConfig:getToastConfig,setToastMode:setToastMode,showToast:showBasicToast,showDelayedToast:showDelayedToast,ChainToasts:ChainToasts,promise:promise,dismissAll:dismissAll}};function reposTooltips(parentElem,options){let _container=options?.container??document.querySelector('[name="divContainer"]');let _containerPos=_container.getBoundingClientRect();function calculateTooltipPos(_ttElem){let _ttPos=_ttElem.getBoundingClientRect();if(_ttPos.width==0)return;let fixSmallPopup=options?.fixSmallPopup??false;let _ttBeforePos=!fixSmallPopup?getComputedStyle(_ttElem,"::before"):_ttElem.nextElementSibling.getBoundingClientRect();let _ttLocation=_ttElem.getAttribute("data-tooltip-location");if(["left","right","bottom"].indexOf(_ttLocation)===-1)_ttLocation="top";if(_ttLocation=="top"||_ttLocation=="bottom"||fixSmallPopup){let _ttBeforeWidth=!fixSmallPopup?parseFloat(_ttBeforePos.getPropertyValue("Width")):_ttBeforePos.width;let _ttBeforeInitalLeft=_ttPos.left+_ttPos.width/2;let _ttBeforeTX50Left=_ttBeforeInitalLeft-_ttBeforeWidth/2;let _ttBeforeTX50Right=_ttBeforeInitalLeft+_ttBeforeWidth/2;let _elemToFix=!fixSmallPopup?_ttElem:_ttElem.nextElementSibling;if(fixSmallPopup)_elemToFix.style.setProperty("--data-translateX-pseudo-after",`${_ttPos.left+_ttPos.width/2-19}px`);if(_ttBeforeTX50Left<_containerPos.left){_elemToFix.style.setProperty("--data-translateX",`-${_ttBeforeInitalLeft-_containerPos.left-5}px`)}else if(_ttBeforeTX50Right>_containerPos.right){_elemToFix.style.setProperty("--data-translateX",`-${_ttBeforeInitalLeft+_ttBeforeWidth-_containerPos.right+5}px`)}else{_elemToFix.style.removeProperty("--data-translateX");_elemToFix.style.removeProperty("--data-translateX-pseudo-after")}}}if(parentElem)parentElem.querySelectorAll("[data-tooltip]").forEach(_ttElem=>{calculateTooltipPos(_ttElem)});if(options?.selfElem)calculateTooltipPos(options.selfElem)}function reposAllTooltips(){reposTooltips(document.querySelector('[name="divCtnAudioControl"]'));reposTooltips(document.getElementById("elmBookTotalDuration"));document.querySelectorAll(".havingShortPopup > button").forEach(_elem=>reposTooltips(null,{selfElem:_elem,fixSmallPopup:true}));reposTooltips(document.getElementById("elmBookInfo"));reposTooltips(document.getElementById("elmChapterInfor"))}function BookData(){const xBookGrp=ssData.xBookGrp;let xData=ssData.xData;const findBookFromId=bookId=>{const _bIdx=ssData.bIds.indexOf(bookId);return bookId==-1?null:ssData.xData[_bIdx]};const statisticsHTML=(_statsData,_forceTextLeft=false)=>{const _class=_forceTextLeft?"class='forceTextLeft'":"";return`<span ${_class}>${makeSvgFromSprite("icnSvgChapters",{"class":"svg-img-infor"})}<var data-rAlignGroup="chapsCount">${_statsData.chaptersCount}</var> ${makeSvgFromSprite("icnSvgDuration",{"class":"svg-img-infor"})}<var data-rAlignGroup="bDuration">${toHhMmSs(_statsData.totalDur)}</var> ${makeSvgFromSprite("icnSvgListenTime",{"class":"svg-img-infor"})}<var data-rAlignGroup="bListenTime" style="font-size:inherit" attr-duration="${_statsData.totalDur}">${toHhMmSs(_statsData.totalDur/xState.speed)}</var></span>`};function calculateBookKitRank(_grpLine){let _bookGrps=xBookGrp[_grpLine].grp;const bookKitInfor=ssData.bookKitInfor;for(let i=0;i<bookKitInfor.length;i++){let bkInforItemRank=bookKitInfor[i].grpRanks;if(!bkInforItemRank||!Array.isArray(bkInforItemRank))bookKitInfor[i].grpRanks=new Array(xBookGrp.length).fill(-1)}let _tempRank=bookKitInfor.map(_it=>{return{bkId:_it.bkIdx,count:0,rank:0}});for(let i=0;i<_bookGrps.length;i++){let _bkFather=_bookGrps[i].bookKit;_tempRank[_bkFather].count++;_tempRank[_bkFather].rank+=i}_tempRank.forEach(_it=>_it.rank=(_it.rank/_it.count).toFixed(2));_tempRank.sort((a,b)=>a.rank-b.rank);for(let i=0;i<_tempRank.length;i++){let _tempItem=_tempRank[i];bookKitInfor[_tempItem.bkId].grpRanks[_grpLine]={bsCount:_tempItem.count,rank:i,bsHidden:0}}}function prepareData(){let _idx=0,_xData=[];let dataSize=[{idx:0,name:"",eName:""}];ssData.jsDBFiles.filter(_dbFile=>_dbFile.loadMode>0).forEach(_dbFile=>{const _dbFileName=_dbFile.dbName;_dbFile.dbs.forEach(_db=>{const _CnstData=window[_dbFileName][_db];if(!_CnstData)return;for(let i=0;i<xBookGrp.length;i++){xBookGrp[i].grp=xBookGrp[i].grp.concat(_CnstData.meta.bookGrp[i])}_CnstData.books.forEach((_book,i)=>_book.dbPath={file:_dbFileName,bookKit:_db,idx:i});_xData=_xData.concat(_CnstData.books);_idx+=_CnstData.books.length;dataSize.push({idx:_idx,name:_CnstData.meta.name,eName:_CnstData.meta.eName})})});ssData.xData=_xData;ssData.bIds=ssData.xData.map(_book=>_book.bookId);ssData._MIN_TAP_SIZE=5;let bookGrpWay=0;let _bookGrpItems=xBookGrp[bookGrpWay].grp;let bkInfor=[];for(let i=0;i<_xData.length;i++){let _grpIds=_xData[i].grp[bookGrpWay].split("$");let _bookGrpItm=_bookGrpItems.find(m=>m.gId=="$"+_grpIds[1]);if(!_bookGrpItm){toast.showToast(`Book '${_xData[i].title}' has wrong group config at line '${bookGrpWay}'. Group '${_grpIds[1]}' in '${_xData[i].grp[bookGrpWay]}' not found on meta.bookGrp`,toast.ToastType.Error,{duration:6e4,persistance:true});continue}if(!_bookGrpItm.books)_bookGrpItm.books=[];let _bkIdx=dataSize.findIndex((_currVar,_idx)=>{return _idx==dataSize.length-1?_currVar.idx>=i:_currVar.idx<=i&&dataSize[_idx+1].idx>i});if(_bkIdx>-1&&!bkInfor[_bkIdx])bkInfor[_bkIdx]={bkIdx:_bkIdx,startIdx:dataSize[_bkIdx].idx,endIdx:dataSize[_bkIdx+1].idx-1,label:dataSize[_bkIdx+1].name};if(!_bookGrpItm.hasOwnProperty("bookKit"))_bookGrpItm.bookKit=_bkIdx;let _bookItem=_bookGrpItm.books.find(m=>m.gbId==_grpIds[0]);if(_bookItem==undefined){_bookItem={};_bookGrpItm.books.push(_bookItem);_bookItem.gbId=_grpIds[0];_bookItem.bName=_xData[i].title;_bookItem.mc=_xData[i].mc;_bookItem.year=_xData[i].year;_bookItem.bList=[_xData[i].bookId]}else{_bookItem.bList.push(_xData[i].bookId)}}ssData["bookKitInfor"]=bkInfor;for(bookGrpWay=1;bookGrpWay<xBookGrp.length;bookGrpWay++){let _bookGrpItems=xBookGrp[bookGrpWay].grp;for(let i=0;i<_xData.length;i++){let _grpIds=_xData[i].grp[bookGrpWay];let _bookGrpItm=_bookGrpItems.find(m=>m.gId==_grpIds);if(!_bookGrpItm){toast.showToast(`Book '${_xData[i].title}' has wrong group config at line '${bookGrpWay}'. Group '${_xData[i].grp[bookGrpWay]}' not found on meta.bookGrp`,toast.ToastType.Error,{duration:6e4,persistance:true});continue}if(!_bookGrpItm.books)_bookGrpItm.books=[];let _bkIdx=dataSize.findIndex((_currVar,_idx)=>{return _idx==dataSize.length-1?_currVar.idx>=i:_currVar.idx<=i&&dataSize[_idx+1].idx>i});if(!_bookGrpItm.hasOwnProperty("bookKit"))_bookGrpItm.bookKit=_bkIdx;let _bookID=_xData[i].bookId;let _bookItem=_bookGrpItm.books.find(m=>m.bookId==_bookID);if(_bookItem==undefined){_bookItem={};_bookGrpItm.books.push(_bookItem);_bookItem.gbId=_bookID;_bookItem.bookId=_xData[i].bookId;_bookItem.bName=_xData[i].title;_bookItem.mc=_xData[i].mc;_bookItem.year=_xData[i].year;_bookItem.bList=[_bookID]}else _bookItem.bList.push(_xData[i].bookId)}}if(!xState.grpCfg)xState.grpCfg={};for(let i=0;i<xBookGrp.length;i++){if(xState.grpCfg[i]==undefined){xState.grpCfg[i]={grpLine:i,grpWay:xBookGrp[i].grpWay,grp:[]};let _bookGrpItems=xBookGrp[i].grp;for(let j=0;j<_bookGrpItems.length;j++){xState.grpCfg[i].grp.push({gId:_bookGrpItems[j].gId,label:_bookGrpItems[j].label,bHidden:false})}}else{let _bookGrpItems=xBookGrp[i].grp;let _xStateCfgs=xState.grpCfg[i].grp;if(!Array.isArray(_xStateCfgs)||_xStateCfgs.length==0)return;let _tmpArrSorted={};_xStateCfgs.forEach((_itm,_idx)=>_tmpArrSorted[_itm.gId]=[_idx,!!_itm.bHidden,false]);_bookGrpItems.forEach(_itm=>{if(_tmpArrSorted[_itm.gId]){_itm.bHidden=_tmpArrSorted[_itm.gId][1];_tmpArrSorted[_itm.gId][2]=true}else{_tmpArrSorted[_itm.gId]=[Number.MAX_SAFE_INTEGER,false];_xStateCfgs.push({gId:_itm.gId,label:_itm.label,bHidden:false})}});for(let i=_bookGrpItems.length-1;i>=0;i--){let _itm=_bookGrpItems[i];if(_itm.bookKit==undefined){const _errMsg=`The group named '${_itm.label}', gId='${_itm.gId}' in meta.bookGrp has no book belong to. FIXED IT NOWW`;_bookGrpItems.splice(i,1);console.error(_errMsg);toast.showToast(_errMsg,toast.ToastType.Error,{duration:6e4,persistance:true})}}const _removedItems=[];for(const _key in _tmpArrSorted){let _tmp=_tmpArrSorted[_key];if(!_tmp[2])_removedItems.push(_tmp[0])}_removedItems.sort((a,b)=>b-a);_removedItems.forEach(_idx=>_xStateCfgs.splice(_idx,1));_bookGrpItems.sort((_a,_b)=>{return _tmpArrSorted[_a.gId][0]-_tmpArrSorted[_b.gId][0]})}}for(let i=0;i<xBookGrp.length;i++){calculateBookKitRank(i)}}function popuGrpBookTitles(_currBookId,_repopulateSDD=false){function genGrpBookSddSetting(){const bookGrpWay=0;let _bookGrpItems=xBookGrp[bookGrpWay].grp;let gStt=1,kStt=1;let sddOptionData=[],sddOptGroup=[];for(let j=0;j<_bookGrpItems.length;j++){let bookGrpItem=_bookGrpItems[j];let hideThisGrp=bookGrpItem.bHidden;if(hideThisGrp){let _idx=-1;bookGrpItem.books.forEach(_bItem=>{_idx=Math.max(_idx,_bItem.bList.indexOf(_currBookId))});if(_idx===-1)continue}const _booksCount=bookGrpItem.books.reduce((bCount,_book)=>bCount+=_book.bList.length,0);sddOptGroup.push({stt:kStt,gId:bookGrpItem.gId,label:`${int2Roman(kStt++)}. ${bookGrpItem.label}`,subLabel:`${makeSvgFromSprite("icnSvgBookSets",{"class":"svg-img-infor",style:"color:inherit"})}${bookGrpItem.books.length}${_booksCount>bookGrpItem.books.length?" "+makeSvgFromSprite("icnSvgBooks",{"class":"svg-img-infor",style:"color:inherit"})+_booksCount:""}`,attr:{"attr-gId":bookGrpItem.gId}});for(let i=0;i<bookGrpItem.books.length;i++){let _book=bookGrpItem.books[i];if(hideThisGrp&&_book.bList.indexOf(_currBookId)===-1)continue;const _propCollect=_book.bList.reduce((_tmpArr,_bookId)=>{const _aBook=findBookFromId(_bookId);const _addProp=propName=>{if(_tmpArr[propName].indexOf(_aBook[propName])==-1)_tmpArr[propName].push(_aBook[propName])};_addProp("author");_addProp("mc");return _tmpArr},{author:[],mc:[]});const _bookKitStatistics=BookData.prototype.booksStatistics(_book.bList.map(_bookId=>ssData.bookData.findBookFromId(_bookId)));sddOptionData.push({stt:gStt++,gId:bookGrpItem.gId,value:_book.gbId,label:_book.bName,bookSetCount:_book.bList.length,year:_book.year,author:_propCollect.author,mc:_propCollect.mc,disabled:hideThisGrp,bkStatistics:_bookKitStatistics,attr:{"attr-book-array":JSON.stringify(_book.bList),"attr-gId":bookGrpItem.gId}})}}const addSpace=str=>{if(str.trim())return str.trim()+"&emsp13;";else return""};const listProp2Html=(propArray,_iconName)=>{return propArray.map(prop=>`${makeSvgFromSprite("icnSvg"+_iconName,{"class":"svg-img-infor "+_iconName})}${prop}`).join(" ")};return{displayOneLine:false,maxHeight:500,diacriticsFilterMode:xState?.bookTitlesDiacriticsSearch??true,searchBoxPlaceholder:"Tìm trong {_items_length} bộ sách ...",options:sddOptionData,optgroups:sddOptGroup,render:{option:function(data,escape){return`<div class="item-main-div">${data.disabled?"⚡&emsp13;":""}<span class="item-slight-details">${addSpace(makeBrk(data.year))}</span><span>${escape(data.label)}</span>${data.bookSetCount>1?" "+makeSvgFromSprite("icnSvgBooks",{"class":"svg-img-infor"})+data.bookSetCount:""}</div> <div class="item-2nd-main-div"> ${statisticsHTML(data.bkStatistics,true)} <span>${listProp2Html(data.author,"MaleAuthor")}</span>. <span>${listProp2Html(data.mc,"Microphone")}</span> </div>`},select_option:function(option,escape){return option.firstChild.innerHTML},optgroup_header:function(data,escape){return`${escape(data.label)}&emsp13;<span class="item-slight-details">${data.subLabel}</span>`},no_results:()=>{return"Không tìm thấy bộ sách nào"}},callbacks:{onChange:function(selectedItem){popuBooks2RadioButtons(selectedItem.value)},diacriticsFilterModeOnChanged:function(newDiacriticsSearchVal){xState.bookTitlesDiacriticsSearch=newDiacriticsSearchVal}}}}function popuBooks2RadioButtons(_groupId,_bookId){let elmInnerMcFlexCtn=document.getElementById("elmInnerMcFlexCtn");elmInnerMcFlexCtn.innerHTML="";const _foundItem=ssData.sddBookTitlesList.items.find(item=>item.value==_groupId);if(!_foundItem)return console.warn("popuBooks2RadioButtons: not found the item");let _bookIdsLst=JSON.parse(_foundItem.getAttribute("attr-book-array"));if(!_bookId){if(xState.bookLine==undefined)xState.bookLine=0;_bookId=_bookIdsLst[xState.bookLine>=_bookIdsLst.length?0:xState.bookLine]}const _booksLst=_bookIdsLst.map(_book_Id=>findBookFromId(_book_Id));const _uniqueAuthArray=[...new Set(_booksLst.map(_book=>_book.author))];const _fieldName=_uniqueAuthArray.length===_booksLst.length?"author":"mc";const _inputIdPrefix="SpeakerMC_book_";let _innerH=[];for(let i=0;i<_bookIdsLst.length;i++){const _book_Id=_bookIdsLst[i];_innerH.push(`<span><input type="radio" name="SpeakerMC" id="${_inputIdPrefix}${_book_Id}" bookId="${_book_Id}" data-bookLine="${i}"><label for="${_inputIdPrefix}${_book_Id}">${_booksLst[i][_fieldName]}</label></span>`)}elmInnerMcFlexCtn.innerHTML=_innerH.join("");document.getElementById("elmDivMcRadioCtn").style.display=_bookIdsLst.length>1?"block":"none";if(!elmInnerMcFlexCtn.hasAttribute("eventDelegation")){elmInnerMcFlexCtn.setAttribute("eventDelegation",true);elmInnerMcFlexCtn.addEventListener("click",function(evt){const _target=evt.target;if(_target.matches(`input[type="radio"][name="SpeakerMC"]`)){const _book_id=_target.getAttribute("bookId");const _currBook=xAudio.getAttribute("attr-book");if(_currBook&&_currBook==_book_id)return;changeBook(_book_id);if(this.querySelectorAll('input[type="radio"][name="SpeakerMC"]').length>1)xState.bookLine=parseInt(_target.dataset.bookline)}evt.stopPropagation()})}let _radioButton2Select=elmInnerMcFlexCtn.querySelector(`input[id='${_inputIdPrefix}${_bookId}']`);if(!_radioButton2Select)_radioButton2Select=elmInnerMcFlexCtn.querySelector(`input[id='${_inputIdPrefix}${_bookIdsLst[0]}']`);_radioButton2Select.click()}function findGroupIdForBook(_bookId){const _findGroupId=_bookId=>{let _foundGrpId=null;xBookGrp[0].grp.some(_bookKitItem=>{return _bookKitItem.books.some(_bookSetItem=>{if(_bookSetItem.bList.includes(_bookId)){_foundGrpId=_bookSetItem.gbId;return true}})});return _foundGrpId};let _groupId=_findGroupId(_bookId);if(!_groupId){_bookId=ssData.xData[0].bookId;_groupId=_findGroupId(_bookId)}return _groupId}const _groupId=findGroupIdForBook(_currBookId);if(_repopulateSDD){const _bookListSetting=genGrpBookSddSetting();ssData.sddBookTitlesList.loadDropdown(_bookListSetting,ssData.sddChaptersList.LOAD_MODE_ENUM.All,_groupId)}else{ssData.sddBookTitlesList.value=_groupId}popuBooks2RadioButtons(_groupId,_currBookId)}function popuBookTitles(_bookId,_bookGrpWay){if(_bookGrpWay==0){return}document.getElementById("elmDivMcRadioCtn").style.display="none";let xGrpLbl=xBookGrp[_bookGrpWay].grp,gStt=1,kStt=1;let sddOptionData=[],sddOptGroup=[];for(let j=0;j<xGrpLbl.length;j++){let bookGrpItem=xGrpLbl[j].books;let hideThisGrp=xGrpLbl[j].bHidden;let _idx=-1;if(hideThisGrp){bookGrpItem.forEach((_bItem,_idex)=>{if(_bItem.gbId==_bookId)_idx=_idex});if(_idx===-1)continue}sddOptGroup.push({stt:kStt,gId:xGrpLbl[j].gId,label:`${int2Roman(kStt++)}. ${xGrpLbl[j].label}`,subLabel:`${bookGrpItem.length}`});for(let i=0;i<bookGrpItem.length;i++){if(hideThisGrp&&_idx!=i)continue;const _book=findBookFromId(bookGrpItem[i].bookId);if(!_book.hasOwnProperty("statistics"))BookData.prototype.bookStatistics(_book);sddOptionData.push({stt:gStt++,gId:xGrpLbl[j].gId,value:_book.bookId,label:_book.title,year:_book.year,author:_book.author,mc:_book.mc,bStatistics:_book.statistics,disabled:hideThisGrp})}}const addSpace=str=>{if(str.trim())return str.trim()+"&emsp13;";else return""};const _bookListSetting={displayOneLine:false,diacriticsFilterMode:xState?.bookTitlesDiacriticsSearch??true,searchBoxPlaceholder:"Tìm trong {_items_length} quyển sách ...",options:sddOptionData,optgroups:sddOptGroup,render:{option:function(data,escape){return`<div class="item-main-div">${data.disabled?"⚡&emsp13;":""}<span class="item-slight-details">${addSpace(makeBrk(data.year))}</span><span>${escape(data.label)}${data.bStatistics.chapGroupsCount?" "+makeSvgFromSprite("icnSvgChapGroupIcon",{"class":"svg-img-infor"})+data.bStatistics.chapGroupsCount:""}</span></div> <div class="item-2nd-main-div"> ${statisticsHTML(data.bStatistics,true)} <span>${makeSvgFromSprite("icnSvgMaleAuthor",{"class":"svg-img-infor MaleAuthor"})}${data.author}</span> <span>${makeSvgFromSprite("icnSvgMicrophone",{"class":"svg-img-infor Microphone"})}${data.mc}</span> </div>`},select_option:function(option,escape){return option.firstChild.innerHTML},optgroup_header:function(data,escape){return`<span>${escape(data.label)}</span>&emsp13;<span class="item-slight-details">${makeSvgFromSprite("icnSvgBooks",{"class":"svg-img-infor",style:"color:inherit"})}${escape(data.subLabel)}</span>`},no_results:()=>{return"Không tìm thấy quyển sách nào"}},callbacks:{onChange:function(selectedItem){changeBook(selectedItem.value)},diacriticsFilterModeOnChanged:function(newDiacriticsSearchVal){xState.bookTitlesDiacriticsSearch=newDiacriticsSearchVal}}};ssData.sddBookTitlesList.loadDropdown(_bookListSetting,ssData.sddBookTitlesList.LOAD_MODE_ENUM.All,_bookId)}function goGetBook(_bookId,_bookGrpWay){if(_bookGrpWay==undefined)_bookGrpWay=xState.grpLine;if(_bookGrpWay==0){popuGrpBookTitles(_bookId,false)}else{ssData.sddBookTitlesList.value=_bookId;ssData.sddBookTitlesList.onchange()}}let selBookGroup=document.getElementById("selBookGroup");(function populate_selBookGroup(){let _defGrpLabels=xBookGrp.map(_=>{return _.grpWay});selBookGroup.innerHTML="";for(let i=0;i<_defGrpLabels.length;i++){let opt=document.createElement("option");opt.value=i;opt.innerHTML=makeBrk(pad(i+1,2))+" "+_defGrpLabels[i];selBookGroup.appendChild(opt)}})();selBookGroup.onchange=()=>{const newGrpIdx=xState.grpLine=parseInt(selBookGroup.value);let _currBookId=xAudio.getAttribute("attr-Book");if(!_currBookId)_currBookId=xState["lb"];if(newGrpIdx==0){popuGrpBookTitles(_currBookId,true)}else{popuBookTitles(_currBookId,newGrpIdx)}toast.showToast(xBookGrp[newGrpIdx].grpWay,null,{persistance:true});let _sel=document.createElement("select");_sel.css({"font-size":selBookGroup.css("font-size")});_sel.innerHTML="<option>"+pad(newGrpIdx+1,2)+"</option>";document.body.appendChild(_sel);selBookGroup.style.width=_sel.offsetWidth-2+"px";_sel.remove();if(ssData.sddBookTitlesList)ssData.sddBookTitlesList.glowing()};prepareData();BookData.prototype.generateWCLinks=function(_bookId){const isUrl=str=>{if(!str)return false;return str.match(/^https?\:\/\//)};const chapterWildCart=function(bData){let bParts=bData.parts;const wildCartStr=ssData.wildCartStr;let _subsetWC=null,_subsetCounter=0;let _wcLen=1;for(let i=0;i<bParts.length;i++){if(bParts[i].tit==undefined){if(_subsetWC&&_subsetCounter)bParts[i].tit=_subsetWC.replaceAll(wildCartStr,pad(_subsetCounter++,_wcLen))}else if(bParts[i].tit.includes(wildCartStr)){_subsetWC=bParts[i].tit;if(bParts[i].hasOwnProperty("titStartNum"))_subsetCounter=Number(bParts[i].titStartNum);else _subsetCounter=1;bParts[i].tit=_subsetWC.replaceAll(wildCartStr,pad(_subsetCounter++,_wcLen))}else{_subsetCounter++}}let _wcLinks=[];let _wcImg="",_wc_oUrl="";for(let i=0;i<bParts.length;i++){const chapData=bParts[i];if(chapData.wc&&chapData.wc.hasOwnProperty("url")){const _wcUrls=chapData.wc.url;if(_wcUrls.length==0)_wcLinks=[];else _wcUrls.forEach(_jUrl=>{const _oldIdx=_wcLinks.findIndex(_w=>_w.urlLine===_jUrl.urlLine);if(_oldIdx>-1)_wcLinks.splice(_oldIdx,1);if(!_jUrl.wcSrc)_jUrl.wcSrc=null;_wcLinks.push(_jUrl);if(!_jUrl.hasOwnProperty("startNum"))_jUrl.startNum=1})}if(Object.keys(_wcLinks).length>0){if(chapData.url===undefined)chapData.url=Array(_wcLinks.length).fill("");if(!Array.isArray(bParts[i].url))chapData.url=[chapData.url];let _chapUrls=chapData.url;for(let j=0;j<_wcLinks.length;j++){let urlLine=_wcLinks[j].urlLine;_wcLinks[j].startNum++;if(!_wcLinks[j].wcSrc&&!isUrl(_chapUrls[urlLine])){_chapUrls[urlLine]=null;continue}if(_chapUrls[urlLine]==null){continue}if(_chapUrls[urlLine]==""){_chapUrls[urlLine]=_wcLinks[j].wcSrc.replaceAll(wildCartStr,pad(_wcLinks[j].startNum-1,_wcLinks[j].nd));continue}if(!isUrl(_chapUrls[urlLine])){_chapUrls[urlLine]=_wcLinks[j].wcSrc.replaceAll(wildCartStr,_chapUrls[urlLine])}}for(let j=_wcLinks.length-1;j>=0;j--){let urlLine=_wcLinks[j].urlLine;if(_chapUrls[urlLine]==null){_chapUrls.splice(urlLine,1)}}}if(chapData.wc&&chapData.wc.hasOwnProperty("oUrl"))_wc_oUrl=chapData.wc.oUrl;if(_wc_oUrl&&isUrl(_wc_oUrl)){let _rplcUrl=chapData.oUrl||chapData.img;if(_rplcUrl)chapData.oUrl=_wc_oUrl.replace(wildCartStr,_rplcUrl)}if(chapData.wc&&chapData.wc.hasOwnProperty("img"))_wcImg=chapData.wc.img;if(_wcImg&&isUrl(_wcImg)){if(_wcImg.indexOf(wildCartStr)===-1){if(!isUrl(chapData.img))chapData.img=_wcImg}else{if(chapData.img&&!isUrl(chapData.img)){let _tmpSrc=_wcImg.replace(wildCartStr,chapData.img);if(_tmpSrc.match(/ytimg\.com\/vi/)){if(!chapData.hasOwnProperty("url"))chapData.url=[];else if(!Array.isArray(chapData.url))chapData.url=[chapData.url];const _convertedLink=`https://ph.tinhtong.vn/Home/GetAudioYoutube/${chapData.img}`;if(!chapData.url.includes(_convertedLink))chapData.url.push(_convertedLink);chapData.img=_tmpSrc.replace(/([^\/])+$/,"hq720.jpg")}else chapData.img=_tmpSrc}}}}};const bookWildCart=function(bData){const wildCartStr=ssData.wildCartStr;let bParts=bData.parts;if(bData.wc.tit){let _wc=bData.wc.tit;let _wcLen=1;for(let i=0;i<bParts.length;i++){if(bParts[i].tit==undefined)bParts[i].tit=_wc.replaceAll(wildCartStr,pad(i+1,_wcLen))+(i==bParts.length-1?" (Hết)":"")}}else{let _subsetWC=null,_subsetCounter=0;let _wcLen=1;for(let i=0;i<bParts.length;i++){if(bParts[i].tit==undefined){if(_subsetWC&&_subsetCounter)bParts[i].tit=_subsetWC.replaceAll(wildCartStr,pad(_subsetCounter++,_wcLen))}else if(bParts[i].tit.includes(wildCartStr)){_subsetWC=bParts[i].tit;_subsetCounter=1;bParts[i].tit=_subsetWC.replaceAll(wildCartStr,pad(_subsetCounter++,_wcLen))}else{_subsetWC=null;_subsetCounter=0}}}if(bData.wc.url){let _wc=bData.wc.url;let _wcLen=_wc.length;for(let i=0;i<bParts.length;i++){if(bParts[i].url===undefined)bParts[i].url=Array(_wcLen).fill("");if(!Array.isArray(bParts[i].url))bParts[i].url=[bParts[i].url];let _chapUrls=bParts[i].url;for(let j=0;j<_wc.length;j++){let urlLine=_wc[j].urlLine;if(_chapUrls[urlLine]==null){continue}if(_chapUrls[urlLine]==""){_chapUrls[urlLine]=_wc[j].wcSrc.replaceAll(wildCartStr,pad(i+1,_wc[j].nd));continue}if(!isUrl(_chapUrls[urlLine])){_chapUrls[urlLine]=_wc[j].wcSrc.replaceAll(wildCartStr,_chapUrls[urlLine])}}for(let j=_wc.length-1;j>=0;j--){let urlLine=_wc[j].urlLine;if(_chapUrls[urlLine]==null){_chapUrls.splice(urlLine,1)}}}}if(bData.wc.oUrl){let _wc2=bData.wc.oUrl;for(let i=0;i<bParts.length;i++){let _rplcUrl=bParts[i].oUrl||bParts[i].img;if(_rplcUrl==undefined)continue;if(_rplcUrl!==""&&!isUrl(_rplcUrl))bParts[i].oUrl=_wc2.replace(wildCartStr,_rplcUrl)}}if(bData.wc.img){let _wc1=bData.wc.img;for(let i=0;i<bParts.length;i++){if(bParts[i].img==undefined)continue;if(isUrl(bParts[i].img))continue;if(bParts[i].img!=""){let _tmpSrc=_wc1.replace(wildCartStr,bParts[i].img);if(_tmpSrc.match(/ytimg\.com\/vi/)){if(!bParts[i].hasOwnProperty("url"))bParts[i].url=[];else if(!Array.isArray(bParts[i].url))bParts[i].url=[bParts[i].url];const _convertedLink=`https://ph.tinhtong.vn/Home/GetAudioYoutube/${bParts[i].img}`;if(!bParts[i].url.includes(_convertedLink))bParts[i].url.push(_convertedLink);bParts[i].img=_tmpSrc.replace(/([^\/])+$/,"hq720.jpg")}else bParts[i].img=_tmpSrc}}}};let bData=findBookFromId(_bookId);if(bData.wcDone)return;bData.wcDone=true;if(bData.hasOwnProperty("autoTap")&&!bData.hasOwnProperty("tap")){const _TapSize=parseInt(bData["autoTap"]);if(isNaN(_TapSize)||_TapSize<ssData._MIN_TAP_SIZE)_TapSize=ssData._MIN_TAP_SIZE;let _tapArray=[],_datLen=bData.parts.length,_from=1,_grp=1;while(_from<_datLen){let _to=Math.min(_from+_TapSize-1,_datLen);if(_datLen-_to>0&&_datLen-_to<Math.floor(_TapSize/2))_to=_datLen;_tapArray.push({label:`Nhóm ${int2Roman(_grp++)}: Chương ${_from} đến chương ${_to}`,f:_from,t:_to});_from=_to+1}bData.tap=_tapArray}if(!bData.wc)return chapterWildCart(bData);else bookWildCart(bData)};BookData.prototype.bookStatistics=(bData,fromChap)=>{if(typeof bData=="string")bData=findBookFromId(bData);if(!bData)return{totalDur:0,chaptersCount:0};fromChap=fromChap??1;let totalDuration=0,chapterGroupCount=0;if(fromChap===1&&bData.hasOwnProperty("statistics")){totalDuration=bData.statistics.totalDur}else for(let i=fromChap;i<=bData.parts.length;i++){totalDuration+=toSeconds(bData.parts[i-1].dur)}if(fromChap===1&&!bData.hasOwnProperty("statistics")){const _chapsCount=bData.parts.length;bData.statistics={totalDur:totalDuration,chaptersCount:_chapsCount};if(bData.hasOwnProperty("tap")&&Array.isArray(bData.tap))bData.statistics.chapGroupsCount=bData.tap.length;else if(bData.hasOwnProperty("autoTap")){const _TapSize=parseInt(bData["autoTap"]);if(isNaN(_TapSize)||_TapSize<ssData._MIN_TAP_SIZE)_TapSize=ssData._MIN_TAP_SIZE;bData.statistics.chapGroupsCount=Math.floor(_chapsCount/_TapSize)+(_chapsCount%_TapSize>=ssData._MIN_TAP_SIZE?1:0)}}return{totalDur:totalDuration,chaptersCount:bData.statistics.chaptersCount-fromChap+1}};BookData.prototype.booksStatistics=books=>{return books.reduce((_accumulator,_book)=>{_accumulator.booksCount++;const _bSummary=BookData.prototype.bookStatistics(_book);_accumulator.chapGroupsCount+=_book.statistics.chapGroupsCount??0;_accumulator.chaptersCount+=_book.statistics.chaptersCount;_accumulator.totalDur+=_book.statistics.totalDur;return _accumulator},{totalDur:0,booksCount:0,chaptersCount:0,chapGroupsCount:0})};BookData.prototype.makeUniqueId=_=>{const rand=Math.random().toString(16).substr(2,8);if(ssData.bIds.indexOf(rand)==-1)return rand};BookData.prototype.checkDuplicateBookId=_=>{const duplicates=ssData.bIds.filter((item,index)=>ssData.bIds.indexOf(item)!==index);if(duplicates.length==0)toast.showToast("Không có bookId bị trùng");else{toast.showToast("Có bookId bị trùng. Xem trong cửa số Console về các mã bị trùng.",toast.ToastType.Error);console.log(duplicates)}};return{goGetBook:goGetBook,findBookFromId:findBookFromId,calculateBookKitRank:calculateBookKitRank}}let xState=null,xDBFilesCfg=null;let xAudio=document.getElementById("elmMyAudio");let elmPlaylist=document.getElementById("elmPlaylist");let toast=null;function init(){function webAPIinit(){ssData.playlistObserver=new IntersectionObserver((entries,observer)=>{let entry=entries[0];entry.target.classList.toggle("stickyPinned",entry.intersectionRatio<1&&entry.boundingClientRect.top<=entry.rootBounds.top)},{threshold:[1],root:elmPlaylist,rootMargin:"0px 0px -25px 0px"});ssData.ttMutationObserver=new MutationObserver((mutationList,observer)=>{for(const mutation of mutationList){if(mutation.type==="childList"){for(const addedNode of mutation.addedNodes){if(addedNode instanceof HTMLElement&&addedNode.getAttribute("xrole")==="containing-tooltip"){reposTooltips(addedNode);observer.disconnect()}}}else if(mutation.type==="attributes"){const target=mutation.target;if(target.getAttribute("name")=="divChapterGroupControls"&&!target.classList.contains("elm-hidden"))reposTooltips(target);if(target.hasAttribute("data-tooltip")){reposTooltips(null,{selfElem:target})}observer.disconnect()}}});let _resizeCount=0;let _mainContentContainer=document.querySelector('[name="divContainer"]');let resizeObserver=new ResizeObserver((entries,observer)=>{_resizeCount++;if(_resizeCount==2){reposAllTooltips();observer.unobserve(_mainContentContainer);observer=null}});resizeObserver.observe(_mainContentContainer)}webAPIinit();function pageEventHandlers(){document.addEventListener("visibilitychange",()=>{if(document.hidden){saveState2Disk()}else{ssData.audioPlayer&&ssData.audioPlayer.updateTime(true)}});const pageKeyDown=evt=>{const hotkeyOptions=[{task:"global_openBooksList",kCode:["KeyZ","ControlRight"],desc:"Mở danh sách các tựa sách.",callback:()=>{ssData.sddBookTitlesList.toggle();evt.preventDefault();evt.stopImmediatePropagation()}},{task:"global_openChaptersList",kCode:["KeyA","ShiftRight"],desc:"Mở danh sách các chương sách.",callback:()=>{ssData.sddChaptersList.toggle();evt.preventDefault();evt.stopImmediatePropagation()}},{task:"global_switchAudioSource",kCode:["Tab","KeyL"],desc:"Đổi phát chương bằng link dự phòng.",callback:()=>{const _switchSrcBtn=document.querySelector(".switchChapterAudioSrc");if(_switchSrcBtn)_switchSrcBtn.click();evt.preventDefault();evt.stopPropagation()}},{task:"global_scrollToPlayingChapter",kCode:["Home"],desc:"Cuộn tới chương đang được phát.",callback:()=>{utilityHandles.gotoPlayingChapter();evt.preventDefault();evt.stopPropagation()}},{task:"global_openSeeking2Time",kCode:["KeyJ"],desc:"Chọn thời gian phát (Seeking).",callback:utilityHandles.showSeekAudioDurationPopup},{task:"global_openSleepTimer",kCode:["KeyS"],desc:"Hẹn giờ tắt.",callback:utilityHandles.showSleepTimerPopup},{task:"global_OpenCloseAllGroupChapters",kCode:["KeyN"],desc:"Đóng/mở tất cả các nhóm chương.",callback:_=>{document.getElementById("allChapGrpChkbox").click()}},{task:"global_switchBookGrpWay",kCode:["KeyG"],desc:"Đổi cách nhóm thứ tự sách.",callback:()=>{const _selBookGroup=document.querySelector("#selBookGroup");if(_selBookGroup){_selBookGroup.value=(Number(_selBookGroup.value)+1)%_selBookGroup.length;_selBookGroup.onchange()}evt.preventDefault();evt.stopPropagation()}},{task:"global_openSettingModal",kCode:["KeyC","KeyQ"],desc:"Mở hộp thoại cấu hình.",callback:()=>{ssData.setting.openSettingModal();evt.preventDefault();evt.stopPropagation()}},{task:"global_togglePlaylistExtraTitles",kCode:["Ctrl + Insert"],desc:"Ẩn/hiện tiêu đề phụ cho danh mục chương sách.",callback:()=>{const _button=document.querySelector('button[name="togglePlaylistExtraTitles"]');if(_button.checkVisibility())_button.click()}},{task:"global_historyGoForward",kCode:["Shift+PageDown"],desc:"Phát quyển sách tiếp theo trong lịch sử nghe.",callback:()=>{const _elmHistoryGoBtn=document.getElementById("elmHistoryGoForward");if(evt.shiftKey&&!_elmHistoryGoBtn.classList.contains("elm-disabled"))_elmHistoryGoBtn.click()}},{task:"global_historyGoBackward",kCode:["Shift+PageUp"],desc:"Phát quyển sách ngay trước trong lịch sử nghe.",callback:()=>{const _elmHistoryGoBtn=document.getElementById("elmHistoryGoBackward");if(evt.shiftKey&&!_elmHistoryGoBtn.classList.contains("elm-disabled"))_elmHistoryGoBtn.click()}},{task:"global_bookListNext",kCode:["Alt+PageDown"],desc:"Phát quyển sách tiếp theo trong danh mục.",callback:()=>{if(evt.altKey){const _nextBook=ssData.sddBookTitlesList.nextItem();if(_nextBook)ssData.sddBookTitlesList.onchange();else toast.showToast("Đã là quyển sách cuối cùng rồi!",toast.ToastType.Warning)}}},{task:"global_bookListPrev",kCode:["Alt+PageUp"],desc:"Phát quyển sách ngay trước trong danh mục.",callback:()=>{if(evt.altKey){const _prevBook=ssData.sddBookTitlesList.prevItem();if(_prevBook)ssData.sddBookTitlesList.onchange();else toast.showToast("Đã là quyển sách đầu tiên rồi!",toast.ToastType.Warning)}}}];if(!evt&&!ssData?.hotKeys?.mainPage){if(!ssData.hotKeys)ssData.hotKeys={};if(!ssData.hotKeys.mainPage){ssData.hotKeys.mainPage=hotkeyOptions.map(hotkey=>{let _temp=Object.assign({},hotkey);delete _temp.callback;return _temp})}return}SddDropdown.prototype.runHotkey(evt,hotkeyOptions)};pageKeyDown();document.addEventListener("keydown",pageKeyDown);window.addEventListener("focus",event=>{saveState2Disk();if(!ssData.hasOwnProperty("lastDBCheck")||Date.now()-ssData.lastDBCheck>1e3*_DEFAULT_CFG.cDBFilesEdt.checkEdtDelay){ssData.setting.handyCheckDBsEdition(false)}},false);window.addEventListener("blur",event=>{saveState2Disk()},false);window.addEventListener("resize",function(event){reposAllTooltips()},true)}pageEventHandlers();toast=Toast();toast.showDelayedToast();let _spd=xState.speed??1.4;_spd=!isNaN(parseFloat(_spd))?parseFloat(_spd):1.4;let _volume=xState.volume??1;_volume=!isNaN(parseFloat(_volume))?parseFloat(_volume):1;_volume=Math.max(Math.min(_volume,1),0);ssData.audioPlayer=AudioPlayer({speed:_spd,volume:_volume,muted:!!xState.muted});ssData.sddBookTitlesList=new SddDropdown('[name="sdd-BookTitlesDropdown-container"]');ssData.sddChaptersList=new SddDropdown('[name="sdd-ChaptersListDropdown-container"]');ssData.bookData=BookData();(function bookDataInitial(){historyCls.cleanHist();if(xState.grpLine==undefined)xState.grpLine=0;const selBookGroup=document.getElementById("selBookGroup");selBookGroup.value=xState.grpLine;selBookGroup.onchange()})();ssData.setting=Setting();const _loadingPageWrapper=document.querySelector("#loadingPageWrapper");_loadingPageWrapper.style.opacity=0;setTimeout(_=>_loadingPageWrapper.remove(),500);elmPlaylist.addEventListener("click",_elmPlaylistClickDelegation);function _elmPlaylistClickDelegation(evt){let _target=evt.target;if(_target.matches(`input[type="checkbox"][id^="chapGrpChkbox"]`)){utilityHandles.chapGrpChkboxClick(_target)}else{let _liChapItem=_target.closest("li[attr-stt]");if(_liChapItem){let _chapStt=parseInt(_liChapItem.getAttribute("attr-stt"));if(!isNaN(_chapStt))changeChap(_chapStt)}}}document.addEventListener("dblclick",evt=>{let _target=evt.target;if(_target.getAttribute("id")==="elmArtwork"){if(evt.offsetX>_target.offsetWidth/2)xAudio.currentTime+=20;else xAudio.currentTime-=20}if(_target.tagName==="DIV"&&_target.contains(elmPlayingTime)){if(evt.offsetX>_target.offsetWidth/2)xAudio.currentTime+=15;else xAudio.currentTime-=15}if(_target===document.body){if(evt.offsetX>_target.offsetWidth/2)xAudio.currentTime+=30;else xAudio.currentTime-=30}evt.stopPropagation()});const _COLUMN_MODE=document.querySelector("div.flex-container").css("flex-direction")=="column";if(_COLUMN_MODE){elmPlaylist.style["max-height"]="550px";const _sleepTimerCouterContainer=document.querySelector("div:has(> #elmSleepTimerCountDown)");if(_sleepTimerCouterContainer){const _functionalButtonsContainer=document.querySelector("div[name='divCtnAudioControl']");_functionalButtonsContainer.insertBefore(_sleepTimerCouterContainer,null)}}const _elmArtwork=document.getElementById("elmArtwork");_elmArtwork.onload=async _event=>{let elmArtwork=_event.target;if(elmArtwork.naturalWidth===120){elmArtwork.src=elmArtwork.src.replace(/([^\/])+$/,"hqdefault.jpg");utilityHandles.updateNCWorkart();return}const _nRatio=elmArtwork.naturalWidth/elmArtwork.naturalHeight;const _elmWidth=_nRatio>1.3?450:_nRatio>1?400:_nRatio>.8?350:300;elmArtwork.style.width=_elmWidth+"px";if(_COLUMN_MODE){return}let _leftSideHeight=0;for(let _elm of elmArtwork.closest('[name="divCtnMiddle"]').firstElementChild.children){if(_elm.tagName==="svg")_leftSideHeight+=_elm.getBoundingClientRect().height;else _leftSideHeight+=_elm.offsetHeight}const chapterListHeight=ssData.sddChaptersList.displayElement.getBoundingClientRect().height;elmPlaylist.style["max-height"]=Math.max(_leftSideHeight+10-chapterListHeight,450)+"px"};_elmArtwork.onerror=evt=>{let _retryCount=_elmArtwork.getAttribute("reload-Count");_retryCount=parseInt(_retryCount);if(isNaN(_retryCount))_retryCount=0;_elmArtwork.setAttribute("reload-Count",++_retryCount);if(navigator.onLine){if(_retryCount<3)_elmArtwork.src=_elmArtwork.src+"?"+performance.now().toFixed(0);else _elmArtwork.src="default.jpg"}else{utilityHandles.showNoInternet()}};document.getElementById("allChapGrpChkbox").onclick=evt=>{let _chkExpandChapterGrp=evt.target;let _allChapChkbox=elmPlaylist.querySelectorAll("input[id^='chapGrpChkbox']");let _isChecked=_chkExpandChapterGrp.checked;_allChapChkbox.forEach(_chkBox=>{_chkBox.checked=_isChecked});let _bookxState=xState.history.books[xAudio.getAttribute("attr-book")];if(_isChecked){setTimeout(_=>{elmPlaylist.querySelector("li.beingPlay").scrollIntoView({behavior:"smooth",block:"center",inline:"end"})},500);_bookxState.chapGrpCollapse=[]}else{elmPlaylist.scrollTo({top:0,left:0,behavior:"smooth"});_bookxState.chapGrpCollapse=[...Array(_allChapChkbox.length).keys()]}let _allChapGrpLabel=elmPlaylist.querySelectorAll("input[type='checkbox']:has( + label.is-sticky)");utilityHandles.chapGrpChkboxClick(_allChapGrpLabel[0])}}function changeBook(bookValue){if(xAudio.getAttribute("attr-Book")==bookValue)return;ssData.ttMutationObserver.observe(document.getElementById("elmBookInfo"),{childList:true,subtree:true});ssData.ttMutationObserver.observe(document.querySelector('[name="divChapterGroupControls"]'),{attributes:true,attributeFilter:["class"]});historyCls.addToHistory(bookValue);xState["lb"]=bookValue;if(typeof xState.history.books[bookValue]=="undefined")xState.history.books[bookValue]={urlLine:0};let bData=ssData.bookData.findBookFromId(bookValue);BookData.prototype.generateWCLinks(bookValue);let strOrgLink="<div style='margin-left: 10px;text-align:left;'>Nguồn: <ul class='inlineList'>";if(Array.isArray(bData.ssrc)){let i=1;bData.ssrc.forEach(s=>{strOrgLink+="<li><a target='_blank' href='"+s+"'>"+getHostName(s)+"</a></li>"})}else strOrgLink+=`<li><a target='_blank' href='${bData.ssrc}'>${getHostName(bData.ssrc)}</a></li>`;strOrgLink+="</ul></div>";let totalDuration=BookData.prototype.bookStatistics(bData).totalDur;const _elmBookTotalDuration=document.getElementById("elmBookTotalDuration");elmBookTotalDuration.querySelector("span:first-of-type").innerHTML=toHhMmSs(totalDuration);const _elmBookRealListening=elmBookTotalDuration.querySelector("span:last-of-type");_elmBookRealListening.setAttribute("attr-duration",totalDuration);_elmBookRealListening.innerHTML=toHhMmSs(totalDuration/xAudio.playbackRate);document.getElementById("elmBookTitle").innerHTML=bData.title+(bData.eTitle&&bData.eTitle!=bData.title?" <wbr/>("+bData.eTitle+")":"");function makeLiGeneralInfor(){let makeSvgStr=_type=>{let _iconTitle=["Mã sách","Số chương","Tác giả","Năm xuất bản","Thể loại","Người đọc","Thời gian còn lại của sách","Thời gian nghe còn lại thực tế của sách (theo tốc độ phát)","Số nhóm chương"];let _iconNames=["icnSvgFeather","icnSvgChapters","icnSvgMaleAuthor","icnSvgCalendar","icnSvgBookType","icnSvgMicrophone","icnSvgRemainTime","icnSvgListenTime","icnSvgChapGroupIcon"];let _inlineStyle="",_class="svg-img-infor";if(_type==7)_inlineStyle="width: 1.2em;";return`<code style="display: inline-block" data-tooltip="${_iconTitle[_type]}" data-tooltip-location="bottom">${makeSvgFromSprite(_iconNames[_type],{"class":_class,style:_inlineStyle})}</code>`};return`<ul class='inlineListInfor' style='padding-inline-start: 0px;'> <li>${makeSvgStr(0)}<span style='user-select: auto;-webkit-user-select: auto;' data-tooltip="${bData.dbPath.file}.${bData.dbPath.bookKit}[${bData.dbPath.idx+1}]\n[${bData.grp}]" data-tooltip-location="bottom">${bData.bookId}</span>.</li> ${bData.tap?"<li>"+makeSvgStr(8)+"<span>"+bData.tap.length+"</span></li>":""} <li>${makeSvgStr(1)}<span>${bData.parts.length} chương.</span></li> <li>${makeSvgStr(6)}<span>${toHhMmSs(totalDuration)}</span>&ensp;${makeSvgStr(7)}<span attr-duration="${totalDuration}" role="listeningTime">${toHhMmSs(totalDuration/xAudio.playbackRate)}</span></li> <li>${makeSvgStr(2)}<span>${bData.author}</span></li>`+(bData.year?`<li>${makeSvgStr(3)}<span>${bData.year}</span></li>`:"")+`<li>${makeSvgStr(4)}<span>${bData.type}</span></li> <li>${makeSvgStr(5)}<span}>${bData.mc}</span></li> </ul>`}document.getElementById("elmBookInfo").innerHTML=`${strOrgLink} <div xrole="containing-tooltip">${makeLiGeneralInfor()} <p id="elmBookGioithieu" class="bookChapIntro">${bData.intro}</p> </div>`;const formatSubTit=(subTit,_for)=>{if(!subTit)return"";subTit=subTit.replace(/(\d+):/g,"<i>$1</i>:");return"<div class='item-2nd-main-div subTitle'>"+subTit+"</div>"};let _makeLiItem=i=>{let _track=document.createElement("li");_track.innerHTML=`<code data-rAlignGroup='chapDuration'>${makeBrk(bData.parts[i-1].dur)}</code> <span>${bData.parts[i-1].tit}</span>${formatSubTit(bData.parts[i-1].sTit,false)}`;if(i>=100)_track.classList.add(i>999?"fourDigitOrdernalNo":"threeDigitOrdernalNo");_track.setAttribute("attr-stt",i);return _track};elmPlaylist.innerHTML="";let sddOptionData=[],sddOptGroup=null;if(bData.tap){let _divChapterGroupControls=document.querySelector('[name="divChapterGroupControls"]');_divChapterGroupControls.classList.remove("elm-hidden");let _bookxState=xState.history.books[bookValue];if(!_bookxState.chapGrpCollapse)_bookxState.chapGrpCollapse=[];let j=0,liGroup=null;let _groupTotalDur=0;sddOptGroup=[];for(let i=1;i<=bData.parts.length;i++){if(bData.tap[j].f==i){let _chapGrpChkbox=document.createElement("input");_groupTotalDur=0;_chapGrpChkbox.type="checkbox";_chapGrpChkbox.checked=_bookxState.chapGrpCollapse.indexOf(j)>-1?false:true;_chapGrpChkbox.id="chapGrpChkbox_"+j;_chapGrpChkbox.setAttribute("attr-grpNo",j);let _lbl=document.createElement("label");_lbl.htmlFor="chapGrpChkbox_"+j;_lbl.style.fontWeight="bold";_lbl.innerHTML=`<span style="display:block"><code class="underlineAnim">${bData.tap[j].label}</code></span>`;_lbl.classList.add("is-sticky");elmPlaylist.appendChild(_chapGrpChkbox);elmPlaylist.appendChild(_lbl);liGroup=document.createElement("section")}sddOptionData.push({stt:i,gId:j,value:i,label:bData.parts[i-1].tit,dur:makeBrk(bData.parts[i-1].dur),sTit:bData.parts[i-1].sTit,eTit:bData.parts[i-1].eTit,attr:{"attr-stt":i}});liGroup.appendChild(_makeLiItem(i));_groupTotalDur+=toSeconds(bData.parts[i-1].dur);if(bData.tap[j].t==i||i==bData.parts.length){if(j<bData.tap.length-1&&bData.tap[j].t!=bData.tap[j+1].f-1){let _lbl=document.createElement("label");_lbl.innerHTML="Orphan chapters";elmPlaylist.appendChild(_lbl)}let grpSummary=document.createElement("label");grpSummary.classList.add("chapter-group-summary");let _chapCount=bData.tap[j].t-bData.tap[j].f+1;grpSummary.innerHTML=`<span>Số chương: <code>${_chapCount}</code>.</span><span>Thời lượng: <code>${toHhMmSs(_groupTotalDur)}</code> / <code attr-duration="${_groupTotalDur}">${toHhMmSs(_groupTotalDur/xAudio.playbackRate)}</code></span>`;liGroup.prepend(grpSummary);elmPlaylist.appendChild(liGroup);SddDropdown.prototype.rightAlignElems(liGroup,"li");sddOptGroup.push({stt:j+1,gId:j,label:`${int2Roman(j+1)}. ${bData.tap[j].label}`,extraInfor:[_chapCount,toHhMmSs(_groupTotalDur)],attr:{"attr-grpNo":j}});j++}}ssData.ttMutationObserver.observe(document.querySelector('label[for="allChapGrpChkbox"]'),{attributes:true,attributeFilter:["data-tooltip"]});utilityHandles.updateAllChapGrpChkboxUI();let _chapGroupLabels=elmPlaylist.querySelectorAll("input[type='checkbox'] + label");setTimeout(()=>{let _maxLabelHeight=0;_chapGroupLabels.forEach(_lbl=>{_maxLabelHeight=Math.max(_maxLabelHeight,_lbl.getBoundingClientRect().height);_lbl.style.fontWeight=null});_chapGroupLabels.forEach(_lbl=>{_lbl.style.height=_maxLabelHeight+"px"})},500);ssData.playlistObserver.disconnect();_chapGroupLabels.forEach(_lbl=>{ssData.playlistObserver.observe(_lbl)})}else{sddOptGroup=null;document.querySelector('[name="divChapterGroupControls"]').classList.add("elm-hidden");for(let i=1;i<=bData.parts.length;i++){elmPlaylist.appendChild(_makeLiItem(i));sddOptionData.push({stt:i,value:i,label:bData.parts[i-1].tit,dur:makeBrk(bData.parts[i-1].dur),sTit:bData.parts[i-1].sTit,eTit:bData.parts[i-1].eTit,attr:{"attr-stt":i}})}SddDropdown.prototype.rightAlignElems(elmPlaylist,"li")}const chapterListSetting={displayOneLine:false,diacriticsFilterMode:xState?.chapterListDiacriticsSearch??true,customizedCssClass:"sdd-wrapper-chapterList",searchBoxPlaceholder:"Tìm trong {_items_length} chương sách ...",render:{option:function(data,escape){return`<div class="item-main-div"><code class="item-slight-details" data-rAlignGroup="chapterDuration">${escape(data.dur)}</code>&emsp13;<span>${data.label}</span></div> ${formatSubTit(data.sTit,true)}`+`${data.eTit?"<div class='item-2nd-main-div englishTitle'>"+data.eTit+"</div>":""}`},select_option:function(option,escape){return option.firstChild.innerHTML},optgroup_header:function(data,escape){return`<span>${escape(data.label)}</span>&emsp13;<span class="item-slight-details">[${escape(data.extraInfor[0])} chương / ${escape(data.extraInfor[1])}]</span>`},no_results:()=>{return"Không tìm thấy chương sách nào"}},callbacks:{onChange:function(selectedItem){changeChap(selectedItem.value)},diacriticsFilterModeOnChanged:function(newDiacriticsSearchVal){xState.chapterListDiacriticsSearch=newDiacriticsSearchVal}}};let lastChap=1;if(typeof xState.history.books[bookValue]["lc"]!="undefined")lastChap=parseInt(xState.history.books[bookValue]["lc"]);xAudio.setAttribute("attr-PrevBook",xAudio.getAttribute("attr-Book")??"");xAudio.setAttribute("attr-Book",bookValue);if(!elmPlaylist.hasAttribute("attr-Length"))ssData.sddChaptersList.loadDropdown(chapterListSetting,ssData.sddChaptersList.LOAD_MODE_ENUM.SettingLoadOnly);elmPlaylist.setAttribute("attr-Length",bData.parts.length);ssData.sddChaptersList.loadDropdown({options:sddOptionData,optgroups:sddOptGroup},ssData.sddChaptersList.LOAD_MODE_ENUM.DataLoadOnly,""+lastChap)}function changeChap(newChap){saveAudioCurrentTime();let bData=ssData.bookData.findBookFromId(xAudio.getAttribute("attr-Book"));if(newChap==undefined)return;newChap=parseInt(newChap);if(isNaN(newChap))return;let chapLength=parseInt(elmPlaylist.getAttribute("attr-Length"));if(isNaN(chapLength))chapLength=elmPlaylist.querySelectorAll("li").length;let _liNewChap=elmPlaylist.querySelector(`li[attr-stt="${newChap}"]`);if(_liNewChap?.classList.contains("beingPlay")){return}if(newChap<1||newChap>chapLength){toast.showToast("Không tìm thấy chương truyện có số thứ tự "+newChap,toast.ToastType.Warning);return}ssData.sddChaptersList.value=newChap;toast.dismissAll();let _lastTrack=elmPlaylist.querySelector("li.beingPlay");_lastTrack&&_lastTrack.classList.remove("beingPlay");_liNewChap.classList.add("beingPlay");utilityHandles.gotoPlayingChapter();(function(){let _elmSkipNext=document.querySelector(".ap-next-btn");if(newChap==chapLength)_elmSkipNext.classList.add("elm-disabled");else _elmSkipNext.classList.remove("elm-disabled")})();elmPlaylist.setAttribute("attr-Value",newChap);xAudio.setAttribute("attr-Chap",newChap);let elmChapterTitle=document.getElementById("elmChapterTitle");let chapData=bData.parts[newChap-1];const _formatTit=tit=>{tit=tit.replace(/\s+/g," ");tit=tit.replaceAll(" - ","<br/>");tit=tit.replaceAll(/((?<!Hồi|Chương|Phần|Tập|Quyển|Phẩm|Bài)\s+\d+\s*[\:\–\.\-])/gi,"<b style='color:#1566bf'>$1</b>");tit=tit.replaceAll(/((?:Hồi|Chương|Phần|Tập|Quyển|Phẩm|Bài)\s+\d+(?:\s*[\:\–\.\-]\s*\d+))/gi,"<b style='color:#c09618'>$1</b>");tit=tit.replaceAll(/((?:Hồi|Chương|Phần|Tập|Quyển|Phẩm|Bài)\s+\d+\s*(?=[\:\–\.\-\(](?!\s*\d+)|$))/gi,"<b style='color:green'>$1</b>");return tit};document.querySelector(".ap-title").innerHTML=chapData.tit;elmChapterTitle.innerHTML="<span style='color:darkblue;'>"+pad(newChap,2)+"/"+pad(bData.parts.length,2)+".</span> "+_formatTit(chapData.tit)+(chapData.sTit?"<span style='font-size:.85em'> ⸺ "+_formatTit(" "+chapData.sTit)+"<span>":"");const remainDuration=BookData.prototype.bookStatistics(bData,newChap).totalDur;const _listenedDur=bData.statistics.totalDur-remainDuration;const _listenedPercent=((1-remainDuration/bData.statistics.totalDur)*100).toFixed(1);let tit=elmChapterTitle.innerText;let makeSvgStr=(_type,_tooltip)=>{let _iconTitle=["Thời lượng","Thời gian nghe thực tế","Năm xuất bản","Người đọc","Id của chương truyện","Link trực tiếp chương truyện","Đổi nghe link tiếp theo"];let _iconNames=["icnSvgDuration","icnSvgListenTime","icnSvgCalendar","icnSvgMicrophone","icnSvgFeather","icnSvgMediaLinks",""];let _inlineStyle="",_class="svg-img-infor";if(!_iconNames[_type])return` data-tooltip="${_iconTitle[_type]}" data-tooltip-location="bottom"`;else return`<code data-tooltip="${_iconTitle[_type]}" data-tooltip-location="bottom">${makeSvgFromSprite(_iconNames[_type],{"class":_class,style:_inlineStyle})}</code>`};let strBookInfo="";strBookInfo+=`${chapData.eTit?"Tên gốc: <i>"+chapData.eTit+"</i><br>":""}`;strBookInfo+=`<span xrole='containing-tooltip'><ul class='inlineListInfor'> ${chapData.dur?"<li>"+makeSvgStr(0)+"<span>"+chapData.dur+"</span> "+makeSvgStr(1)+"<span attr-duration='"+toSeconds(chapData.dur)+"' role='listeningTime'>"+toHhMmSs(toSeconds(chapData.dur)/xAudio.playbackRate)+"</span></li>":""} <li><span id='percentageListened' style='background-size: ${_listenedPercent}% 100%;' data-listened-duration='${_listenedDur}' data-book-dur='${bData.statistics.totalDur}' data-listened-percent='${_listenedPercent}' data-tooltip='Phần trăm tổng thời lượng đã nghe [${toHhMmSs(_listenedDur)}]&#xaso với cả cuốn sách [${toHhMmSs(bData.statistics.totalDur)}]' data-tooltip-location='bottom'>${_listenedPercent}%</span></li> ${chapData.year||bData.year?"<li>"+makeSvgStr(2)+"<span>"+(chapData.year||bData.year)+"</span></li>":""} ${bData.mc?"<li>"+makeSvgStr(3)+"<span>"+bData.mc+"</span></li>":""} ${chapData.cId?"<li>"+makeSvgStr(4)+"<span>"+chapData.cId+"</span></li>":""}`;let strLink="<li><span  id='elmMp3Links'>"+makeSvgStr(5)+"Media: ";if(!Array.isArray(chapData.url)){chapData.url=[chapData.url]}if(chapData.url.length>1)strLink+=`<button class='svgButton switchChapterAudioSrc' style='padding: 1px 5px 0px 5px;' onclick='changeAudioSrc(false);' ${makeSvgStr(6)}><svg class='button-svg-img' style='font-size:15px'><use href='#icnSvgSwitchChapterLinks'/></svg></button>&nbsp;`;strLink+="<ul class='inlineList'>";for(let i=1;i<=chapData.url.length;i++)if(chapData.url[i-1])strLink+=`<li role='audioSrc'><a target='_blank' href='${chapData.url[i-1]}'>${getHostName(chapData.url[i-1])}</a></li>`;strLink+=chapData.oUrl?`<li><a class='outsideLink' target='_blank' href='${chapData.oUrl}'>${getHostName(chapData.oUrl)}</a></li>`:"";strLink+="</ul><span></li>";let _chapInfor="";if(chapData.infor)_chapInfor=` ∴ <details ${window.chapInforDetailsOpen?"open":""} ontoggle="window.chapInforDetailsOpen = this.open;" style="display: inline-block;margin-bottom: -5px;"><summary style="padding-top: 0px;cursor:pointer;">${makeSvgFromSprite("icnSvgChapterInfor",{"class":"svg-img-infor",style:""})}</summary></details><div class="detailContent"><p class="bookChapIntro" style="font-size: .8em;">${chapData.infor}</p></div>`;let _elmChapterInfor=document.getElementById("elmChapterInfor");ssData.ttMutationObserver.observe(_elmChapterInfor,{childList:true,subtree:true});_elmChapterInfor.innerHTML=strBookInfo+strLink+"</ul></span>"+_chapInfor;let elmArtwork=document.getElementById("elmArtwork");elmArtwork.setAttribute("reload-Count",0);if(chapData.img){elmArtwork.src=chapData.img}else{elmArtwork.src=bData.cover}utilityHandles.showNoInternet();let _elmRealRemainListening=document.getElementById("elmBookInfo").querySelector("[attr-duration]");_elmRealRemainListening.parentElement.querySelector("span:first-of-type").innerText=`${toHhMmSs(remainDuration)} (${bData.parts.length-newChap+1} chương)`;_elmRealRemainListening.setAttribute("attr-duration",remainDuration);_elmRealRemainListening.innerText=toHhMmSs(remainDuration/xAudio.playbackRate);document.title=xAudio.title=tit;if("mediaSession"in navigator){navigator.mediaSession.metadata=new MediaMetadata({title:makeBrk(chapData.dur)+" "+tit,artist:bData.author,album:bData.title,artwork:[{src:elmArtwork.src,sizes:"512x512",type:"image/png"}]})}changeAudioSrc(false);let _bookValue=xAudio.getAttribute("attr-Book");xState.history.books[_bookValue]["lc"]=newChap;localStorage.setItem("xState",JSON.stringify(xState));(function gotoLastPosition(){let _bookValue=xAudio.getAttribute("attr-Book");let bSt=xState.history.books[_bookValue];if(!bSt)return;let cSt=parseFloat(bSt[parseInt(xAudio.getAttribute("attr-chap"))]);cSt=!isNaN(cSt)?cSt:chapData?.skipStart??(bData?.skipStart??0);if(cSt)xAudio.currentTime=cSt})()}let saveAudioCurrentTime=()=>{let _lB=xAudio.getAttribute("attr-Prevbook");let _lC=xAudio.getAttribute("attr-chap");xAudio.setAttribute("attr-Prevbook",xAudio.getAttribute("attr-book"));if(_lB&&_lC){let currTime=xAudio.currentTime<<0;if(currTime+5>xAudio.duration){delete xState.history.books[_lB][_lC]}else xState.history.books[_lB][_lC]=currTime}};function saveState2Disk(){saveAudioCurrentTime();localStorage.setItem("xState",JSON.stringify(xState));localStorage.setItem("xDBFilesCfg",JSON.stringify(xDBFilesCfg))}class utilityHandles{static showSleepTimerPopup(){let _popupDiv=document.getElementById("sleepTimerDivPopup");let _btnShowPopup=_popupDiv.previousElementSibling;let _ipSleepTimer=document.getElementById("ipSleepTimer");const _sleepTimersDatalist=document.getElementById("sleepTimersDatalist");const _stCountdownCtn=document.querySelector("div:has( > #elmSleepTimerCountDown)");const _stCountdownSpan=document.getElementById("elmSleepTimerCountDown");const _pattern=/^\d+(\s+phút|\s*[hHgG\.\-\:]\s*\d*)?$/;_ipSleepTimer.setAttribute("pattern",_pattern.source);_popupDiv.querySelector("label[for]").innerHTML="Nhập thời gian dừng phát truyện theo định dạng, bấm Enter để đặt hẹn giờ:<br>— <b>HH[<i>delimiter</i>]mm</b>; ví dụ: <b>1h20</b> = 1 giờ 20 phút<br>— <b>mm</b>; ví dụ: <b>45</b> = 45 phút.<br/>Trong đó <b>HH</b> là số giờ, <b>mm</b> là số phút;  <b>[<i>delimiter</i>]</b> có thể là một trong các kí tự <b>H</b>, <b>h</b>, <b>G</b>, <b>g</b>, <b>.</b>, <b>-</b>, <b>:</b>";_popupDiv.classList.add("shortPoupShow");_ipSleepTimer.focus({focusVisible:true,preventScroll:false});if(!_ipSleepTimer.onkeyup){function convertSleepTime(time){if(typeof time=="number"){let _timeStr=time;if(time>=60){_timeStr=(time/60<<0)+"h"+(time%60||"")}return _timeStr}if(typeof time=="string"){if(!time.match(_pattern))return null;time=time.replace(/[HGg\.\-\:]/g,"h");let _times=time.split("h").map(_t=>Number(_t));let _timeMinutes=_times.pop();if(_times.length>0){_timeMinutes+=_times.pop()*60}return _timeMinutes}}ssData.sleep={timer:0,endTime:null,siObj:null,count:null,"enum":{0:"Bỏ hẹn giờ","-1":"Khi nghe hết chương hiện tại"}};let _defSleepTimes=[15,30,45,60,75,90,120,180];if(xState.sleepTimers&&Array.isArray(xState.sleepTimers))_defSleepTimes=xState.sleepTimers;_sleepTimersDatalist.innerHTML=_defSleepTimes.map(_time=>{const _formattedTime=convertSleepTime(parseInt(_time));return`<option value="${_formattedTime}" label="${_time} phút"></option>`}).join(" ");const _setSleepTimer=_=>{if(!_ipSleepTimer.checkValidity()){_ipSleepTimer.value=ssData.sleep.timer>0?convertSleepTime(ssData.sleep.timer):"";toast.showToast("Thời gian hẹn giờ nhập không đúng định dạng",toast.ToastType.Error);_popupDiv.classList.remove("shortPoupShow");return}const stopSleepTimer=interuptOldTimer=>{const _sleepObj=ssData.sleep;clearInterval(_sleepObj.siObj);const _AN_TIMER_ACTIVE=_sleepObj.siObj!==null;_sleepObj.timer=0;_sleepObj.count=0;_sleepObj.siObj=null;_sleepObj.endTime=null;_btnShowPopup.classList.remove("sleepTimerActive");_stCountdownCtn.classList.add("elm-hidden");_stCountdownSpan.classList.remove("almostReachingEnd");_ipSleepTimer.value="";if(!interuptOldTimer){xAudio.pause();toast.showToast("Dừng phát audio do đã tới thời gian hẹn giờ tắt",toast.ToastType.Warning,{duration:1e4})}else if(_AN_TIMER_ACTIVE){toast.showToast("Tắt đồng hồ hẹn giờ trước hạn hoặc đặt hẹn giờ mới thay thế.",toast.ToastType.Warning,{duration:1e4})}};let newSleepTimeTxt=_ipSleepTimer.value.replace(/\s/g,"");if(!newSleepTimeTxt||newSleepTimeTxt==="0"){if(ssData.sleep.timer>0)stopSleepTimer(true);_popupDiv.classList.remove("shortPoupShow");return}let newSleepTime=convertSleepTime(newSleepTimeTxt);if(!_sleepTimersDatalist.querySelector('[label^="'+newSleepTime+' "]')){let i=0;while(i<_sleepTimersDatalist.options.length&&parseInt(_sleepTimersDatalist.options[i].label)<newSleepTime){i++}let _newOption=new Option("",convertSleepTime(newSleepTime));_newOption.label=newSleepTime+" phút";_sleepTimersDatalist.insertBefore(_newOption,_sleepTimersDatalist.options[i]);xState.sleepTimers=[..._sleepTimersDatalist.options].map(_opt=>parseInt(_opt.label))}stopSleepTimer(true);_ipSleepTimer.value=convertSleepTime(newSleepTime);const _sleepObj=ssData.sleep;_sleepObj.count=_sleepObj.timer=newSleepTime*60;_sleepObj.endTime=(Date.now()/1e3<<0)+_sleepObj.timer;_btnShowPopup.classList.add("sleepTimerActive");_stCountdownCtn.classList.remove("elm-hidden");_stCountdownSpan.textContent=toHhMmSs(_sleepObj.count);_sleepObj.siObj=setInterval(_=>{_sleepObj.count--;_stCountdownSpan.textContent=toHhMmSs(_sleepObj.count);if(_sleepObj.count%10==0||_sleepObj.count<30){_sleepObj.count=_sleepObj.endTime-(Date.now()/1e3<<0)}if(_sleepObj.count==30){_stCountdownSpan.classList.add("almostReachingEnd")}if(_sleepObj.count<=0){stopSleepTimer()}},1e3);_popupDiv.classList.remove("shortPoupShow")};const _inputBlured=_ev=>{const _sleepObj=ssData.sleep;_ipSleepTimer.value=_sleepObj.timer==0?"":convertSleepTime(_sleepObj.timer/60);_popupDiv.classList.remove("shortPoupShow")};_ipSleepTimer.onkeyup=_ev=>{if(_ev.shiftKey&&_ev.code=="Backspace")_ipSleepTimer.value="";if(["Enter","NumpadEnter"].includes(_ev.code)){_setSleepTimer()}if(_ev.code==="Escape"){_inputBlured()}_ev.stopPropagation()};_ipSleepTimer.addEventListener("focusout",_inputBlured);_ipSleepTimer.addEventListener("keydown",evt=>{evt.stopPropagation()})}}static showSeekAudioDurationPopup(){let _popupDiv=document.getElementById("seekDurationDivPopup");let _ipDuration2Seek=document.getElementById("ipAudioDuration");const _pattern=/^([\+\-]?(([1-5]?\d[.,:])?([0-5]?\d)[.,:])?([0-5]?\d))|([\+\-]?[.,:][0-5]?\d)$/;let _maxDuration=xAudio.duration;if(!_maxDuration)_maxDuration=0;_ipDuration2Seek.setAttribute("pattern",_pattern.source);_popupDiv.querySelector("label[for]").innerHTML="Nhập thời gian muốn tua nhanh đến theo định dạng (dấu <b>+</b> hoặc <b>–</b> là độ lệch thời gian tua đến tính từ thời gian hiện tại): <b>[±]H.mm.ss</b>, <b>[±]mm.ss</b>, <b>[±]mm</b> hoặc <b>[±].ss</b><br/>(Thời lượng không quá <b>"+toHhMmSs(_maxDuration)+"</b>)";_ipDuration2Seek.value="";_popupDiv.classList.add("shortPoupShow");_ipDuration2Seek.focus({focusVisible:true,preventScroll:false});if(!_ipDuration2Seek.onkeyup){let seekAudioTo=()=>{let _toTime=_ipDuration2Seek.value.trim();if(_pattern.test(_toTime)){let _toDur=0;let plusMinus=_toTime[0];if("+-".indexOf(plusMinus)>-1){_toTime=_toTime.slice(1)}else plusMinus="";_toTime=_toTime.replaceAll(/[\.\,]/g,":");let _seekDistanceMsg=plusMinus==""?"":(plusMinus=="+"?"Tiến thêm ":"Lùi lại ")+_toTime;if(_toTime.indexOf(":")==-1)_toTime=parseInt(_toTime)*60;else _toTime=toSeconds(_toTime);if(plusMinus==="+")_toTime+=xAudio.currentTime;if(plusMinus==="-")_toTime=xAudio.currentTime-_toTime;if(_toTime>=0&&_toTime<xAudio.duration){if(_seekDistanceMsg!="")toast.showToast(_seekDistanceMsg);xAudio.currentTime=_toTime}else toast.showToast(_toTime<0?"Thời gian không được nhỏ hơn 0":"Thời gian bạn nhập lớn hơn tổng thời lượng của chương truyện",toast.ToastType.Warning)}else{if(_toTime)toast.showToast("Thời gian bạn nhập không đúng format",toast.ToastType.Error)}_popupDiv.classList.remove("shortPoupShow")};_ipDuration2Seek.onkeyup=_ev=>{if(_ev.code==="Enter"||_ev.code==="NumpadEnter"){_ev.preventDefault();_ipDuration2Seek.blur()}if(_ev.code==="Escape"){_popupDiv.classList.remove("shortPoupShow")}_ev.stopPropagation()};_ipDuration2Seek.addEventListener("focusout",seekAudioTo);_ipDuration2Seek.addEventListener("keydown",evt=>{evt.stopPropagation()})}}static gotoPlayingChapter(){let _liNewChap=elmPlaylist.querySelector("li.beingPlay");if(!_liNewChap)return;let _liParent=_liNewChap.parentElement;let _isSectionExpanded=true;let _chapGrpCheckbox=null;if(_liParent.nodeName=="SECTION"){_chapGrpCheckbox=_liParent.previousElementSibling.previousElementSibling;_isSectionExpanded=_chapGrpCheckbox.checked;_chapGrpCheckbox.checked=true}let _scrollToView=_=>{SddDropdown.prototype.scrollToElement(elmPlaylist,_liNewChap,"smooth",true);setTimeout(_=>{const _topDistance=_liNewChap.getBoundingClientRect().top-elmPlaylist.getBoundingClientRect().top;if(_topDistance<0||_topDistance>elmPlaylist.offsetHeight)SddDropdown.prototype.scrollToElement(elmPlaylist,_liNewChap,"smooth",true);_chapGrpCheckbox&&setTimeout(_=>{utilityHandles.chapGrpChkboxClick(_chapGrpCheckbox,false)},200)},0)};if(_isSectionExpanded)_scrollToView();else setTimeout(_=>{_scrollToView()},800)}static togglePlaylistExtraTitles(){function isWindowOS(){const platform=window.navigator?.userAgentData?.platform||window.navigator.platform,windowsPlatforms=["Win32","Win64","Windows","WinCE"];return windowsPlatforms.includes(platform)}elmPlaylist.classList.toggle("hideOptionExtraTitle");if(!isWindowOS())utilityHandles.gotoPlayingChapter()}static updateAllChapGrpChkboxUI(){let _allChapChkbox=elmPlaylist.querySelectorAll("input[id^='chapGrpChkbox']");let _chkCount=0,_chkTotal=_allChapChkbox.length;_allChapChkbox.forEach(_chkBox=>{if(_chkBox.checked)_chkCount++});let _chkExpandChapterGrp=document.getElementById("allChapGrpChkbox");let _chkLabel=_chkExpandChapterGrp.nextElementSibling;ssData.ttMutationObserver.observe(_chkLabel,{attributes:true,attributeFilter:["data-tooltip"]});_chkLabel.setAttribute("data-tooltip",`Đóng/mở tất cả các chapter group\n`+(_chkCount==0||_chkCount==_chkTotal?`Tất cả các ${_chkTotal} nhóm chương đang ${_chkCount==0?"đóng":"mở"}`:`Hiện có ${_chkCount} trong ${_chkTotal} nhóm chương đang mở`));setChkboxState(_chkExpandChapterGrp,_chkCount==0?0:_chkCount==_chkTotal?1:2)}static chapGrpChkboxClick(_chapGrpChkbox,_notCheckPosition){let _grpNo=parseInt(_chapGrpChkbox.getAttribute("attr-grpNo"));let _bookxState=xState.history.books[xAudio.getAttribute("attr-book")];if(!_bookxState.chapGrpCollapse)return;let _idx=_bookxState.chapGrpCollapse.indexOf(_grpNo);let isChecked=_chapGrpChkbox.checked;if(_idx>-1&&isChecked)_bookxState.chapGrpCollapse.splice(_idx,1);if(_idx===-1&&!isChecked)_bookxState.chapGrpCollapse.push(_grpNo);utilityHandles.updateAllChapGrpChkboxUI();if(!_notCheckPosition)setTimeout(_=>{let _parentTop=elmPlaylist.getBoundingClientRect().top;let _allChapGrpLabel=elmPlaylist.querySelectorAll("input[type='checkbox'] + label.is-sticky");let _stopCheck=false;for(let i=0;i<_allChapGrpLabel.length;i++){let _label=_allChapGrpLabel[i];let _lblRect=_label.getBoundingClientRect();let _lblTop=_lblRect.top;if(_lblTop>=_parentTop){_label.classList.toggle("stickyPinned",_lblTop<=_parentTop+1)}if(!_stopCheck){let _prevLblBottom=i>0?_allChapGrpLabel[i-1].getBoundingClientRect().bottom:-10;if(_lblTop<_prevLblBottom&&_lblRect.bottom>_prevLblBottom){{elmPlaylist.scrollBy({left:0,top:_lblTop-_prevLblBottom-4,behavior:"smooth"})}_stopCheck=true}}}},800)}static updateNCWorkart(){if("mediaSession"in navigator&&navigator.mediaSession.metadata){let _meta=navigator.mediaSession.metadata;navigator.mediaSession.metadata=new MediaMetadata({title:_meta.title,artist:_meta.artist,album:_meta.album,artwork:[{src:elmArtwork.src,sizes:"512x512",type:"image/png"}]})}}static showNoInternet(_show=navigator.onLine){document.getElementById("elmArtwork").parentElement.classList.toggle("elm-hidden",!_show);document.querySelector(".noInternetImg").classList.toggle("elm-hidden",_show)}static getFileSize(_urlPath,_callback){_callback=_callback??(_msg=>{console.log(_msg.msg)});if(!_urlPath.match(/www\.google|medialib\.qlgd/))return _callback({success:0,msg:""});const prettyBytes=(num,precision=2,addSpace=false)=>{const UNITS=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(Math.abs(num)<1)return num+(addSpace?" ":"")+UNITS[0];const exponent=Math.min(Math.floor(Math.log2(num<0?-num:num)/10),UNITS.length-1);const n=Number(((num<0?-num:num)/1024**exponent).toFixed(precision));return{str:(num<0?"-":"")+n+(addSpace?" ":"")+UNITS[exponent],unit:UNITS[exponent],indx:exponent}};const chainToast=new toast.ChainToasts("Đang lấy dữ liệu dung lượng file");fetch(_urlPath,{method:"HEAD",cache:"force-cache"}).then(function(response){let _contentSize=response.headers.get("content-length");if(!_contentSize){chainToast.checkoutToast(`Không lấy được dữ liệu dung lượng file.`,toast.ToastType.Error);return _callback({success:0,msg:""})}_contentSize=parseInt(_contentSize,10);const _UNITS_COLOR=["Black","Blue","Green","Red","DarkBlue","DarkGreen","DarkRed","DarkRed","DarkRed"];const{str:_fileSize,unit:_unit,indx:_idx}=prettyBytes(_contentSize);const _sizeStr=`<code style='color:${_UNITS_COLOR[_idx]}'>${_fileSize}</code>`;chainToast.checkoutToast(`Dung lượng file media vừa được cập nhật ${_fileSize}`,toast.ToastType.Success);_callback({success:1,msg:_sizeStr,size:_fileSize,unit:_unit,inbyte:_contentSize})})["catch"](error=>{chainToast.checkoutToast(`[${error.message}] Không lấy được dữ liệu dung lượng file.`,toast.ToastType.Error);_callback({success:0,msg:""});console.warn("[fetchHead] Error on fetching header:",error.message)})}}class historyCls{buttonAppeance(){let _hist=xState.history;let _elmF=document.getElementById("elmHistoryGoForward");let _elmB=document.getElementById("elmHistoryGoBackward");if(_hist.hisList.length<=1){_elmF.classList.add("elm-disabled");_elmB.classList.add("elm-disabled");return}if(_hist.currHis==_hist.hisList.length-1){_elmF.classList.add("elm-disabled")}else{const _adjHist=historyCls.prototype.getAdjHist(1);if(_adjHist){ssData.ttMutationObserver.observe(_elmF,{attributes:true,attributeFilter:["data-tooltip"]});_elmF.classList.remove("elm-disabled");_elmF.setAttribute("data-tooltip",makeBrk(_adjHist.mc)+" "+_adjHist.title)}}if(_hist.currHis==0)_elmB.classList.add("elm-disabled");else{const _adjHist=historyCls.prototype.getAdjHist(-1);if(_adjHist){ssData.ttMutationObserver.observe(_elmB,{attributes:true,attributeFilter:["data-tooltip"]});_elmB.classList.remove("elm-disabled");_elmB.setAttribute("data-tooltip",makeBrk(_adjHist.mc)+" "+_adjHist.title)}}}static histCallFlag=false;static historyClear(){let _hist=xState.history;const _currBook=xAudio.getAttribute("attr-book"),_currChap=xAudio.getAttribute("attr-chap");_hist.currHis=0;_hist.hisList.length=0;_hist.hisList.push(_currBook);xState.lb=_currBook;for(let _book in xState.history.books){if(_currBook!==_book)delete xState.history.books[_book];else{let _histBook=xState.history.books[_currBook];Object.keys(_histBook).filter(_attr=>_attr.match(/^\d+$/)&&_attr!=_currChap).forEach(_chap=>delete _histBook[_chap]);_histBook.lc=_currChap}}toast.showToast("Đã xóa toàn bộ lịch sử nghe sách",toast.ToastType.Success,{persistance:true});historyCls.prototype.buttonAppeance()}static addToHistory(_bookId){let _hist=xState.history;if(this.histCallFlag){this.histCallFlag=false}else{const _bookIdx=_hist.hisList.indexOf(_bookId);if(_bookIdx>-1)_hist.hisList.splice(_bookIdx,1);_hist.hisList.push(_bookId);_hist.currHis=_hist.hisList.length-1}historyCls.prototype.buttonAppeance()}getAdjHist(dir){let _hist=xState.history;if(_hist.hisList.length==0){_hist.currHis=0;historyCls.prototype.buttonAppeance();return null}let _new_currHist=_hist.currHis+dir;if(_new_currHist<0||_new_currHist>=_hist.hisList.length)return undefined;const _adjBook=ssData.bookData.findBookFromId(_hist.hisList[_new_currHist]);if(_adjBook)return _adjBook;historyCls.cleanHist();return historyCls.prototype.getAdjHist(dir)}static cleanHist(){let _hist=xState.history;const _setFirstBook=_=>{const _bookdefault=Math.floor(Math.random()*ssData.bIds.length);let _lastBook=ssData.xData[_bookdefault].bookId;xState["lb"]=_lastBook;_hist.currHis=0};if(_hist.hisList.length==0){_setFirstBook();return null}let _currHist=_hist.currHis;let purgeIdxArr=[];for(let i=_hist.hisList.length-1;i>=0;i--){if(!ssData.bIds.includes(_hist.hisList[i])){purgeIdxArr.push(i);if(i<=_currHist)_currHist--}}if(purgeIdxArr.length>0){toast.showToast(`Có ${purgeIdxArr.length} cuốn sách không còn tồn tại bị xóa khỏi lịch sử nghe sách`,toast.ToastType.Warning,{persistance:true});purgeIdxArr.forEach(_idx=>{const _book_id=_hist.hisList[_idx];if(_hist.books.hasOwnProperty(_book_id))delete _hist.books[_book_id];_hist.hisList.splice(_idx,1)});let i=_hist.hisList.length-1;while(i>0){if(_hist.hisList[i]==_hist.hisList[i-1]){_hist.hisList.splice(i,1);if(i<=_currHist)_currHist--}i--}}if(_hist.hisList.length==0){_setFirstBook();_currHist=0}else{if(_currHist<0)_currHist=0;else if(_currHist>=_hist.hisList.length)_currHist=_hist.hisList.length-1;_hist.currHis=_currHist;xState["lb"]=_hist.hisList[_currHist]}return _currHist}static historyGo(_dir){let _hist=xState.history;this.histCallFlag=true;if("number"===typeof _dir){_dir=_dir==1?1:-1;const _adjHist=historyCls.prototype.getAdjHist(_dir);if(_adjHist){_hist.currHis+=_dir;ssData.bookData.goGetBook(_adjHist.bookId)}}else if("string"===typeof _dir){const _bookId=_dir;let _bookIndex=_hist.hisList.indexOf(_bookId);if(_bookIndex==-1)return;_hist.currHis=_bookIndex;const _adjHist=historyCls.prototype.getAdjHist(0);if(_adjHist){ssData.bookData.goGetBook(_adjHist.bookId)}}historyCls.prototype.buttonAppeance()}static wipeAll(mode){mode=mode??0;if(!confirm("Bạn muốn xóa toàn bộ lịch sử trang Web đã lưu?\n\n Sẽ cần phải nạp lại trang Web."))return;xState={};localStorage.clear();if(mode==1)localStorage.setItem("xDBFilesCfg",JSON.stringify(xDBFilesCfg));else xDBFilesCfg=null;window.location.reload(true)}}let dragDropList=function(_dragItemsQuery,_exchangeFnc){let dragItemsQuery=_dragItemsQuery;let dragItems=_dragItemsQuery["parent"].querySelectorAll(_dragItemsQuery["queryString"]);let exchangeFnc=null;if(_exchangeFnc)exchangeFnc=_exchangeFnc;function setExchangeFnc(_exchangeFnc){exchangeFnc=_exchangeFnc}function handleDragDrop(){let dragged;let cancelDefault=event=>{event.preventDefault();event.stopPropagation();return false};dragItems.forEach((_item,_idx)=>{_item.draggable=true;_item.setAttribute("attr-dragIdx",_idx);_item.ondragstart=event=>{dragged=_item;const _dt=event.dataTransfer;_item.classList.add("activeDragItem");_dt.dropEffect="move";_dt.effectAllowed="move";_dt.setData("text/plain",_item.getAttribute("attr-dragIdx"));const offsetX=0,offsetY=0;const createDragImage=function($node,x,y){const _ghostNode=document.createElement("div");const _node$pos=$node.getBoundingClientRect();_ghostNode.innerHTML="Dragging: "+$node.innerHTML;_ghostNode.style.top=_node$pos.top+"px";_ghostNode.style.left=_node$pos.left+"px";_ghostNode.style.width=$node.offsetWidth+"px";_ghostNode.style.height=$node.offsetHeight+"px";_ghostNode.classList.add("draggingGhostElem");document.body.appendChild(_ghostNode);setTimeout(_=>document.body.removeChild(_ghostNode));return _ghostNode};var ghostNode=createDragImage(dragged,event.pageX,event.pageY);_dt.setDragImage(ghostNode,offsetX,offsetY)};_item.ondragover=event=>{cancelDefault(event)};_item.ondrop=event=>{cancelDefault(event);if(dragged!=_item){let _fromIdx=event.dataTransfer.getData("text/plain"),_toIdx=_item.getAttribute("attr-dragIdx");_fromIdx=parseInt(_fromIdx),_toIdx=parseInt(_toIdx);if(exchangeFnc)exchangeFnc(_fromIdx,_toIdx);dragItemsQuery["parent"].querySelector(`[attr-dragIdx = "${_fromIdx}"]`).classList.add("beingPlay");if(_fromIdx>_toIdx){dragItems[_fromIdx].setAttribute("attr-dragIdx",_toIdx);for(let i=_toIdx;i<_fromIdx;i++){dragItems[i].setAttribute("attr-dragIdx",i+1)}}else{dragItems[_fromIdx].setAttribute("attr-dragIdx",_toIdx);for(let i=_fromIdx+1;i<=_toIdx;i++){dragItems[i].setAttribute("attr-dragIdx",i-1)}}dragItems=dragItemsQuery["parent"].querySelectorAll(dragItemsQuery["queryString"])}};_item.ondragenter=event=>{_item.classList.add("activeDropItem");cancelDefault(event)};_item.ondragleave=event=>{_item.classList.remove("activeDropItem");cancelDefault(event)};_item.ondragend=event=>{dragItems.forEach(_itm=>{_itm.classList.remove("activeDragItem","activeDropItem")})}})}return{exchangeFnc:setExchangeFnc,handleDragDrop:handleDragDrop}};function Setting(){let _dragObj=null;const xBookGrp=ssData.xBookGrp;function handleBufferBarChkbox(){let _chkHideBufferBar=document.getElementById("chkHideBufferBar");_chkHideBufferBar.checked=!xState.hideBufferBar;if(!_chkHideBufferBar.onclick)_chkHideBufferBar.onclick=_ev=>{xState.hideBufferBar=!_ev.target.checked;document.querySelector(".ap-buffer-bar").classList[xState.hideBufferBar?"add":"remove"]("elm-hidden");if(!xState.hideBufferBar){toast.depressToast(true);xAudio.onseeked()}}}function arrayMove(arr,fromIndex,toIndex){let element=arr[fromIndex];arr.splice(fromIndex,1);arr.splice(toIndex,0,element)}function objsEqual(obj1,obj2){if(obj1===obj2)return true;if(obj1 instanceof Date&&obj2 instanceof Date)return obj1.getTime()===obj2.getTime();if(!obj1||!obj2||typeof obj1!=="object"&&typeof obj2!=="object")return obj1===obj2;if(obj1.prototype!==obj2.prototype)return false;const keys=Object.keys(obj1);if(keys.length!==Object.keys(obj2).length)return false;return keys.every(k=>objsEqual(obj1[k],obj2[k]))}function handleCircleProgressChkbox(){let _chkDisableCircleProgress=document.getElementById("chkDisableCircleProgressButton");_chkDisableCircleProgress.checked=!xState.disableCircleProgressButton;if(!_chkDisableCircleProgress.onclick)_chkDisableCircleProgress.onclick=_ev=>{xState.disableCircleProgressButton=!_ev.target.checked;document.querySelectorAll("[svg-icon-name='PlayPauseIcon']").forEach(_elm=>{let _currSvg=_elm.getAttribute("href");if(_currSvg=="#icnSvgSpinWaiting")return;else{if(xState.disableCircleProgressButton){_currSvg=_currSvg.replace("Progress","")}else _currSvg+="Progress"}_elm.setAttribute("href",_currSvg)})}}let updateBKchkboxUI=_bkIndex=>{let _chkBookKit=document.getElementById(`chkbox-BK-${_bkIndex}`);if(!_chkBookKit)return;let allChkboxCount=0,checkedCount=0;document.querySelectorAll(`.modalPopupContent input[type='checkbox'][attr-bookkit-father='${_bkIndex}']`).forEach(_liChkBox=>{allChkboxCount++;if(_liChkBox.checked)checkedCount++});setChkboxState(_chkBookKit,checkedCount===0?0:checkedCount===allChkboxCount?1:2)};const lstBookTitlesSetting=document.getElementById("lstBookTitlesSetting");function bookSetList(_grpLine){let xbookGrp_grp=xBookGrp[_grpLine].grp;lstBookTitlesSetting.innerHTML="";let gStt=1;for(let j=0;j<xbookGrp_grp.length;j++){let bookGrpItem=xbookGrp_grp[j];let _numberOfBooks=bookGrpItem.books.reduce((_total,_currItem)=>{return _total+_currItem.bList.length},0);let _liGrpTitle=document.createElement("li");_liGrpTitle.innerHTML=`<input type="checkbox" ${bookGrpItem.bHidden?"":"checked"} role="switch" attr-BookKit-Father="${bookGrpItem.bookKit}" /><code data-rAlignGroup="itemOrder">${makeBrk(gStt++)}</code> <span>${bookGrpItem.label}<sup>${bookGrpItem.bookKit}</sup> ${makeBrk(_numberOfBooks)}</span>`;_liGrpTitle.setAttribute("attr-grpID",bookGrpItem.gId);lstBookTitlesSetting.appendChild(_liGrpTitle)}(function startDragNDrop(){let _exchangeFnc=function(f,t){f=parseInt(f),t=parseInt(t);let _itemDrag=lstBookTitlesSetting.querySelector("li[attr-dragidx='"+f+"']");let _itemDrop=lstBookTitlesSetting.querySelector("li[attr-dragidx='"+t+"']");if(f>t)lstBookTitlesSetting.insertBefore(_itemDrag,_itemDrop);else lstBookTitlesSetting.insertBefore(_itemDrag,_itemDrop.nextSibling);arrayMove(xbookGrp_grp,f,t);arrayMove(xState.grpCfg[_grpLine].grp,f,t);ssData.bookData.calculateBookKitRank(_grpLine)};_dragObj=dragDropList({parent:lstBookTitlesSetting,queryString:"li"},_exchangeFnc);_dragObj.handleDragDrop()})();const bookKitInfor=ssData.bookKitInfor;let bkCounts=bookKitInfor.map(_it=>0);xBookGrp[_grpLine].grp.forEach(_it=>bkCounts[_it.bookKit]++);let bookKitHTML="";let _stt=0;for(let i=0;i<bkCounts.length;i++){if(bkCounts[i]<=1)continue;let _bkIdx=bookKitInfor[i].bkIdx;bookKitHTML+=`<div class="bookKitNo${_stt++}"><input id="chkbox-BK-${_bkIdx}" type="checkbox" role="switch" attr-BookKit="${_bkIdx}" class="!text-[25px]"/> <label for="chkbox-BK-${_bkIdx}">${bookKitInfor[i].label}</label></div>`}let bookKitChkboxContainer=document.querySelector('[name="bookKitChkboxContainer"]');bookKitChkboxContainer.innerHTML=bookKitHTML;bookKitChkboxContainer.querySelectorAll("input[type='checkbox'][id*='chkbox-BK-']").forEach(chkBox=>{let _bkIndex=chkBox.getAttribute("attr-bookKit");updateBKchkboxUI(_bkIndex);let _bkIdx=chkBox.getAttribute("attr-bookKit");let _bookSetsChilds=document.querySelectorAll(`.modalPopupContent input[type='checkbox'][attr-bookkit-father='${_bkIdx}']`);let _clsName=chkBox.parentElement.classList[0];_bookSetsChilds.forEach(_liChkBox=>{_liChkBox.parentElement.classList.add(_clsName+"-Childs")});chkBox.onclick=function(evt){_bookSetsChilds.forEach(_liChkBox=>{_liChkBox.checked=chkBox.checked;let _gid=_liChkBox.parentNode.getAttribute("attr-grpid");xState.grpCfg[_grpLine].grp.find(_it=>{return _it.gId===_gid}).bHidden=!_liChkBox.checked;xBookGrp[_grpLine].grp.find(_it=>{return _it.gId===_gid}).bHidden=!_liChkBox.checked})}})}function bookKitList(_grpLine){const bookKitInfor=ssData.bookKitInfor;let _tempRank=bookKitInfor.map(_it=>{return{bkIdx:_it.bkIdx,rank:_it.grpRanks[_grpLine].rank}});let _tempBookKitInf=bookKitInfor.toSorted((x,y)=>_tempRank[x.bkIdx].rank-_tempRank[y.bkIdx].rank);bookKitInfor.forEach(_it=>_it.grpRanks[_grpLine].bsHidden=0);let xbookGrp_grp=xBookGrp[_grpLine].grp;for(let j=0;j<xbookGrp_grp.length;j++){let bookGrpItem=xbookGrp_grp[j];let _bkIdx=bookGrpItem.bookKit;if(bookGrpItem.bHidden)bookKitInfor[_bkIdx].grpRanks[_grpLine].bsHidden++}document.querySelector('[name="bookKitChkboxContainer"]').innerHTML="";lstBookTitlesSetting.innerHTML="";let gStt=1;for(let j=0;j<_tempBookKitInf.length;j++){let _bookKitItem=_tempBookKitInf[j];let _numberOfBooks=_bookKitItem.endIdx-_bookKitItem.startIdx+1;let _numOfBookset=_bookKitItem.grpRanks[_grpLine].bsCount;let _bkIdx=_bookKitItem.bkIdx;let _liGrpTitle=document.createElement("li");_liGrpTitle.innerHTML=`<input attr-bookKit="${_bkIdx}" type="checkbox" role="switch" checked /><code data-rAlignGroup="itemOrder">${makeBrk(gStt++)}</code> <span>${_bookKitItem.label}<sup>${_bkIdx}</sup> ${makeBrk(_numOfBookset)}<sup>${_numberOfBooks}</sup></span>`;_liGrpTitle.setAttribute("attr-bookKitIdx",_bkIdx);let _chkBookKit=_liGrpTitle.querySelector("input[type='checkbox']");let _ranksInfor=bookKitInfor[_bkIdx].grpRanks[_grpLine];_chkBookKit.title=`${_ranksInfor.bsHidden} out of ${_ranksInfor.bsCount} hidden`;setChkboxState(_chkBookKit,_ranksInfor.bsHidden===_ranksInfor.bsCount?0:_ranksInfor.bsHidden===0?1:2);lstBookTitlesSetting.appendChild(_liGrpTitle)}(function startDragNDrop(){let _exchangeFnc=function(f,t){f=parseInt(f),t=parseInt(t);let _itemDrag=lstBookTitlesSetting.querySelector("li[attr-dragidx='"+f+"']");let _fBKidx=_itemDrag.getAttribute("attr-bookKitIdx");let _itemDrop=lstBookTitlesSetting.querySelector("li[attr-dragidx='"+t+"']");let _tBKidx=_itemDrop.getAttribute("attr-bookKitIdx");if(f>t)lstBookTitlesSetting.insertBefore(_itemDrag,_itemDrop);else lstBookTitlesSetting.insertBefore(_itemDrag,_itemDrop.nextSibling);lstBookTitlesSetting.querySelectorAll("li").forEach((_it,_idx)=>{let _bkIdx=_it.getAttribute("attr-bookKitIdx");bookKitInfor[_bkIdx].grpRanks[_grpLine].rank=_idx});let _bsLocation=[];let _fxState=[],_fxBookGrp=[];let xstate_grpCfg=xState.grpCfg[_grpLine].grp;for(let j=0;j<xbookGrp_grp.length;j++){if(xbookGrp_grp[j].bookKit==_fBKidx)_bsLocation.push(j)}for(let j=_bsLocation.length-1;j>=0;j--){_fxBookGrp=_fxBookGrp.concat(xbookGrp_grp.splice(_bsLocation[j],1));_fxState=_fxState.concat(xstate_grpCfg.splice(_bsLocation[j],1))}_fxBookGrp=_fxBookGrp.reverse();_fxState=_fxState.reverse();if(f<t){let _tLastIdx=-1;for(let j=xbookGrp_grp.length-1;j>=0;j--){if(xbookGrp_grp[j].bookKit==_tBKidx){_tLastIdx=j;break}}xbookGrp_grp.splice(_tLastIdx+1,0,..._fxBookGrp);xstate_grpCfg.splice(_tLastIdx+1,0,..._fxState)}else{let _tFirstIdx=-1;for(let j=0;j<xbookGrp_grp.length;j++){if(xbookGrp_grp[j].bookKit==_tBKidx){_tFirstIdx=j;break}}xbookGrp_grp.splice(_tFirstIdx,0,..._fxBookGrp);xstate_grpCfg.splice(_tFirstIdx,0,..._fxState)}};_dragObj=dragDropList({parent:lstBookTitlesSetting,queryString:"li"},_exchangeFnc);_dragObj.handleDragDrop()})()}function addBookSettingTab(){let selPopupBookGroup=document.getElementById("selPopupBookGroup");let _chkShowBookKit=document.getElementById("chkShowBookKit");if(!_chkShowBookKit.onclick)_chkShowBookKit.onclick=_=>{selPopupBookGroup.onchange();let _chkboxLabel=_chkShowBookKit.nextElementSibling;_chkboxLabel.innerText=_chkShowBookKit.checked?"Book Kit view":"Book Set view";let _tooltipTxt=_chkShowBookKit.checked?"Danh sách hiển thị phía dưới là Book Kit. Mỗi item có dạng '[2] Harry Potter^1 [1]^7', trong đó:\n[2]: stt của book Kit Harry Potter.\n^1: id của Book Kit.\n[1]: số Book Set của Book Kit này.\n^7: số books của Book Kit này.\n\nChú ý: Trong chế độ Book Kit, nếu thay đổi thứ tự một Book Kit, toàn bộ Book Set của Book Kit đó sẽ được chuyển cùng nhau, có thể làm mất thứ tự các Book Set bị xen kẽ trong Book Set của các Book Kit khác.":"Danh sách hiển thị phía dưới là Book Set. Mỗi item có dạng '[2] Harry Potter^1 [7]', trong đó:\n[2]: stt của Book Set Harry Potter.\n^1: id của Book Kit cha.\n[7]: số books của Book set này.";_chkboxLabel.setAttribute("data-tooltip",_tooltipTxt)};(function(){let _defGrpLabels=xBookGrp.map(_=>{return _.grpWay});selPopupBookGroup.innerHTML="";for(let i=0;i<_defGrpLabels.length;i++){let opt=document.createElement("option");opt.value=i;opt.innerHTML=makeBrk(pad(i+1,2))+" "+_defGrpLabels[i];selPopupBookGroup.appendChild(opt)}})();selPopupBookGroup.selectedIndex=xState.grpLine;if(!selPopupBookGroup.onchange)selPopupBookGroup.onchange=_=>{let newGrpIdx=selPopupBookGroup.selectedIndex;if(_chkShowBookKit.checked)bookKitList(newGrpIdx);else bookSetList(newGrpIdx);SddDropdown.prototype.rightAlignElems(lstBookTitlesSetting,"li")};_chkShowBookKit.onclick();lstBookTitlesSetting.addEventListener("click",_showhideBookChkboxClickDelegation);function _showhideBookChkboxClickDelegation(evt){let _target=evt.target;if(!_target.matches(`input[type="checkbox"][role="switch"]:is([attr-bookkit-father], [attr-bookKit-father])`))return;let _grpLine=document.getElementById("selPopupBookGroup").selectedIndex;let xbookGrp_grp=xBookGrp[_grpLine].grp;let xState_grp=xState.grpCfg[_grpLine].grp;if(_target.hasAttribute("attr-bookKit-father")){let _bkIndex=_target.getAttribute("attr-BookKit-Father");updateBKchkboxUI(_bkIndex);let _gid=_target.parentNode.getAttribute("attr-grpID");xbookGrp_grp.find(_it=>{return _it.gId===_gid}).bHidden=!_target.checked;xState_grp.find(_it=>{return _it.gId===_gid}).bHidden=!_target.checked}if(_target.hasAttribute("attr-bookKit")){let _bkIdx=parseInt(_target.getAttribute("attr-bookKit"));if(isNaN(_bkIdx))return;for(let j=0;j<xbookGrp_grp.length;j++){let bookGrpItem=xbookGrp_grp[j];if(bookGrpItem.bookKit==_bkIdx){bookGrpItem.bHidden=!_target.checked;let _gid=bookGrpItem.gId;xState_grp.find(_it=>{return _it.gId===_gid}).bHidden=!_target.checked}}}}}function addToastSettingControl(){let toastSettingDiv=document.querySelector('div[name="Toast-Setting"]');if(!toastSettingDiv.hasAttribute("controlDeployed"))toastSettingDiv.setAttribute("controlDeployed","done");else return;if(!xState.toastCfg)xState.toastCfg={};let xToastCfg=xState.toastCfg;function makeToastRadios(_cfgName,_choiceLabel,_checkedIdx,_innerHTMLOnly){let _resHtml="";let _attrStr="toastSetting_"+_cfgName;_checkedIdx=_checkedIdx===undefined?-1:_checkedIdx;if(!_innerHTMLOnly)_resHtml+=`<div class="fancyRadioContainer" name="${_attrStr}_container">`;_resHtml+=`<div style="font-weight:bold;color:darkblue" data-checkeditem='${_checkedIdx}'>${_choiceLabel}: </div>`;let i=-1;for(let _item of["Random"].concat(toast.toastChoices[_cfgName+"s"])){let _labelText=_item;if(_cfgName=="theme")_labelText=(_item.match(/\-(.+)\-/)||["",_item])[1].toProperCase();let _otherFancyLabelCls="";if(i==-1)_otherFancyLabelCls="fancyRadioLabelPurple";else{if(_cfgName=="mode"&&i==0)_otherFancyLabelCls="fancyRadioLabelBlue";if(_cfgName=="animation"){let _possDirs=toast.toastChoices.posssibleAnimDirs(_labelText,"TOP-RIGHT");if(!_possDirs.dir){_otherFancyLabelCls="fancyRadioLabelBlue"}else if(_labelText.indexOf("--i")>-1)_otherFancyLabelCls="fancyRadioLabelGold";_labelText=_possDirs.anim.toProperCase()}}_resHtml+=`<input type="radio" id="${_attrStr}_${_item}" name="${_attrStr}" data-aIndex="${i}" data-aChoice="${_cfgName}" class="fancyRadioHidden" value="${_item}" ${_checkedIdx==i?"checked":""}> <label for="${_attrStr}_${_item}" class="fancyRadioLabel ${_otherFancyLabelCls}">${_labelText}</label>`;i++}if(!_innerHTMLOnly)_resHtml+=`</div>`;return _resHtml}let _divHtml="";_divHtml+=makeToastRadios("theme","Tông màu Toast",xToastCfg.theme);_divHtml+=makeToastRadios("mode","Vị trí Toast",xToastCfg.mode);_divHtml+=makeToastRadios("animation","Kiểu animations",xToastCfg.animation);toast.toastChoices["animDirs"]=[];_divHtml+=makeToastRadios("animDir","Chiều animations",xToastCfg.animDir);toastSettingDiv.innerHTML=_divHtml;let[_modeChoiceDivWrap,_animChoiceDivWrap,_animDirChoiceDivWrap]=["mode","animation","animDir"].map(_choice=>document.querySelector(`[name="toastSetting_${_choice}_container"]`));toastSettingDiv.addEventListener("click",function toastSettingHandler(evt){let _target=evt.target;if(_target.tagName!=="INPUT"&&_target.type!="radio"&&!_target.classList.contains("fancyRadioHidden"))return;radioHandle(_target);evt.stopPropagation()});[_modeChoiceDivWrap,_animChoiceDivWrap].forEach(_wrapper=>{let _checkedRadio=_wrapper.querySelector('input[type="radio"]:checked');if(_checkedRadio)_checkedRadio.click()});function radioHandle(radioElem){let _cfgName=radioElem.dataset.achoice;let _idx=parseInt(radioElem.dataset.aindex);if(_idx==-1)delete xToastCfg[_cfgName];else xToastCfg[_cfgName]=_idx;const _container=radioElem.parentElement;_container.setAttribute("data-checkedItem",_idx);if(parseInt(_container.dataset.checkeditem)!==-1)radioElem.parentElement.querySelectorAll("label.fancyRadioLabel.fancyRadioLabelRandomChoose").forEach(_lbl=>_lbl.classList.remove("fancyRadioLabelRandomChoose"));if(_cfgName=="mode"){if(_idx==-1||_idx==0){fancyRadioAnimWrapperUI(true,_idx==0?null:-1);makeAnimDirChoices([],true,_idx==0?null:-1)}else{let _lastAnimIdx=_animChoiceDivWrap.dataset.checkeditem??_animChoiceDivWrap.querySelector('input[type="radio"]:checked')?.dataset.aindex??-1;fancyRadioAnimWrapperUI(false,_lastAnimIdx);let _checkedAnimRadio=_animChoiceDivWrap.querySelector('input[type="radio"]:checked');_checkedAnimRadio&&_checkedAnimRadio.click()}}if(_cfgName=="animation"){let _possDirs=toast.toastChoices.posssibleAnimDirs(radioElem.value,_modeChoiceDivWrap.querySelector('input[type="radio"]:checked').value);if(_possDirs.dir){toast.toastChoices["animDirs"]=_possDirs.dir;makeAnimDirChoices(toast.toastChoices["animDirs"],false,xToastCfg["animDir"]??-1)}else{makeAnimDirChoices([],true,_idx==-1?-1:null)}}function fancyRadioAnimWrapperUI(_disabled,_checkedIdx){_animChoiceDivWrap.classList.toggle("setting-elm-disabled",_disabled);let _checkedRadio=_animChoiceDivWrap.querySelector('input[type="radio"]:checked');if(_checkedRadio)_checkedRadio.checked=false;if(_checkedIdx!==null){let _newCheckedRadio=_animChoiceDivWrap.querySelector(`input[data-aindex="${_checkedIdx}"]`);if(_newCheckedRadio)_newCheckedRadio.checked=true}}function makeAnimDirChoices(_animDirArray,_disabled,_checkedIdx){if(_checkedIdx==-1||_checkedIdx==null)delete xToastCfg.animDir;else xToastCfg.animDir=_checkedIdx;toast.toastChoices["animDirs"]=_animDirArray;_animDirChoiceDivWrap.classList.toggle("setting-elm-disabled",_disabled);_animDirChoiceDivWrap.innerHTML=makeToastRadios("animDir","Chiều animations",_checkedIdx,true)}}}function markToastRandomChoose(){const _toastChoices=toast.getToastConfig();const _toastCfg=xState?.toastCfg??{};const _markLabel=(_container,_choiceIdx)=>{_container.querySelectorAll("label.fancyRadioLabel.fancyRadioLabelRandomChoose").forEach(_lbl=>_lbl.classList.remove("fancyRadioLabelRandomChoose"));const _markedLabel=_container.querySelector(`input[type="radio"].fancyRadioHidden[data-aindex="${_choiceIdx}"] + label.fancyRadioLabel`);if(_markedLabel)_markedLabel.classList.add("fancyRadioLabelRandomChoose")};const _cfgChoices=["theme","mode","animation"];const _toastChoicesPropName=["theme","mode","animMode"];_cfgChoices.forEach((_choice,i)=>{if(!_toastCfg.hasOwnProperty(_choice)||_toastCfg[_choice]===-1)_markLabel(document.querySelector('div.fancyRadioContainer[name="toastSetting_'+_choice+'_container"]'),_toastChoices[_toastChoicesPropName[i]])})}function addJsDatabaseFileReport(){const statisticsHTML=(_dbSummary,_verbose=false)=>{const _VERB=_verbose?[" bộ sách. "," quyển sách. "," nhóm chương. ",window.innerWidth<500?" chương.":" chương sách."]:new Array(4).fill("");const _SEPARATOR=window.innerWidth<300?"/ ":makeSvgFromSprite("icnSvgListenTime",{"class":"svg-img-infor"});return`<dfn style="font-size:.85em;font-weight:600"> ${_dbSummary.bookSetsCount&&_dbSummary.bookSetsCount!==_dbSummary.booksCount?makeSvgFromSprite("icnSvgBookSets",{"class":"svg-img-infor"})+_dbSummary.bookSetsCount+_VERB[0]:""} ${makeSvgFromSprite("icnSvgBooks",{"class":"svg-img-infor"})}${_dbSummary.booksCount}${_VERB[1]} ${_dbSummary.chapGroupsCount?makeSvgFromSprite("icnSvgChapGroupIcon",{"class":"svg-img-infor"})+commaNum(_dbSummary.chapGroupsCount)+_VERB[2]:""} ${makeSvgFromSprite("icnSvgChapters",{"class":"svg-img-infor"})}${commaNum(_dbSummary.chaptersCount)}${_VERB[3]}${_verbose?"<br/>":""} ${makeSvgFromSprite("icnSvgDuration",{"class":"svg-img-infor"})}${toHhMmSs(_dbSummary.totalDur,_verbose?2:0)} ${_SEPARATOR}<var attr-duration="${_dbSummary.totalDur}">${toHhMmSs(_dbSummary.totalDur/xState.speed,_verbose?1:0)}</var></dfn>`};function addJsDataFilesDetails(_liElem,_failCount){const _jsDBName=_liElem.getAttribute("attr-Data-jsFile-Name");const _divBookDetailElem=_liElem.querySelector("div.detailContent");let _jsDBFile=ssData.jsDBFiles.find(_dbFile=>_dbFile.dbName==_jsDBName);if(!_jsDBFile||!window[_jsDBName]){_divBookDetailElem.innerHTML=`<h2>File <b style='color:#9f5c28'>${_jsDBName}.js</b> hoặc Cơ sở dữ liệu <b style='color:darkblue'>${_jsDBName}</b> không tồn tại.</h2>`+(_failCount==undefined?``:`<div style="column-span: all">Database ${_jsDBName} đã load không thành công ${_failCount} lần. Nếu vẫn muốn nạp lại file này, hãy chuyển nút checkbox thành 'Fresh Load'</div>`);_liElem.appendChild(_divBookDetailElem);return}let _ulInnerHtml=[];const _totalSummary=_jsDBFile.dbs.reduce((_acc,_dbName)=>{const _bkRawData=window[_jsDBName][_dbName];const _bkSummary=BookData.prototype.booksStatistics(_bkRawData.books);let _bookTitles=[],titleCounter={},_bookSetsCount=0;_bkRawData.books.forEach(_book=>{let _idx=_bookTitles.indexOf(_book.title);if(_idx==-1){_bookTitles.push(_book.title);_bookSetsCount++}else{titleCounter[_idx]=titleCounter[_idx]??1;titleCounter[_idx]++}});_bkSummary.bookSetsCount=_bookSetsCount;_acc.booksCount+=_bkSummary.booksCount;_acc.chapGroupsCount+=_bkSummary.chapGroupsCount;_acc.chaptersCount+=_bkSummary.chaptersCount;_acc.totalDur+=_bkSummary.totalDur;_acc.bookSetsCount+=_bookSetsCount;let _ulItemHtml=`<p class='dbFileBookList'>`+`<i>${_bkRawData.meta.name}</i> `+statisticsHTML(_bkSummary)+_bookTitles.map((_bookTit,_idx)=>`<code>${_bookTit}</code>${titleCounter[_idx]?" ["+titleCounter[_idx]+"]":""}`).join("")+"</p>";_ulInnerHtml.push(_ulItemHtml);return _acc},{bookSetsCount:0,booksCount:0,chapGroupsCount:0,chaptersCount:0,totalDur:0});_divBookDetailElem.innerHTML=_ulInnerHtml.join("");_liElem.appendChild(_divBookDetailElem);return _totalSummary}function showingDataReportFromDB(_jsDBName){const _jsFileItem=xDBFilesCfg.toLoad.find(_item=>_item.dbName===_jsDBName);let _liDBreport=document.querySelector(`[attr-data-jsfile-name="${_jsDBName}"]`);if(!_liDBreport){_liDBreport=document.createElement("li");_liDBreport.setAttribute("attr-Data-jsFile-Name",_jsDBName);let lstJsFileDataSetting=document.getElementById("lstJsFileDataSetting");lstJsFileDataSetting.appendChild(_liDBreport)}let _version=_jsFileItem.dbUrl.match(/v\=(\d+)/)?.[0]??"";_version=_version==""?"":" ("+_version+", "+(_jsFileItem.hasOwnProperty("edt")?"Edt="+_jsFileItem.edt+", ":"")+_jsFileItem.failCount+")";_liDBreport.innerHTML=` <div> <details open=""><summary><span>${_jsDBName}${window.innerWidth>600?_version:""}</span><br/><samp name="dbSummary"></samp></summary></details> <span><input type="checkbox" role="switch" id="jsDataFileChkbox_${_jsDBName}" attr-chkbox-Data-jsFile="${_jsFileItem.fileNo}"/> <label for="jsDataFileChkbox_${_jsDBName}"></label></span> </div> <div class="detailContent"></div>`;setChkboxState(_liDBreport.querySelector("input[type='checkbox']"),_jsFileItem.loadMode);if(_jsFileItem.loadMode>0||window[_jsDBName]&&window[_jsDBName].constructor==={}.constructor){const _dbSummary=addJsDataFilesDetails(_liDBreport);if(_dbSummary){_liDBreport.querySelector('[name="dbSummary"]').innerHTML=statisticsHTML(_dbSummary)}}else{if(_jsFileItem.failCount>=10){addJsDataFilesDetails(_liDBreport,_jsFileItem.failCount);return}DBFiles.loadJS({allowReload:true,freshLoad:false,url:_jsFileItem.dbUrl,extAttr:{jsDBName:_jsDBName,loadMode:_jsFileItem.loadMode}}).then(_prom=>{const _jsDBName=_prom.extAttr.jsDBName;if(typeof window[_jsDBName]=="object")DBFiles.deployDB.call(window[_jsDBName],_jsDBName,_prom.extAttr.loadMode);const _dbSummary=addJsDataFilesDetails(_liDBreport);if(_dbSummary){_liDBreport.querySelector('[name="dbSummary"]').innerHTML=statisticsHTML(_dbSummary)}const _dbFileCfgItm=xDBFilesCfg.toLoad.find(_item=>_item.dbName==_jsDBName);if(_dbFileCfgItm)_dbFileCfgItm.failCount=0;window[_jsDBName]=undefined})["catch"](err=>{addJsDataFilesDetails(_liDBreport);const _jsDBName=err.target.extAttr.jsDBName;const _dbFileCfgItm=xDBFilesCfg.toLoad.find(_item=>_item.dbName==_jsDBName);toast.showToast(`Không tải được database ${err.target.src}`,toast.ToastType.Error);if(_dbFileCfgItm){if(typeof _dbFileCfgItm.failCount=="number")_dbFileCfgItm.failCount++;else _dbFileCfgItm.failCount=1}})}}let lstJsFileDataSetting=document.getElementById("lstJsFileDataSetting");lstJsFileDataSetting.querySelectorAll("li.beingPlay").forEach(_li=>_li.classList.remove("beingPlay"));if(!lstJsFileDataSetting.hasAttribute("controlDeployed"))lstJsFileDataSetting.setAttribute("controlDeployed","done");else return;addJsDatabaseFileReport.prototype.showingDataReportFromDB=showingDataReportFromDB;lstJsFileDataSetting.innerHTML="";xDBFilesCfg.toLoad.forEach(_toLoadItem=>{const _jsDBName=_toLoadItem.dbName;showingDataReportFromDB(_jsDBName)});const _wholeStatistics=BookData.prototype.booksStatistics(ssData.xData);_wholeStatistics.bookSetsCount=ssData.xBookGrp[0].grp.reduce((_acc,_grp)=>_acc+=_grp.books.length,0);const _DBStatisticselem=document.querySelector('[name="DBStatistics"]');const _nextCheckText=window.innerWidth>500?"Lần tự động kiểm tra phiên bản DB tiếp theo: ":"Next auto-check for new DBs edition: ";_DBStatisticselem.innerHTML=statisticsHTML(_wholeStatistics,true)+`<br/><dfn name='lastCheckDBUpdateStatus'>${_nextCheckText}<svg class="!text-[15px] button-svg-img"><use href="#icnSvgCheckDBsUpdate"/></svg> <mark style='color:darkred' data-tooltip='Khoảng cách giữa hai lần tự động kiểm tra là ${toHhMmSs(_DEFAULT_CFG.cDBFilesEdt.checkEdtDelay,2)}.&#10Bấm vào đây để đóng/mở tất cả thông tin sách cho từng CSDL.'></mark></dfn>`;const _checkDBUpdateElem=_DBStatisticselem.querySelector('dfn[name="lastCheckDBUpdateStatus"] > mark');_checkDBUpdateElem.addEventListener("click",evt=>{const _lstJsFileDataSetting=document.getElementById("lstJsFileDataSetting");const _allReports=_lstJsFileDataSetting.querySelectorAll("details:has(> summary)");let _openCount=0;_allReports.forEach(_dtl=>{if(_dtl.open)_openCount++});const _tobeExpanded=_openCount<_allReports.length/2;_allReports.forEach(_dtl=>_dtl.open=_tobeExpanded)});function updateLastDBsEditionCheck(event){const _timeDateStr=new Date(ssData.lastDBCheck+1e3*_DEFAULT_CFG.cDBFilesEdt.checkEdtDelay).toLocaleString("vi-VI");_checkDBUpdateElem.textContent=_timeDateStr}window.addEventListener("DbsFileGotNewEditionEvent",updateLastDBsEditionCheck);updateLastDBsEditionCheck();lstJsFileDataSetting.addEventListener("click",evt=>{let _target=evt.target;evt.stopPropagation();if(_target.matches(`input[type="checkbox"][attr-chkbox-Data-jsFile]`)){let _currVal=parseInt(_target.dataset.stateVal??0);const _stateArr=[0,2,1];let _newVal=_stateArr[(_stateArr.findIndex(_st=>_st==_currVal)+1)%3];setChkboxState(_target,_newVal);const _fileNo=_target.getAttribute("attr-chkbox-Data-jsFile");if(_fileNo==undefined)return;if(_newVal==0){const _allOtherCheckboxes=lstJsFileDataSetting.querySelectorAll(`input[type="checkbox"][attr-chkbox-Data-jsFile]:not([attr-chkbox-Data-jsFile="${_fileNo}"])`);let _DBLoadCounter=0;_allOtherCheckboxes.forEach(_chkBox=>{if(parseInt(_chkBox.dataset.stateVal??0)!=0)_DBLoadCounter++});if(_DBLoadCounter==0){toast.showToast("Phải có ít nhất một CSDL đặt chế độ Load",toast.ToastType.Error);setChkboxState(_target,_currVal);return}}let toLoadArr=xDBFilesCfg.toLoad;toLoadArr.find(_lm=>_lm.fileNo==_fileNo).loadMode=_newVal}});(function startDragNDrop(){let _exchangeFnc=function(f,t){f=parseInt(f),t=parseInt(t);let _itemDrag=lstJsFileDataSetting.querySelector("li[attr-dragidx='"+f+"']");let _itemDrop=lstJsFileDataSetting.querySelector("li[attr-dragidx='"+t+"']");if(f>t)lstJsFileDataSetting.insertBefore(_itemDrag,_itemDrop);else lstJsFileDataSetting.insertBefore(_itemDrag,_itemDrop.nextSibling);arrayMove(xDBFilesCfg.toLoad,f,t)};_dragObj=dragDropList({parent:lstJsFileDataSetting,queryString:"li"},_exchangeFnc);_dragObj.handleDragDrop()})()}function _handyCheckDBsEdition(_showFailedCheck=false){ssData.lastDBCheck=Date.now();const _radioTabJsFileDataSetting=document.getElementById("radioTabJsFileDataSetting");const _isTabActive=Boolean(_radioTabJsFileDataSetting.nextElementSibling.nextElementSibling.offsetParent);function _promiseCallback(_scriptElm){const _extAttr=_scriptElm.extAttr;const _jsDBName=_extAttr.jsDBName;if(_isTabActive)addJsDatabaseFileReport.prototype.showingDataReportFromDB(_jsDBName);if(_extAttr.loadMode===DBFiles.LMODE.noShow)window[_jsDBName]=undefined}function _allSettleCallback(){const _radioTabJsFileDataSetting=document.getElementById("radioTabJsFileDataSetting");if(_isTabActive)delete _radioTabJsFileDataSetting.dataset.beenActive}DBFiles.loadJS({url:"config.js",allowReload:true}).then(_ret=>{let _DBsHasNewEdition=DBFiles.importDBfromFiles(1,_promiseCallback,_allSettleCallback);if(_showFailedCheck&&_DBsHasNewEdition.length==0)toast.showToast("Cơ sở dữ liệu hiện có đã là mới nhất.",toast.ToastType.Infor,{duration:1e4});window.dispatchEvent(new CustomEvent("DbsFileGotNewEditionEvent",{detail:{updateDBs:_DBsHasNewEdition,caller:"Setting.handyCheckDBsEdition"}}))})["catch"](err=>{console.error(err);if(_showFailedCheck)toast.showToast("Không nạp được file config.js.",toast.ToastType.Error,{duration:1e4})})}function addListeningHistory(){let _hist=xState.history;let _xAudioCurrBook=xAudio.getAttribute("attr-book"),_xAudioCurrChap=parseInt(xAudio.getAttribute("attr-chap"));let _xAudioCurrTime=xAudio.currentTime;if(isNaN(_xAudioCurrTime))_xAudioCurrTime=0;if(!_hist.books.hasOwnProperty(_xAudioCurrBook))_hist.books[_xAudioCurrBook]={_xAudioCurrChap:_xAudioCurrTime,lc:_xAudioCurrChap,urlLine:0};else _hist.books[_xAudioCurrBook][_xAudioCurrChap]=_xAudioCurrTime;const _lhWrapperElm=document.querySelector("#ListeningHistoryWrapper");if(_hist.hisList.length==0){_lhWrapperElm.textContent="No history yet";return null}let _bookListenedIds=Object.keys(_hist.books);let makeSvgStr=_type=>{let _iconNames=["icnSvgBooks","icnSvgChapters","icnSvgMaleAuthor","icnSvgMicrophone","icnSvgDuration"];let _inlineStyle="",_class="svg-img-infor";return`${makeSvgFromSprite(_iconNames[_type],{"class":_class,style:_inlineStyle})}`};let _bookStt=0;const _makeTreeLi=_bookId=>{const bData=ssData.bookData.findBookFromId(_bookId);if(!bData){return""}const _histBook=_hist.books[_bookId];const _SEP_CHAR="&hairsp;/&hairsp;";const _elmId="BLH_"+_bookId;let _liLabel=`<b>${++_bookStt}</b> ${makeSvgStr(0)}<span class='histTitle' style='font-weight:600'>${bData.title}</span> [${_bookId}] ${makeSvgStr(1)}${bData.statistics.chaptersCount}${_SEP_CHAR}${toHhMmSs(bData.statistics.totalDur)} ${makeSvgStr(2)}${bData.author} ${makeSvgStr(3)}${bData.mc}`;let _chapSttList=Object.keys(_histBook).filter(_attr=>_attr.match(/^\d+$/));let _chapsLiHtml=_chapSttList.map(_chap=>{_chap=parseInt(_chap);const _chapData=bData.parts[_chap-1];let _chapTit=_chapData.tit;if(!_chapTit||_chapTit.includes(ssData.wildCartStr)){BookData.prototype.generateWCLinks(_bookId);_chapTit=_chapData.tit}let _chapLiHtml=`<li class='chapter_li ${_chap==_histBook.lc?"last-playing-chapter":""}' data-bookId='${_bookId}' data-chapter='${_chap}'> <label> ${makeSvgStr(1)}<code data-rAlignGroup='chapStt'>${_chap}</code> ${makeSvgStr(4)}<b data-rAlignGroup='listenedTime'>${toHhMmSs(_histBook[_chap])}</b>/<code data-rAlignGroup='chapTime'>${_chapData.dur}</code> <span class='histTitle'>⏵&thinsp;${_chapTit}</span> </label></li>`;return _chapLiHtml}).join(" ");let _html=`<li class="parent_li ${_bookId==xState.lb?"last-playing-book":""}" data-bookid='${_bookId}'> <input type="checkbox" id="${_elmId}" checked /> <label for="${_elmId}">${_liLabel}</label> <ul>${_chapsLiHtml}</ul></li>`;return _html};let _booksLiHtml=_hist.hisList.toReversed().map(_bookId=>_makeTreeLi(_bookId)).join(" ");_lhWrapperElm.innerHTML=`<ul> <li class="parent_li"> <input type="checkbox" id="outer_listening_history" checked /> <label for="outer_listening_history">Lịch sử nghe sách</label> <ul>${_booksLiHtml}</ul> </ul>`;_lhWrapperElm.querySelectorAll("li.parent_li > ul :has(> li.chapter_li)").forEach(_ulChap=>SddDropdown.prototype.rightAlignElems(_ulChap,"li.chapter_li > label"));const centerParentLiTreeLine=function(){let _ParLi_Padding_Top=0;_lhWrapperElm.querySelectorAll("li.parent_li:not(.treeview > ul > li.parent_li)").forEach(_parentLi=>{if(_ParLi_Padding_Top==0)_ParLi_Padding_Top=parseFloat(_parentLi.css("padding-top"));const _labelElem=_parentLi.querySelector("label[for]");const _label_height=_labelElem.getBoundingClientRect().height;if(_label_height>0)_parentLi.style.setProperty("--horizon-lines-top",_ParLi_Padding_Top+_label_height/2+"px")})};setTimeout(centerParentLiTreeLine,500);if(!_lhWrapperElm.dataset.loaded){_lhWrapperElm.dataset.loaded=true;document.querySelector("#elmHistoryClear").onclick=evt=>{historyCls.historyClear();addListeningHistory()};const _chkShowHideAllBooksDetail=document.querySelector("#chkShowHideAllHistChapDetails");_chkShowHideAllBooksDetail.onclick=evt=>{let _isChecked=_chkShowHideAllBooksDetail.checked;_lhWrapperElm.querySelectorAll('li[data-bookid] > input[type="checkbox"][id^="BLH_"]').forEach(_bookChkbx=>_bookChkbx.checked=_isChecked)};_lhWrapperElm.addEventListener("click",evt=>{const _target=evt.target;if(_target.matches(`input[type="checkbox"][id^="BLH_"]`)){const _allBookHistCheckboxes=_lhWrapperElm.querySelectorAll('li[data-bookid] > input[type="checkbox"][id^="BLH_"]');let _chkCount=0,_chkTotal=_allBookHistCheckboxes.length;_allBookHistCheckboxes.forEach(_bookChkbx=>{if(_bookChkbx.checked)_chkCount++});setChkboxState(document.getElementById("chkShowHideAllHistChapDetails"),_chkCount==0?0:_chkCount==_chkTotal?1:2)}const _liElem=_target.parentElement;if(_target.tagName=="LABEL"&&_liElem&&_liElem.classList.contains("chapter_li")){const _bookLi=_target.closest("li.parent_li");if(!_liElem.classList.contains("last-playing-chapter")){const _lastPlayingChap=_bookLi.querySelector("li.last-playing-chapter");_lastPlayingChap&&_lastPlayingChap.classList.remove("last-playing-chapter");_liElem.classList.add("last-playing-chapter")}const _loadingBookId=_liElem.dataset.bookid,_loadingChapterNum=_liElem.dataset.chapter;_xAudioCurrBook=xAudio.getAttribute("attr-book");if(_xAudioCurrBook===_loadingBookId){changeChap(_loadingChapterNum)}else{const _lastPlayedBookELm=_lhWrapperElm.querySelector("li.last-playing-book");_lastPlayedBookELm&&_lastPlayedBookELm.classList.remove("last-playing-book");_bookLi.classList.add("last-playing-book");_hist.books[_loadingBookId].lc=parseInt(_loadingChapterNum);historyCls.historyGo(_loadingBookId)}}if(_target.tagName=="LABEL"&&_liElem&&_liElem.classList.contains("parent_li")){if(evt.offsetX<-3){const _bookId=_liElem.dataset.bookid;if(_bookId==xState.lb){let _histBook=_hist.books[_bookId];const _currChap=_histBook.lc;Object.keys(_histBook).filter(_attr=>_attr.match(/^\d+$/)&&_attr!=_currChap).forEach(_chap=>delete _histBook[_chap]);_histBook.lc=_currChap;_liElem.querySelectorAll("ul > li.chapter_li:not(.last-playing-chapter)").forEach(_subLi=>_subLi.remove())}else{delete _hist.books[_bookId];const _histIdx=_hist.hisList.findIndex(_book=>_book==_bookId);if(_histIdx>-1){_hist.hisList.splice(_histIdx,1);if(_hist.currHis>_histIdx)_hist.currHis--}historyCls.prototype.buttonAppeance();_liElem.remove()}toast.showToast(`Đã xóa khỏi lịch sử nghe sách các chương đang nghe${_bookId==xState.lb?" (ngoài chương đang được phát)":""} của cuốn sách '${_target.querySelector(".histTitle").textContent}'.`,toast.ToastType.Warning);evt.preventDefault()}}evt.stopPropagation()})}}function showHotKeys(){const hkWrapper=document.querySelector('div[name="hotkeysSettingWrapper"]');const _mapKey2Img=(_key,_ignoreMap=false)=>{_key=_key.trim().replace(/^Key/,"");if(_ignoreMap)return _key;const _keysMap=[{key:"NumpadAdd",img:"Numpad+"},{key:"NumpadSubtract",img:"Numpad-"}];const _findKey=_keysMap.findIndex(k=>k.key==_key);if(_findKey>-1)return _keysMap[_findKey].img;else return _key};const breakKeys=(keyString,keySeparator="<br/>",_ignoreModifierKeys=false)=>{if(!Array.isArray(keyString))keyString=keyString.split(",");return keyString.map(keys=>keys.trim().split("+").map(key=>`<kbd${_ignoreModifierKeys?' class="ignoreModifierKeys"':""}>${_mapKey2Img(key)}</kbd>`).join(" + ")).join(keySeparator)};const listHotKeys=(hkCollection,keySeparator="<br/>")=>{let _html=hkCollection.map(hk=>`<samp data-task="${hk.task}">${breakKeys(hk.kCode,keySeparator,hk.ignoreModifier)}</samp><label>${hk.desc}</label>`);return _html.join("")};hkWrapper.innerHTML=`<div> <fieldset style="grid-row: span 3;align-self: stretch;"> <legend>Phím tắt cho Search–Dropdown</legend> <span class="commonGuide">— Trong danh mục các <b>tựa sách / chương sách</b>, kết hợp phím <samp modifier-key="true">${breakKeys(ssData.sddBookTitlesList.settings.makeSelectKey)}</samp> / <samp modifier-key="true">${breakKeys(ssData.sddChaptersList.settings.makeSelectKey)}</samp> (theo thứ tự) với các phím thay đổi mục (option) để phát ngay <b>tựa sách / chương sách</b>.</span><span class="commonGuide">— Chuyển chế độ tìm kiếm '<b>không dấu</b>' hoặc '<b>nguyên dấu</b>' bằng cách bấm phím tắt hoặc bấm nút lệnh <object style='display: inline-block; width: 20px; height: 20px; border: 1px solid; border-radius:4px;padding: 2px;'>${ssData.sddBookTitlesList.rootElement.querySelector(".search-diacritics-option-button > svg").outerHTML}</object> ở bên phải ô tìm kiếm.<br/>— App vẫn tìm kiếm trong tiêu đề phụ (nếu có) ngay cả khi nó bị ẩn (nút lệnh <object style='display: inline-block; width: 20px; height: 20px; border: 1px solid; border-radius:4px;padding: 2px;'>${ssData.sddBookTitlesList.rootElement.querySelector(".toggle-extra-title-button > svg").outerHTML}</object>).<br/>— App luôn luôn tìm kiếm không phân biệt chữ hoa-thường (case-insensitive). Tuy nhiên, tùy thuộc các chữ trong xâu tìm kiếm, ta có các cách tìm khác nhau:<br/>&emsp;⨁ Nếu tất cả các chữ trong xâu tìm kiếm đều là chữ hoa, chế độ tìm kiếm sẽ theo '<b>Chữ cái đầu tiên</b>' của các từ liên tiếp. Ví dụ: So sánh tìm <kbd>TĐ</kbd> trong chế độ tìm dấu nêu trên.<br/>&emsp;⨁ Nếu tất cả các chữ trong xâu tìm kiếm đều là chữ thường, chế độ tìm kiếm sẽ là tìm '<b>Cụm từ</b>' (như indexOf). Ví dụ: So sánh tìm <kbd>đại kinh</kbd> theo một trong hai chế độ tìm dấu. Trong chế dộ 'không dấu', so sánh kết quả tìm <kbd>Tinh do</kbd> vs <kbd>tinh do</kbd>; <kbd>dai kinh</kbd> vs <kbd>kinh dai</kbd>.<br/>&emsp;⨁ Nếu tất cả các chữ trong xâu tìm kiếm đều là số (và dấu <kbd>.</kbd>), chế độ tìm kiếm là '<b>Số</b>'. Có thể bấm số kết thúc bằng dấu <kbd>.</kbd> để tìm nhanh đến mục có số thứ tự tương ứng. Ví dụ: <kbd>30.</kbd><br/>&emsp;⨁ Trường hợp còn lại là chế độ tìm kiếm '<b>Khớp từ</b>', chuỗi kết quả là chuỗi chứa từng từ trong chuỗi tìm kiếm theo thứ tự bất kỳ. Ví dụ, tìm <kbd>Dai kinh</kbd> trong chế độ 'không dấu' sẽ tìm được cả 'Đại Kinh' và 'Kinh Tạng Đại Thừa'</span> ${listHotKeys(ssData.sddBookTitlesList.hotKeys)} </fieldset> <fieldset> <legend>Phím tắt cho Audio–Player</legend> <span class="commonGuide">— Bấm các phím chức năng <kbd>Ctrl</kbd>/<kbd>Shift</kbd>/<kbd>Alt</kbd> cùng các phím tua nhanh để tua 40/30/20 giây.<br/>— Bấm phím chức năng <kbd>Alt</kbd> cùng các phím tăng/giảm âm lượng để thay đổi âm lượng 10%.<br/>— Bấm các phím chức năng <kbd>Shift</kbd>/<kbd>Alt</kbd> cùng các phím tăng/giảm tốc độ phát để thay đổi 0.2/0.1.<br/>— Nháy đúp vào {bên trái/bên phải} của [khung đếm thời gian/ảnh bìa/lề của trang] để tương ứng tua {về trước/về sau} lần lượt [15/20/30] giây. Nút lệnh tua [nhỏ/to] tua [10/20] giây. Nút tua trong Notification Center tua 15 giây.</span> ${listHotKeys(ssData.hotKeys.audioPlayer)} </fieldset> <fieldset> <legend>Phím tắt cho trang ngoài</legend> ${listHotKeys(ssData.hotKeys.mainPage,", ")} </fieldset> <fieldset style="align-self: stretch;"> <legend>Phím tắt trong cửa số cấu hình</legend> ${listHotKeys(ssData.hotKeys.settingModal,", ")} </fieldset> <fieldset style="align-self: stretch;"> <legend>Hints</legend> <div style='grid-column: span 2;text-align: justify;'>Với các biểu tượng và một số thành phần không biết ý nghĩa, người dùng có thể di chuột lên (với máy tính) hoặc bấm vào/nhấn giữ (với thiết bị cầm tay thông minh) để hiện tooltip (chữ trắng, nền đen mờ) hướng dẫn về chức năng và thông tin bổ sung (nếu có) của thành phần đó.</div> </fieldset> <fieldset style='align-self:end'> <legend>Who made this web-app</legend> <div name="coryright">🄲<span style="font-size:1.05em">②⓪②④</span>&puncsp;<div name="authorName"></div></div> <div style='grid-column: span 2;text-align: justify;'>This web-app has been made in my leisure time from May 2024 with the purpose of learning and applying state-of-the-art web technologies, so it might be a-bit of resource-consuming. It would perform well with latest browsers such as Chrome, Safari and Edge.</div> </fieldset> </div>`}let _toastConfigSetting={};let _xGrpCfgSetting=[];let _xDBFilesCfg_filtered_toLoadSetting={};function initSettingModal(){const modalPopupTabsGroup=document.querySelector(".modalPopup .tabs-group");const _TAB_IDS=[{idx:0,name:"tabBookSetting",reloadRequired:true},{idx:1,name:"tabListenHistory",reloadRequired:true},{idx:2,name:"tabUISetting"},{idx:3,name:"tabDBFilesSetting"},{idx:4,name:"tabHotkeysSetting"}];const _allTabCheckboxs=[...document.querySelectorAll('.modalPopup .tabs-group > input[type="radio"][name="tabs-component"]')];_allTabCheckboxs.forEach((_tabChkbx,i)=>{const _tab_id=_TAB_IDS.find(_item=>_item.idx===i);_tabChkbx.setAttribute("tabName",_tab_id.name);if(_tab_id.reloadRequired)_tabChkbx.setAttribute("reloadRequired",1);_tabChkbx.dataset.tabIndex=_tab_id.idx});const modalPopupContentWrapper=document.querySelector(".modalPopupContentWrapper");const _tabGroupsDelegatedClickHandlers=_evt=>{const _inputTab=_evt.target;if(_inputTab.matches(`input[type="radio"][name="tabs-component"]`)){if(!_inputTab.runOnlyOnce){let _inputTabContent=_inputTab.nextElementSibling.nextElementSibling;if(_inputTab.checked)setTimeout(_=>reposTooltips(_inputTabContent,{container:modalPopupContentWrapper}),1e3);_inputTab.runOnlyOnce=true}const _tabIdx=parseInt(_inputTab.dataset.tabIndex);const _tab_id=_TAB_IDS.find(_item=>_item.idx===_tabIdx);const _requiedReload=!Boolean(_inputTab.dataset.beenActive);switch(_tabIdx){case 0:if(_requiedReload)addBookSettingTab();break;case 1:if(_requiedReload)addListeningHistory();break;case 2:if(_requiedReload){addToastSettingControl();handleCircleProgressChkbox();handleBufferBarChkbox()}markToastRandomChoose();break;case 3:if(_requiedReload)addJsDatabaseFileReport();break;case 4:if(_requiedReload)showHotKeys();break}_inputTab.dataset.beenActive=1}};modalPopupTabsGroup.addEventListener("click",_tabGroupsDelegatedClickHandlers);const pageKeyDown=evt=>{const _goAdjTab=_goNext=>{const _len=_allTabCheckboxs.length;let _currTabIdx=_allTabCheckboxs.findIndex(_radio=>_radio.checked);_currTabIdx=(_currTabIdx+_len+(_goNext?1:-1))%_len;const _currTab=_allTabCheckboxs[_currTabIdx];_currTab.click();const _tabLabelElem=_currTab.nextElementSibling.querySelector("code");toast.showToast(`Chuyển đến tab ${_tabLabelElem.innerHTML} [${_tabLabelElem.dataset.tooltip.split("\n")[0].replace(/[,\.]([^,\.]+)\:/,".")}]`)};const hotkeyOptions=[{task:"settingModal_closeModal",kCode:["Escape"],desc:"Đóng cửa sổ cấu hình.",callback:()=>{ssData.setting.closeSettingModal();evt.preventDefault();evt.stopImmediatePropagation()}},{task:"settingModal_prevTab",kCode:["Shift+Tab","PageUp"],noNotify:true,desc:"Về tab ngay trước.",callback:()=>{_goAdjTab(false);evt.preventDefault();evt.stopImmediatePropagation()}},{task:"settingModal_nextTab",kCode:["Tab","PageDown"],noNotify:true,desc:"Sang tab tiếp theo.",callback:()=>{_goAdjTab(true);evt.preventDefault();evt.stopImmediatePropagation()}}];if(!evt&&!ssData?.hotKeys?.settingModal){if(!ssData.hotKeys)ssData.hotKeys={};if(!ssData.hotKeys.settingModal){ssData.hotKeys.settingModal=hotkeyOptions.map(hotkey=>{let _temp=Object.assign({},hotkey);delete _temp.callback;return _temp})}return}SddDropdown.prototype.runHotkey(evt,hotkeyOptions,3)};pageKeyDown();modalPopupContentWrapper.focus();modalPopupContentWrapper.addEventListener("keydown",pageKeyDown);setTimeout(()=>{_allTabCheckboxs.forEach(_tabChckbox=>reposTooltips(_tabChckbox.nextElementSibling,{container:modalPopupContentWrapper}))},1e3)}const _filterDBFileCfg=_DBFileCfg=>xDBFilesCfg.toLoad.map(_itm=>{return{dbName:_itm.dbName,loadMode:_itm.loadMode}});function openSettingModal(){_toastConfigSetting=structuredClone(xState.toastCfg);_xGrpCfgSetting=structuredClone(xState.grpCfg);_xDBFilesCfg_filtered_toLoadSetting=structuredClone(_filterDBFileCfg(xDBFilesCfg));document.getElementById("modalSettingPopup").classList.add("activeModalPopup");if(!this.inited){initSettingModal();this.inited=true}const _allTabCheckboxes=document.querySelectorAll('.modalPopup .tabs-group > input[type="radio"][name="tabs-component"]');let _lastActiveChkbox;_allTabCheckboxes.forEach(_tabChkbx=>{if(_tabChkbx.hasAttribute("reloadRequired"))delete _tabChkbx.dataset.beenActive;if(_tabChkbx.checked)_lastActiveChkbox=_tabChkbx});(_lastActiveChkbox||_allTabCheckboxes[0]).click()}function closeSettingModal(){(function(){document.getElementById("selPopupBookGroup").innerHTML="";document.getElementById("lstBookTitlesSetting").innerHTML="";document.querySelector('.modalPopupContent [name="bookKitChkboxContainer"]').innerHTML="";document.querySelector("#ListeningHistoryWrapper").innerHTML=""})();_dragObj=null;localStorage.setItem("xState",JSON.stringify(xState));if(!objsEqual(_toastConfigSetting,xState.toastCfg)){toast.setToastMode();toast.showToast("Có thay đổi trong thiết đặt cấu hình thông báo Toast!")}if(!objsEqual(_xGrpCfgSetting[xState.grpLine].grp,xState.grpCfg[xState.grpLine].grp)){toast.showToast(`Có thay đổi trong thiết đặt cấu hình sách, nhóm số ${xState.grpLine}: '${xBookGrp[xState.grpLine].grpWay}'`);document.getElementById("selBookGroup").onchange()}if(!objsEqual(_xDBFilesCfg_filtered_toLoadSetting,_filterDBFileCfg(xDBFilesCfg))){if(confirm("Có thay đổi trong Database Files Setting.\nBạn có muốn nạp lại trang Web?"))window.location.reload(true)}document.getElementById("modalSettingPopup").classList.remove("activeModalPopup")}return{openSettingModal:openSettingModal,closeSettingModal:closeSettingModal,handyCheckDBsEdition:_handyCheckDBsEdition}}let AudioPlayer=function(settingParam){let isSeeking=false,isPlaying,rightClick=false;let xPlayer=document.querySelector(".ap-container");let volumeBtn=xPlayer.querySelector(".ap-volume-btn");let remTime=xPlayer.querySelector(".ap-time--remains");let trackTitle=xPlayer.querySelector(".ap-title");let progressBar=xPlayer.querySelector(".ap-progress-bar");let preloadBar=xPlayer.querySelector(".ap-progress-preload-bar");let volumeBar=xPlayer.querySelector(".ap-volume-bar");let playBtn=xPlayer.querySelector(".ap-play-pause-btn");let prevBtn=xPlayer.querySelector(".ap-prev-btn");let nextBtn=xPlayer.querySelector(".ap-next-btn");let reloadBtn=document.querySelector(".ap-reload-btn");let elmPlayingTime=document.getElementById("elmPlayingTime");let bufferBarCanvas=document.querySelector(".ap-buffer-bar");let _xDuration=0;xAudio.autoplay=true;function checkInternetAlive(){if(navigator.onLine)return true;switchBigPlayingTime(-1);if(xAudio.readyState<HTMLMediaElement.HAVE_FUTURE_DATA){xAudio.pause();switchPlayPauseButton(1,0)}return false}{window.addEventListener("offline",e=>{toast.showToast("Mất kết nối Internet",toast.ToastType.Error,{persistance:true})});window.addEventListener("online",e=>{toast.showToast("Kết nối Internet",toast.ToastType.Success,{persistance:true});retextPlayingTime({time:toHhMmSs(xAudio.currentTime),slash:"/",dur:toHhMmSs(xAudio.duration)});let _elmArtwork=document.getElementById("elmArtwork");if(!_elmArtwork.offsetParent){utilityHandles.showNoInternet();_elmArtwork.src=_elmArtwork.src+"?"+performance.now().toFixed();utilityHandles.updateNCWorkart()}if(xAudio.paused){switchPlayPauseButton(1,1);if(progressBar.parentElement.offsetWidth<=progressBar.offsetWidth){playNextPrev(1)}if(preloadBar.offsetWidth<=progressBar.offsetWidth)reloadSrc(true)}else switchPlayPauseButton(0,1)});const audioKeyDown=evt=>{const _VOLUME_CHANGE=evt?.altKey?.1:.05;const _TIME_CHANGE=evt?.ctrlKey?40:evt?.shiftKey?30:evt?.altKey?20:10;const _SPEED_CHANGE=evt?.shiftKey?.2:evt?.altKey?.1:.05;const hotkeyOptions=[{task:"audio_rewind",kCode:["ArrowLeft"],desc:"Tua lùi về sau (rewind) 10 giây.",ignoreModifier:true,noNotify:true,callback:()=>xAudio.currentTime-=_TIME_CHANGE},{task:"audio_fastforward",kCode:["ArrowRight"],desc:"Tua tiến về trước (fastforward) 10 giây.",ignoreModifier:true,noNotify:true,callback:()=>xAudio.currentTime+=_TIME_CHANGE},{task:"audio_volumeUp",kCode:["ArrowUp"],desc:"Tăng âm lượng audio 5%.",ignoreModifier:true,noNotify:true,callback:()=>changeAudioVolume(xAudio.volume+_VOLUME_CHANGE)},{task:"audio_volumeDown",kCode:["ArrowDown"],desc:"Giảm âm lượng audio 5%.",ignoreModifier:true,noNotify:true,callback:()=>changeAudioVolume(xAudio.volume-_VOLUME_CHANGE)},{task:"audio_toggleVolume",kCode:["Delete","KeyM"],desc:"Bật/Tắt âm lượng.",callback:volumeToggle.bind(volumeBtn)},{task:"audio_speedUp",kCode:["Equal","NumpadAdd"],ignoreModifier:true,desc:"Tăng tốc độ phát 0.05.",noNotify:true,callback:()=>insertSpeed("+"+_SPEED_CHANGE)},{task:"audio_speedDown",kCode:["Minus","NumpadSubtract"],ignoreModifier:true,desc:"Giảm tốc độ phát 0.05.",noNotify:true,callback:()=>insertSpeed("-"+_SPEED_CHANGE)},{task:"audio_normalSpeed",kCode:["Digit0","Numpad0"],desc:"Đưa tốc độ phát về 1.0.",callback:_=>{elmSltSpeed.value=1;xAudio.playbackRate=1}},{task:"audio_nextTrack",kCode:["PageDown"],desc:"Phát chương sách tiếp theo.",callback:()=>{nextBtn.click()}},{task:"audio_prevTrack",kCode:["PageUp"],desc:"Phát từ đầu chương (<30s) hoặc chương sách trước.",callback:()=>{prevBtn.click()}},{task:"audio_playPauseAudio",kCode:["Space","Enter"],desc:"Phát / Dừng phát chương sách.",callback:()=>playBtn.click()}];if(!evt&&!ssData?.hotKeys?.audioPlayer){if(!ssData.hotKeys)ssData.hotKeys={};if(!ssData.hotKeys.audioPlayer){ssData.hotKeys.audioPlayer=hotkeyOptions.map(hotkey=>{let _temp=Object.assign({},hotkey);delete _temp.callback;return _temp})}return}SddDropdown.prototype.runHotkey(evt,hotkeyOptions)};audioKeyDown();document.addEventListener("keydown",audioKeyDown)}{xAudio.onloadstart=event=>{console.log("Load Start");remTime.innerHTML="-:-- / -:--";progressBar.style.width="0%";preloadBar.style.width="0%";if(!checkInternetAlive())return;switchBigPlayingTime(0);switchPlayPauseButton(-1,0);updateCircleProgressBar(0);clearBufferBar()};xAudio.oncanplay=event=>{updateTime();switchBigPlayingTime(1);switchPlayPauseButton(xAudio.paused?1:0,1)};xAudio.onstalled=event=>{console.log("Stalled !!!");checkInternetAlive();toast.showToast("Trying to fetch data.")};xAudio.onseeked=event=>{if(!isSeeking)toast.showToast("Audio is seeked to "+toHhMmSs(xAudio.currentTime));updateTime(true)};xAudio.onpause=event=>{toast.showToast("Audio paused !!!",toast.ToastType.Warning);switchPlayPauseButton(1,xAudio.readyState<HTMLMediaElement.HAVE_FUTURE_DATA?0:1)};xAudio.onplay=event=>{changeAudioSpeed();toast.showToast("Đang phát chương sách... ✕"+xAudio.playbackRate);switchPlayPauseButton(0,1)};xAudio.onended=event=>{if(checkInternetAlive())playNextPrev(1)};xAudio.ondurationchange=event=>{_xDuration=xAudio.duration;retextPlayingTime({time:toHhMmSs(xAudio.currentTime),slash:"/",dur:toHhMmSs(_xDuration)})};xAudio.addEventListener("timeupdate",_=>updateTime(),false);xAudio.addEventListener("error",audioError,false);function audioError(evt){console.log("audio error event");toast.showToast("Phát Audio bị lỗi",toast.ToastType.Error);checkInternetAlive()}}function loadSrc(_src,_justReload){_lastAudioPosition=0;_ubcCounter=0;xAudio.src=_src;tryingLoadAudio(_justReload)}function tryingLoadAudio(_justReload){if(!checkInternetAlive())return;let playPromise=xAudio.play();let chainToast=new toast.ChainToasts("Nạp dữ liệu media chương sách");if(playPromise!==undefined){playPromise.then(_=>{chainToast.checkoutToast("Bắt đầu phát")})["catch"](_err=>{console.log(`[tryingLoadAudio]: [${_err.code}]${_err.name}: ${_err.message}`);if([0,_err.ABORT_ERR,_err.NETWORK_ERR,_err.NOT_FOUND_ERR,_err.NOT_SUPPORTED_ERR,_err.NO_DATA_ALLOWED_ERR,_err.TIMEOUT_ERR].indexOf(_err.code)>-1){return _err}chainToast.showNextToast(`[tryingLoadAudio]: trying reload audio`,toast.ToastType.Warning);xAudio.load();return xAudio.play()}).then(_res2=>{if(_res2 instanceof Promise)chainToast.checkoutToast("Chương truyện có thể phát.",toast.ToastType.Infor);else if(_res2 instanceof Error){let _errMsg="Không rõ lỗi",_toastType=toast.ToastType.Error;let _throwErr=false;switch(_res2.code){case 0:_errMsg=`Phải bấm nút Play để nghe truyện`;_toastType=toast.ToastType.Warning;break;case _res2.NETWORK_ERR:_errMsg=`Mất kết nối Internet`;break;case _res2.ABORT_ERR:_errMsg=`Lệnh phát chương truyện bị hủy`;break;case _res2.NOT_FOUND_ERR:_errMsg="Nguồn phát media không tồn tại";_throwErr=true;break;case _res2.TIMEOUT_ERR:_errMsg="Quá thời gian tải cho phép";_throwErr=true;break;case _res2.NOT_SUPPORTED_ERR:case _res2.NO_DATA_ALLOWED_ERR:_errMsg="Không hỗ trợ phát nguồn media";_throwErr=true;break;default:_errMsg=`[tryingLoadAudio]: [${_res2.code}]${_res2.name}: ${_res2.message}`;_toastType=toast.ToastType.Warning}if(_throwErr){class CustomAudioPlayError extends Error{constructor(_code,_msg,...params){super(...params);this.code=_code;this.message=_msg;this.name="CustomAudioPlayError"}}toast.showToast(_errMsg,_toastType);throw new CustomAudioPlayError(_res2.code,_errMsg,{cause:_res2.message})}else chainToast.checkoutToast(_errMsg,_toastType)}else chainToast.checkoutToast("Có thể phát truyện dù không rõ lí do.",toast.ToastType.Warning)})["catch"](_err=>{toast.showToast(`[tryingLoadAudio]: audio reload() thất bại.[${_err.name}]`,toast.ToastType.Error);console.log(`[tryingLoadAudio]: audio.load() Failed.\n[${_err.code}] ${_err.name}: ${_err.message}`);let _switchSrcBtn=document.querySelector(".switchChapterAudioSrc");if(!_justReload&&_switchSrcBtn){console.log("[tryingLoadAudio]: Try loading other source");chainToast.checkoutToast(`[tryingLoadAudio]: Nạp nguồn link khác theo của chương truyện.`,toast.ToastType.Warning);changeAudioSrc(true)}else{chainToast.checkoutToast("Không phát được chương truyện. Chọn chương hoặc truyện khác",toast.ToastType.Error);switchPlayPauseButton(1,0);remTime.textContent="-:-- / -:--";retextPlayingTime({time:"-:--",slash:"/",dur:"-:--"});progressBar.style.width="0%";preloadBar.style.width="0%";switchBigPlayingTime(1);updateCircleProgressBar(0);clearBufferBar()}})}}document.querySelectorAll("button:has(svg > use[svg-icon-name='PlayPauseIcon'])").forEach(_btn=>_btn.addEventListener("click",playStop,false));prevBtn.addEventListener("click",()=>playNextPrev(0),false);nextBtn.addEventListener("click",()=>playNextPrev(1),false);if("mediaSession"in navigator){let _mediaSession=navigator.mediaSession;_mediaSession.setActionHandler("previoustrack",()=>playNextPrev(0));_mediaSession.setActionHandler("nexttrack",()=>playNextPrev(1));_mediaSession.setActionHandler("play",()=>playStop());_mediaSession.setActionHandler("pause",()=>playStop());_mediaSession.setActionHandler("seekbackward",()=>{xAudio.currentTime-=15});_mediaSession.setActionHandler("seekforward",()=>{xAudio.currentTime+=15})}function playStop(){if(xAudio.paused){xAudio.play()}else{xAudio.pause()}}function playNextPrev(isNext){let currentStt=parseInt(elmPlaylist.getAttribute("attr-Value"));if(isNaN(currentStt))currentStt=1;let chapLength=parseInt(elmPlaylist.getAttribute("attr-Length"));if(isNaN(chapLength))chapLength=elmPlaylist.querySelectorAll("li").length;if(isNext){if(currentStt<chapLength){changeChap(currentStt+1)}else toast.showToast("Đã là chương cuối rồi!",toast.ToastType.Warning)}else{if(currentStt>1&&xAudio.currentTime<30){changeChap(currentStt-1)}else xAudio.currentTime=0}}reloadBtn.addEventListener("click",reloadSrc,false);function reloadSrc(_forcePause){if(!navigator.onLine){toast.showToast("Không có kết nối Internet",toast.ToastType.Error);return}let _currTime=xAudio.currentTime;if(!_currTime)_currTime=0;xAudio.load();xAudio.currentTime=_currTime;if(_forcePause)xAudio.pause()}let switchPlayPauseButton=(_playIconType,_disableButton)=>{document.querySelectorAll("[svg-icon-name='PlayPauseIcon']").forEach(_elm=>{_elm.setAttribute("href",_playIconType===-1?"#icnSvgSpinWaiting":(_playIconType===1?"#icnSvgPlay":"#icnSvgPause")+(xState.disableCircleProgressButton?"":"Progress"))});if(_disableButton===undefined)_disableButton=-1;if(_playIconType===-1)_disableButton=0;if(_disableButton!==-1){document.querySelectorAll("button:has(svg > use[svg-icon-name='PlayPauseIcon'])").forEach(_elm=>{_elm.classList.toggle("elm-disabled",_disableButton===0)});elmPlayingTime.classList.toggle("paused",_playIconType===1);document.querySelectorAll("button.ap-rewind-btn").forEach(_elm=>{_elm.classList.toggle("elm-disabled",_disableButton===0)});document.querySelectorAll("button.ap-fastforward-btn").forEach(_elm=>{_elm.classList.toggle("elm-disabled",_disableButton===0)})}};function retextPlayingTime(_parts){const _map={time:0,slash:1,dur:2};for(const _part in _parts)elmPlayingTime.children[_map[_part]].textContent=_parts[_part]}function switchBigPlayingTime(_state){elmPlayingTime.classList.toggle("elm-hidden",_state==0);document.querySelector("div[name='HourglassSpining']").classList.toggle("elm-hidden",_state!==0);document.querySelector(".ap-progress").classList.toggle("ap-progress-bar--loading",_state==0);if(_state===-1)retextPlayingTime({time:"",slash:"No Internet",dur:""})}let elmSltSpeed=document.querySelector(".ap-speed-option-select");document.querySelector(".ap-speed-decrease-speed").addEventListener("click",()=>insertSpeed("-.05"),false);document.querySelector(".ap-speed-increase-speed").addEventListener("click",()=>insertSpeed(".05"),false);(function populateSpeedList(){let _defSpd=[.5,.75,1,1.1,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.75,2,2.95];elmSltSpeed.innerHTML="";if(xState.speeds&&Array.isArray(xState.speeds))_defSpd=xState.speeds;for(let i=0;i<_defSpd.length;i++){let opt=document.createElement("option");opt.value=_defSpd[i];opt.innerHTML=Number.isInteger(_defSpd[i])?_defSpd[i]+".0x":_defSpd[i]+"x";if(_defSpd[i]==1){opt.style["background-color"]="#e5e161"}elmSltSpeed.appendChild(opt)}elmSltSpeed.onchange=_=>{toast.showToast("Speed: ✕"+elmSltSpeed.value,null,{persistance:true});xState.speed=xAudio.playbackRate=parseFloat(elmSltSpeed.value);let _sel=document.createElement("select");_sel.css({"font-size":elmSltSpeed.css("font-size")});let _spd=elmSltSpeed.value;if(Number.isInteger(parseFloat(_spd)))_spd=_spd+".0";_sel.innerHTML="<option>"+_spd+"</option>";document.body.appendChild(_sel);elmSltSpeed.style.width=_sel.offsetWidth-12+"px";_sel.remove();document.querySelectorAll("[attr-duration]").forEach(elm=>{let _duraion=elm.getAttribute("attr-duration");if(!_duraion)return;elm.innerText=toHhMmSs(_duraion/xAudio.playbackRate)})}})();function insertSpeed(speed){let newSpeed=1;if(typeof speed=="number")newSpeed=speed;if(typeof speed=="string"){speed=Number(speed);if(isNaN(speed))speed=.05;newSpeed=Math.round((parseFloat(elmSltSpeed.value)+speed)*100)/100;newSpeed=Math.max(newSpeed,.05)}if(elmSltSpeed.querySelector('[value="'+newSpeed+'"]')){xAudio.playbackRate=elmSltSpeed.value=newSpeed;elmSltSpeed.onchange();return}let i=0;while(i<elmSltSpeed.options.length&&parseFloat(elmSltSpeed.options[i].value)<newSpeed){i++}elmSltSpeed.add(new Option(Number.isInteger(parseFloat(newSpeed))?newSpeed+".0x":newSpeed+"x",newSpeed),i);xState.speeds=[...elmSltSpeed.options].map(_opt=>_opt.value);xAudio.playbackRate=elmSltSpeed.value=newSpeed;elmSltSpeed.onchange()}function changeAudioSpeed(){if(xAudio.playbackRate!=xState.speed){xAudio.playbackRate=xState.speed}}insertSpeed(settingParam.speed);if(xState.hideBufferBar)bufferBarCanvas.classList.add("elm-hidden");clearBufferBar();function clearBufferBar(){if(bufferBarCanvas.classList.contains("elm-hidden")){return}else bufferBarCanvas.classList.add("elm-hidden");let context=bufferBarCanvas.getContext("2d");context.clearRect(0,0,bufferBarCanvas.width,bufferBarCanvas.height);context.fillStyle="#bdbdbd";context.fillRect(0,0,bufferBarCanvas.width,bufferBarCanvas.height)}function updateBufferCanvas(){if(xState.hideBufferBar)return;if(bufferBarCanvas.classList.contains("elm-hidden"))bufferBarCanvas.classList.remove("elm-hidden");let context=bufferBarCanvas.getContext("2d");let inc=bufferBarCanvas.width/_xDuration;if(context.fillStyle!=="#bdbdbd"){context.clearRect(0,0,bufferBarCanvas.width,bufferBarCanvas.height);context.fillStyle="#bdbdbd";context.fillRect(0,0,bufferBarCanvas.width,bufferBarCanvas.height)}context.fillStyle="#0062ff";context.strokeStyle="#bdbdbd";for(let i=0;i<xAudio.buffered.length;i++){let startX=xAudio.buffered.start(i)*inc;let endX=xAudio.buffered.end(i)*inc;context.fillRect(startX,0,endX,bufferBarCanvas.height);context.rect(startX,0,endX,bufferBarCanvas.height);context.stroke()}}let progressWrapper=progressBar.parentNode.parentNode;progressWrapper.addEventListener("mousedown",progressbarMD,false);progressWrapper.addEventListener("mousemove",progressbarMM,false);document.documentElement.addEventListener("mouseup",seekingDone,false);function moveBar(evt,el,dir){let value;if(dir==="horizontal"){value=Math.round((evt.clientX-el.offset().left+window.pageXOffset)*100/el.parentNode.offsetWidth);el.style.width=value+"%";return value}else{let offset=el.offset().top+el.offsetHeight-window.pageYOffset;value=Math.round(offset-evt.clientY);if(value>100)value=100;if(value<0)value=0;volumeBar.style.height=value+"%";return value}}function progressbarMD(evt){rightClick=evt.button===2?true:false;isPlaying=!xAudio.paused;if(isPlaying)xAudio.pause();isSeeking=true;evt.preventDefault();progressbarMM(evt)}function progressbarMM(evt){if(isSeeking&&rightClick===false&&xAudio.readyState!==0){let value=moveBar(evt,progressBar,"horizontal");xAudio.currentTime=_xDuration*(value/100)}}function seekingDone(evt){if(evt.target.closest(".ap-progress-container")){toast.showToast(`Audio is seeking to ${toHhMmSs(xAudio.currentTime)}`);if(isPlaying&&isSeeking)xAudio.play()}isSeeking=false}progressWrapper.addEventListener("touchstart",progressbarTS,false);progressWrapper.addEventListener("touchmove",progressbarTM,false);progressWrapper.addEventListener("touchend",seekingDone,false);progressWrapper.addEventListener("touchcancel",seekingDone,false);let _progressbarLeft;function progressbarTS(e){_progressbarLeft=progressBar.getBoundingClientRect().left;isPlaying=!xAudio.paused;if(isPlaying)xAudio.pause();isSeeking=true;progressbarTM(e)}function touchMoveBar(e,el,dir){let value;if(dir==="horizontal"){value=Math.round((e.changedTouches[0].clientX-_progressbarLeft)*100/el.parentNode.offsetWidth);if(value>100)value=100;if(value<0)value=0;el.style.width=value+"%"}else{}e.preventDefault();return value}function progressbarTM(evt){if(isSeeking&&xAudio.readyState!==0){let value=touchMoveBar(evt,progressBar,"horizontal");xAudio.currentTime=_xDuration*(value/100)}}let elmRoot=document.querySelector('[name="divContainer"]');function updateCircleProgressBar(currPercent){let _prgress=383;if(isFinite(currPercent))_prgress=parseInt((1-currPercent)*383);elmRoot.style.setProperty("--audio-playing-current-progress-percent",_prgress+"px")}let _lastAudioPosition=0;const _HEAVY_UPDATE_INTERVAL=.01;let _ubcCounter=0;function updateTime(forceHeavyUIUpdate=false){if(xAudio.readyState<HTMLMediaElement.HAVE_FUTURE_DATA)return;if(document.hidden)return;let _currTime=xAudio.currentTime;let _remTime=_xDuration-_currTime;remTime.innerHTML=toHhMmSs(_remTime)+" / "+toHhMmSs(_remTime/xAudio.playbackRate);retextPlayingTime({time:toHhMmSs(_currTime)});if(_xDuration>0&&(forceHeavyUIUpdate===true||Math.abs(_currTime-_lastAudioPosition)>_xDuration*_HEAVY_UPDATE_INTERVAL||_currTime>_xDuration-5)){_lastAudioPosition=_currTime;let barlength=Math.round(_currTime*(100/_xDuration));progressBar.style.width=barlength+"%";let buffered=xAudio.buffered;if(buffered.length){for(let i=0;i<buffered.length;i++){if(buffered.start(buffered.length-1-i)<_currTime){preloadBar.style.width=`${buffered.end(buffered.length-1-i)*100/_xDuration}%`;break}}}if(!xState.disableCircleProgressButton){updateCircleProgressBar(_currTime/_xDuration)}let lPP=parseFloat(percentageListened.dataset.listenedPercent),lPD=parseInt(percentageListened.dataset.listenedDuration)+_currTime,_bookDur=parseInt(percentageListened.dataset.bookDur);percentageListened.dataset.tooltip=percentageListened.dataset.tooltip.replace(/\[([\d\:]+)\]/,`[${toHhMmSs(lPD)}]`);const _newLPP=(100*lPD/_bookDur).toFixed(1);if(_newLPP!=lPP){percentageListened.dataset.listenedPercent=_newLPP;percentageListened.innerText=`${_newLPP}%`;percentageListened.style.backgroundSize=`${_newLPP}% 100%`}if(forceHeavyUIUpdate===true||++_ubcCounter==10){updateBufferCanvas();_ubcCounter=0}}}volumeBtn.addEventListener("click",volumeToggle,false);let volumeWrapper=volumeBar.parentNode.parentNode;volumeWrapper.addEventListener("mousedown",volumebarMD,false);volumeWrapper.addEventListener("mousemove",volumebarMM);document.documentElement.addEventListener("mouseup",seekingDone,false);function changeAudioVolume(_volume){_volume=parseFloat(_volume.toFixed(2));let _vol=Math.max(Math.min(_volume,1),0);if(xAudio.volume===0&&_volume<0||xAudio.volume===1&&_volume>1)return;xState.volume=xAudio.volume=_vol;volumeBar.style.height=_vol*100+"%";toast.showToast("Volume "+(_vol*100).toFixed()+"%");if(_vol===0&&!xAudio.muted||_vol>0&&xAudio.muted)volumeToggle.call(volumeBtn)}changeAudioVolume(settingParam?.volume??1);xAudio.muted=!settingParam.muted;volumeToggle.call(volumeBtn);function volumeToggle(){if(xAudio.muted){if(xAudio.volume===0){changeAudioVolume(1)}else{volumeBar.style.height=xAudio.volume*100+"%"}xAudio.muted=false;this.classList.remove("muted")}else{xAudio.muted=true;volumeBar.style.height=0;this.classList.add("muted")}xState.muted=xAudio.muted}function volumebarMD(evt){rightClick=evt.button===2?true:false;isSeeking=true;volumebarMM(evt)}function volumebarMM(evt){let volumeLength=volumeBar.css("height");if(isSeeking&&rightClick===false){let value=moveBar(evt,volumeBar.parentNode,"vertical")/100;if(value<=0){changeAudioVolume(0);volumeBtn.classList.add("muted")}else{if(xAudio.muted)xAudio.muted=false;changeAudioVolume(value);volumeBtn.classList.remove("muted")}}}function extend(defaults,options){for(let name in options){if(defaults.hasOwnProperty(name)){defaults[name]=options[name]}}return defaults}Element.prototype.offset=function(){let el=this.getBoundingClientRect(),scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:el.top+scrollTop,left:el.left+scrollLeft}};return{updateTime:updateTime,loadSrc:loadSrc}};function SddDropdown(sddContainerQry,_settingParam){let _uid="id"+Math.random().toString(16).substr(2,8);if(!new.target)return console.error("SddDropdown class must be constructed with 'new' keyword");let _settings=null;let _selectedItem,_activeOption,_items,_filteredItems;let _sddWrapper;let _onChange=null,_notifyFunction=console.warn;let sHighlite=null;let _hotKeysList;let _dropdownOpenFirstTime=true;let _alignRightElementsDoneFlag=false;function makeSddCoreHtml(){const _CLEAR_SEARCH_BOX_SVG=`<svg viewBox="0 2 16 12"><path d="M6 2 0 8l6 6h10V2zm2 2 2 2 2-2 2 2-2 2 2 2-2 2-2-2-2 2-2-2 2-2-2-2z"/></svg>`;const _CLOSE_GROUP_SVG=`<svg viewBox="1 1 13 14"><path d="M1.5 1h2v1H2v12h1.5v1h-2l-.5-.5v-13zm6 6h-2L5 6.5v-2l.5-.5h2l.5.5v2zM6 6h1V5H6zm7.5 1h-3l-.5-.5v-3l.5-.5h3l.5.5v3zM11 6h2V4h-2zm-3.5 6h-2l-.5-.5v-2l.5-.5h2l.5.5v2zM6 11h1v-1H6zm7.5 2h-3l-.5-.5v-3l.5-.5h3l.5.5v3zM11 12h2v-2h-2zm-1-2H8v1h2zm0-5H8v1h2z"/></svg>`;const _JUMP_TO_SELECTED=`<svg viewBox="2 2 20 20"><g fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="4"/><path d="M12 8v8m0 0 4-4m-4 4-4-4" stroke-linecap="round" stroke-linejoin="round"/></g></svg>`;const _DIACRATICS_OPTION=`<svg viewBox="0 0 15.98 16"><path d="M4 0h2v2h4v2H8.868a8.5 8.5 0 0 1-2.202 4.351c.8.388 1.691.617 2.633.646L10.274 6h2.453l3.25 10h-2.104l-.65-2H9.776l-.65 2H7.024l1.638-5.04A8.45 8.45 0 0 1 5 9.711 8.46 8.46 0 0 1 .5 11H0V9h.5a6.5 6.5 0 0 0 2.834-.649A8.5 8.5 0 0 1 1.752 6h2.27c.278.435.607.834.978 1.19A6.5 6.5 0 0 0 6.826 4H0V2h4zm8.574 12L11.5 8.697 10.427 12z"/></svg>`;const _TOGGLE_EXTRA_TITLE=`<svg id="icnSvgToggleExtraTitlesBtn" viewBox="1 1 22 22"><path d="M9 22h6c5 0 7-2 7-7V9c0-5-2-7-7-7H9C4 2 2 4 2 9v6c0 5 2 7 7 7m8.5-4.92h-1.85m-2.68 0H6.5m11-3.76h-5.53m-2.7 0H6.5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`;const _sddWrapper=document.createElement("div");_sddWrapper.classList.add("sdd-wrapper");_sddWrapper.innerHTML=`<div class="sdd-controls"></div> <div class="sdd-dropdown-wrapper elm-hidden" role="listbox"> <div class="input-wrapper"> <input placeholder="🔍 Search..." type="text" class="sdd-search-box" pattern=".*\\S.*" title="" required> <div class="sdd-control-buttons"> <button class="clear-input-button" data-tooltip="Xóa ô tìm kiếm" data-tooltip-location="bottom" style="--data-translateX: -99%;">${_CLEAR_SEARCH_BOX_SVG}</button> <button class="search-diacritics-option-button" data-tooltip="Tìm kiếm bỏ dấu (chữ nét, nền vàng) hay tìm kiếm nguyên dấu (chữ nhòe)" data-tooltip-location="bottom" style="--data-translateX: -99%;">${_DIACRATICS_OPTION}</button> <button class="toggle-extra-title-button" data-tooltip="Ẩn/Hiện tiêu đề phụ" data-tooltip-location="bottom" style="--data-translateX: -99%;">${_TOGGLE_EXTRA_TITLE}</button> <button class="jump-to-selected-item-button" data-tooltip="Cuộn tới mục đang được chọn" data-tooltip-location="bottom" style="--data-translateX: -89%;">${_JUMP_TO_SELECTED}</button> <button class="close-open-groups-button" data-tooltip="Đóng/Mở nhóm mục" data-tooltip-location="bottom" style="--data-translateX: -99%;">${_CLOSE_GROUP_SVG}</button> </div> </div> <div class="sdd-dropdown-content circus-background></div> <div class="sdd-dropdown-border-bottom sdd-dropdown-border-bottom-stripes"></div> </div>`;const sddContainer=document.querySelector(sddContainerQry);sddContainer.appendChild(_sddWrapper);return _sddWrapper}_sddWrapper=makeSddCoreHtml();const representativeDiv=_sddWrapper.querySelector(".sdd-controls");const sddDropdownWrapper=_sddWrapper.querySelector(".sdd-dropdown-wrapper");const sddInputWrapper=sddDropdownWrapper.querySelector(".input-wrapper");const sddSearchBox=_sddWrapper.querySelector(".sdd-search-box");const sddDropdownContent=_sddWrapper.querySelector(".sdd-dropdown-content");let sddDropdownStatusBar;const isTouchDevice=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}();Object.defineProperty(this,"value",{get(){return _selectedItem.value},set(value){if(_selectedItem?.value==value)return;selectItem(value.toString(),true)}});Object.defineProperty(this,"selectedIndex",{get(){return _items.indexOf(_selectedItem)},set(index){index=parseInt(index);if(isNaN(index)){return console.warn("SDD selectedIndex set: index is not a number")}if(_selectedItem==_items[index])return;selectItem(index,true)}});Object.defineProperty(this,"selectedItem",{get(){return _selectedItem},set(item){if(_items.indexOf(item)>-1&&item!=_selectedItem){selectItem(item,true)}}});Object.defineProperty(this,"items",{get(){return _items},set(val){console.warn("sdd.items property is not changable");return null}});Object.defineProperty(this,"length",{get(){return _items.length},set(val){console.warn("sdd.length property is not changable");return null}});Object.defineProperty(this,"settings",{get(){return Object.assign({},_settings)},set(val){console.warn("sdd.setting property is not changable");return null}});Object.defineProperty(this,"diacriticsFilterMode",{get(){return _settings.diacriticsFilterMode},set(val){setDiacriticsFilterMode(Boolean(val))}});Object.defineProperty(this,"rootElement",{get(){return _sddWrapper},set(val){console.warn("sdd.rootElement property is not changable");return null}});Object.defineProperty(this,"displayElement",{get(){return representativeDiv}});Object.defineProperty(this,"LOAD_MODE_ENUM",{get(){return loadSDDMode}});Object.defineProperty(this,"hotKeys",{get(){if(!_hotKeysList)_hotKeysList=onKeyDown();return _hotKeysList}});const goAdjacent=_dir=>{let _currIdx=_items.indexOf(_selectedItem);if(_currIdx==-1)return null;_dir=_dir==1?1:-1;_currIdx+=_dir;if(_currIdx<0||_currIdx>=_items.length)return null;selectItem(_currIdx,true);return _items[_currIdx]};const escape_html=str=>{return(str+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};function populateDropdown(initSelectedItem){if(!_settings)return;sddDropdownContent.innerHTML="";representativeDiv.classList.toggle("single-line",!!_settings.displayOneLine);sddDropdownStatusBar=document.createElement("DIV");sddDropdownStatusBar.classList.add("sdd-dropdown-status-bar","statusbar-hidden");sddDropdownStatusBar.innerText="Statusbar";sddDropdownContent.appendChild(sddDropdownStatusBar);const makeOptionItem=(optionData,i,grpDisabled=false)=>{const item=document.createElement("div");item.classList.add("sdd-dropdown-item");if(grpDisabled||optionData.disabled)item.classList.add("disabled");item.setAttribute("role","option");item.value=optionData[_settings.valueField].toString();item.setAttribute("value",item.value);item.dataset.index=i;if("object"==typeof optionData.attr){const keys=Object.keys(optionData.attr);for(const key of keys){if(optionData.attr.hasOwnProperty(key))item.setAttribute(key,optionData.attr[key])}}item.innerHTML=_settings.render.option(optionData,escape_html);let _em=document.createElement("em");_em.classList.add("item-order");_em.setAttribute("data-rAlignGroup","itemOrder");_em.innerHTML=pad(i+1,2)+".";const _firstChild=item.firstChild;if(_firstChild instanceof HTMLDivElement)_firstChild.prepend(_em);else item.prepend(_em);return item};const makeNoFoundItem=()=>{const item=document.createElement("div");item.classList.add("no_results","elm-hidden");item.innerHTML=_settings.render["no_results"]();return item};const makeOptionGroup=(grp,grpI)=>{let _optGroupDiv=document.createElement("DIV");_optGroupDiv.classList.add("optgroup");_optGroupDiv.dataset.group=grpI;if(grp.value)_optGroupDiv.setAttribute("value",grp.value);const _chkBxId="grpChkbox_"+_uid+"_"+grpI;let _grpLabel=escape_html(grp.label);if("function"==typeof _settings.render.optgroup_header)_grpLabel=_settings.render.optgroup_header(grp,escape_html);_grpLabel=_grpLabel;_optGroupDiv.innerHTML=`<input type="checkbox" id="${_chkBxId}" attr-grpno="${grp.gId}" checked> <label for="${_chkBxId}" class="optgroup-header ${!!grp.disabled?"disabled":""}">${_grpLabel}</label> <section></section>`;if("object"==typeof grp.attr){const keys=Object.keys(grp.attr);for(const key of keys){if(grp.attr.hasOwnProperty(key))_optGroupDiv.setAttribute(key,grp.attr[key])}}return _optGroupDiv};if(Array.isArray(_settings.optgroups)){_settings.optgroups.forEach((grp,grpI)=>{let _optGroupDiv=makeOptionGroup(grp,grpI);sddDropdownContent.appendChild(_optGroupDiv);const sectionElem=_optGroupDiv.querySelector("section");const _gId=grp[_settings.optgroupField];_settings.options.forEach((optionData,i)=>{if(optionData[_settings.optgroupField]==_gId)sectionElem.appendChild(makeOptionItem(optionData,i,!!grp.disabled))})})}else{_settings.options.forEach((optionData,i)=>{sddDropdownContent.appendChild(makeOptionItem(optionData,i))})}const _toggle_extra_title_button=sddInputWrapper.querySelector(".toggle-extra-title-button");_sddWrapper.classList.toggle("hideOptionExtraTitle",_toggle_extra_title_button.hasAttribute("attr-extra-title-hidden"));sddDropdownContent.appendChild(makeNoFoundItem());_settings.options.length=0;delete _settings.options;_settings.optgroups&&(_settings.optgroups.length=0);delete _settings.optgroups;_items=Array.prototype.slice.call(sddDropdownContent.querySelectorAll("div.sdd-dropdown-item"));const sddSearchBox=_sddWrapper.querySelector(".sdd-search-box");sddSearchBox.placeholder="🔍 "+_settings.searchBoxPlaceholder.replace("{_items_length}",_items.length);if(![null,undefined].includes(initSelectedItem)&&"function"==typeof selectItem){selectItem(initSelectedItem,false)}}function dropdownItemClickDelegation(evt){let target=evt.target.closest(".sdd-dropdown-item");if(target)setSelected(target);evt.stopPropagation()}function setActiveOption(option,scroll=true,toMiddle=false,behavior){if(!option)return;behavior=behavior??(toMiddle?"smooth":"auto");_selectedItem&&_selectedItem.classList.remove("is-active");if(option===_activeOption){option.classList.add("is-active");if(option&&scroll)scrollToOption(option,behavior,toMiddle);return}_activeOption&&_activeOption.classList.remove("is-active");option.classList.add("is-active");_activeOption=option;if(scroll)scrollToOption(option,behavior,toMiddle)}function getAdjacent(option,direction=1,makeSelect=false){const allItems=_filteredItems??_items;if(allItems.length==0)return;let _currIdx=-1;if([100,-100].includes(direction)){_currIdx=direction==100?allItems.length-1:0}else{_currIdx=allItems.indexOf(option);if(_currIdx==-1){_currIdx=0}else{const len=allItems.length;if(direction==0){}if([1,-1].includes(direction)){_currIdx=(_currIdx+direction+len)%len}if([35,-35,36,-36].includes(direction)){const optGroupCtn=option.closest(".optgroup");if(!optGroupCtn)return;const _allVisibleOptions=[...optGroupCtn.querySelectorAll(".sdd-dropdown-item:not(.elm-hidden)")];let _adjOption=_allVisibleOptions.at(Math.abs(direction)==35?0:-1);if(_adjOption==option||[35,-36].includes(direction)){const _allVisibleOptGroups=[...sddDropdownContent.querySelectorAll(".optgroup:not(.elm-hidden)")];const _adjOptGroupIndex=_allVisibleOptGroups.indexOf(optGroupCtn)+(direction<0?-1:1);if(_adjOptGroupIndex>-1&&_adjOptGroupIndex<_allVisibleOptGroups.length){_adjOption=[..._allVisibleOptGroups[_adjOptGroupIndex].querySelectorAll(".sdd-dropdown-item:not(.elm-hidden)")].at(Math.abs(direction)==35?0:-1)}}_currIdx=allItems.indexOf(_adjOption)}if([50,-50].includes(direction)){const _ctnHeight=sddDropdownContent.offsetHeight;if(direction==50){const _currTop=allItems[_currIdx].getBoundingClientRect().top;let i=_currIdx+1;while(i<len){if(allItems[i].getBoundingClientRect().bottom-_currTop>_ctnHeight)break;i++}_currIdx=Math.min(i-1,len-1)}if(direction==-50){const _currBottom=allItems[_currIdx].getBoundingClientRect().bottom;let i=_currIdx-1;while(i>=0){if(_currBottom-allItems[i].getBoundingClientRect().top>_ctnHeight)break;i--}_currIdx=Math.max(i+1,0)}}}}const _chosenOption=allItems[_currIdx];if(makeSelect)setSelected(_chosenOption,false,false);else{const _setAndScroll2ActiveOption=_=>{if(direction==0)setActiveOption(_chosenOption,true,true,"smooth");else if([100,-100].includes(direction))setActiveOption(_chosenOption,true,false,"smooth");else setActiveOption(_chosenOption)};const _optGroupFather=_chosenOption.closest(".optgroup");if(!_optGroupFather)_setAndScroll2ActiveOption();else{const _scroll2headerOrOption=_=>{_setAndScroll2ActiveOption();if(_currIdx==0||_optGroupFather!==allItems[_currIdx-1].closest(".optgroup")&&direction<0)scrollToOption(_optGroupFather.querySelector(".optgroup-header"),"smooth",direction==0)};if(_optGroupFather.firstChild.checked)_scroll2headerOrOption();else{_optGroupFather.lastChild.addEventListener("transitionend",function _tmpFnc(e){e.target.removeEventListener("transitionend",_tmpFnc);_scroll2headerOrOption()});_optGroupFather.firstChild.checked=true}}}}function onKeyDown(evt){if(sddDropdownContent.classList.contains("allow-hover-on-item"))sddDropdownContent.classList.remove("allow-hover-on-item");let _makeSelect=false;if(evt instanceof KeyboardEvent&&_settings.makeSelectKey.trim()!==""){const _keyName=_settings.makeSelectKey.trim().toUpperCase();_makeSelect=true;if(_keyName.includes("CTRL"))_makeSelect&=evt.ctrlKey||evt.metaKey;if(_keyName.includes("SHIFT"))_makeSelect&=evt.shiftKey;if(_keyName.includes("ALT"))_makeSelect&=evt.altKey}const hotkeyOptions=[{task:"sdd_prevOption",kCode:["ArrowUp"],ignoreModifier:true,desc:"Mục ngay trước.",noNotify:true,callback:()=>getAdjacent(_activeOption,-1,_makeSelect)},{task:"sdd_nextOption",kCode:["ArrowDown"],ignoreModifier:true,desc:"Mục ngay sau.",noNotify:true,callback:()=>getAdjacent(_activeOption,1,_makeSelect)},{task:"sdd_pageUpOption",kCode:["PageUp"],ignoreModifier:true,desc:"Lên một trang.",noNotify:true,callback:()=>{evt.preventDefault();getAdjacent(_activeOption,-50,_makeSelect)}},{task:"sdd_pageDownOption",kCode:["PageDown"],ignoreModifier:true,desc:"Xuống một trang.",noNotify:true,callback:()=>{evt.preventDefault();getAdjacent(_activeOption,50,_makeSelect)}},{task:"sdd_prevFilterOptGrpFirstOption",kCode:["ArrowLeft"],ignoreModifier:true,desc:"Tới mục đầu tiên của nhóm hiện tại (hoặc nhóm ngay trước).",noNotify:true,callback:()=>{if(!evt.altKey)getAdjacent(_activeOption,-35,_makeSelect)}},{task:"sdd_nextFilterOptGrpFirstOption",kCode:["ArrowRight"],ignoreModifier:true,desc:"Tới mục đầu tiên của nhóm tiếp theo.",noNotify:true,callback:()=>{if(!evt.altKey)getAdjacent(_activeOption,35,_makeSelect)}},{task:"sdd_prevFilterOptGrpLastOption",kCode:["Alt+ArrowLeft"],ignoreModifier:true,desc:"Tới mục cuối cùng của nhóm ngay trước.",noNotify:true,callback:()=>{if(evt.altKey)getAdjacent(_activeOption,-36,_makeSelect)}},{task:"sdd_nextFilterOptGrpLastOption",kCode:["Alt+ArrowRight"],ignoreModifier:true,desc:"Tới mục cuối cùng của nhóm hiện tại (hoặc nhóm tiếp theo).",noNotify:true,callback:()=>{if(evt.altKey)getAdjacent(_activeOption,36,_makeSelect)}},{task:"sdd_firstOption",kCode:["Ctrl+Home"],desc:"Tới mục đầu tiên.",callback:()=>{{getAdjacent(_activeOption,-100,_makeSelect);evt.preventDefault()}}},{task:"sdd_lastOption",kCode:["Ctrl+End"],desc:"Tới mục cuối cùng.",callback:()=>{getAdjacent(_activeOption,100,_makeSelect)}},{task:"sdd_gotoSelectedOption",kCode:["Home","End"],desc:"Quay về mục đang được chọn.",callback:()=>{getAdjacent(_selectedItem,0)}},{task:"sdd_clearSearchbox",kCode:["Shift+Backspace"],desc:"Xóa ô tìm kiếm.",callback:_=>{clearSearch()}},{task:"sdd_toggleDiacriticsMode",kCode:["Insert"],desc:"Đổi chế độ giữ dấu/bỏ dấu trước khi tìm kiếm.",callback:()=>{setDiacriticsFilterMode(evt);evt.preventDefault()}},{task:"sdd_closeDropdown",kCode:["Escape"],desc:"Đóng Dropdown.",callback:toggleDropdown},{task:"sdd_toggleExtraTitles",kCode:["Ctrl + Insert"],desc:"Ẩn/hiện tiêu đề phụ.",callback:toggleExtraTitles},{task:"sdd_closeOptGroups",kCode:["Tab"],desc:"Đóng/mở tất cả các nhóm mục.",callback:function(){evt.preventDefault();toggleOptGroups.call(this,evt,0)}},{task:"sdd_closeOptGroupsExceptSelective",kCode:["Shift + Tab"],desc:"Đóng tất cả các nhóm mục ngoại trừ nhóm đang chứa mục được chọn và mục đang có con trỏ.",callback:function(){evt.preventDefault();toggleOptGroups.call(this,evt,1)}},{task:"sdd_selectOption",kCode:["Enter","NumpadEnter"],ignoreModifier:true,desc:"Chọn mục hiện tại. Bấm cùng phím Shift để chọn mục mà không đóng Dropdown.",callback:()=>{if(_activeOption.classList.contains("disabled")){console.warn("SDD setSelected: disabled item cannot be selected.");return _notifyFunction(`Sách '${_activeOption.textContent}' bị disabled, không thể chọn.`)}setSelected(_activeOption,false,!evt.shiftKey)}}];if(!evt){const _hotKeysListTmp=hotkeyOptions.map(hotkey=>{let _temp=Object.assign({},hotkey);delete _temp.callback;return _temp});return _hotKeysListTmp}SddDropdown.prototype.runHotkey(evt,hotkeyOptions,1,_settings.callbacks.notify);evt.stopPropagation()}SddDropdown.prototype.runHotkey=function(evt,hotkeyOptions,keyPreventation=3,notifyFnc=_msg=>toast.showToast(_msg,toast.ToastType.Infor)){const _matchKeycode=(_shortcut,_code)=>_code&&_shortcut.match(new RegExp(`\\b${_code}\\b`,"i"));const hotkeyOpts=hotkeyOptions.filter(keyItem=>keyItem.kCode.some(_shortcut=>_matchKeycode(_shortcut,evt.code)));const[_stopPropagation,_preventDefault]=[keyPreventation%2,keyPreventation/2<<0];hotkeyOpts.forEach(hotkeyOpt=>{let _modifierKeys=true;if(evt instanceof KeyboardEvent){if(!hotkeyOpt.ignoreModifier){const _shortcut=hotkeyOpt.kCode.find(_shrtcut=>_matchKeycode(_shrtcut,evt.code)).trim();if(_shortcut.includes("+")){if(_matchKeycode(_shortcut,"Ctrl"))_modifierKeys&=evt.ctrlKey||evt.metaKey;if(_matchKeycode(_shortcut,"Shift"))_modifierKeys&=evt.shiftKey;if(_matchKeycode(_shortcut,"Alt"))_modifierKeys&=evt.altKey}else{const _modifierAsKey=_shortcut.match(/\b(Control|Shift|Alt)(Left|Right)\b/i);if(_modifierAsKey){const _modifierArray=["alt","ctrl","shift","meta"];let _modiKey=_modifierAsKey[1].toLowerCase();if(_modiKey=="control")_modiKey="ctrl";_modifierArray.forEach(_mk=>{if(_mk==_modiKey)_modifierKeys&=evt[_mk+"Key"];else _modifierKeys&=!evt[_mk+"Key"]})}else _modifierKeys=!(evt.altKey||evt.shiftKey||evt.ctrlKey||evt.metaKey)}}}if(_modifierKeys){hotkeyOpt.callback();if("function"==typeof notifyFnc&&!hotkeyOpt.noNotify)notifyFnc(hotkeyOpt.desc);if(_stopPropagation)evt.stopPropagation();if(_preventDefault)evt.preventDefault()}})};function toggleDropdown(evt){if(!sddDropdownWrapper.classList.contains("elm-hidden")){sddDropdownContent.style.maxHeight="0px";sddDropdownContent.addEventListener("transitionend",function _tmpFnc(e){sddDropdownContent.removeEventListener("transitionend",_tmpFnc);sddDropdownWrapper.classList.add("elm-hidden");_glowingElem(representativeDiv)});_activeOption=_selectedItem;if(evt!==-1)clearSearch()}else{sddDropdownWrapper.classList.remove("elm-hidden");const _maxHeight=Math.max(_settings.maxHeight[0],Math.min(_settings.maxHeight[1],window.innerHeight-sddDropdownContent.getBoundingClientRect().top-30));sddDropdownContent.addEventListener("transitionend",function _tmpFnc(e){sddDropdownContent.removeEventListener("transitionend",_tmpFnc);let _iniActiveOption=Boolean(_selectedItem.offsetParent)?_selectedItem:Boolean(_activeOption.offsetParent)?_activeOption:(_filteredItems??_items)[0];if(_iniActiveOption){setActiveOption(_iniActiveOption,true,true)}_glowingElem(sddDropdownWrapper)});sddDropdownContent.style.maxHeight=_maxHeight+"px";if(!isTouchDevice)sddSearchBox.focus();if(_dropdownOpenFirstTime){_doInternalAlignRight();reposTooltips(sddInputWrapper,{container:document.documentElement});_dropdownOpenFirstTime=false}}}function setSelected(clickedOption,seizeOnChange=false,closeOnSelect=true){if(_selectedItem===clickedOption){if("function"==typeof _settings.callbacks.notify)_settings.callbacks.notify("Bạn vừa chọn lại mục đang được chọn.")}else{if(_selectedItem)_selectedItem.classList.remove("is-selected");_activeOption=_selectedItem=clickedOption;representativeDiv.innerHTML=_settings.render.select_option(clickedOption,escape_html);clickedOption.classList.add("is-selected");if("function"==typeof _onChange&&!seizeOnChange)_onChange(clickedOption)}clearSearch();if(closeOnSelect&&!sddDropdownWrapper.classList.contains("elm-hidden")){toggleDropdown()}return clickedOption}function resetFilter(){sddDropdownStatusBar.classList.add("statusbar-hidden");sddDropdownContent.querySelector("DIV.no_results").classList.add("elm-hidden");_filteredItems=null;_items.forEach(option=>{if(option.classList.contains("is-active")){option.classList.remove("is-active")}if(option.classList.contains("elm-hidden"))option.classList.remove("elm-hidden");sHighlite.removeHighlight(option)});sddDropdownContent.querySelectorAll("div.optgroup").forEach(_optGroup=>{_optGroup.classList.remove("elm-hidden")})}function clearSearch(evt){sddSearchBox.value="";resetFilter();setActiveOption(_selectedItem,true,!!evt);evt instanceof Event&&evt.stopPropagation()}function filterItems(evt){let searchStr=sddSearchBox.value;resetFilter();searchStr=searchStr.replaceAll(/\s\s+/g," ").trim();if(searchStr=="")return;sHighlite.queryString=searchStr;const matchedItems=_items.filter(item=>sHighlite.matchSearch(item.textContent));const indexesArr=matchedItems.map(item=>_items.indexOf(item));_filteredItems=matchedItems;if(matchedItems.length==0)sddDropdownStatusBar.classList.add("statusbar-hidden");else{sddDropdownStatusBar.classList.remove("statusbar-hidden");sddDropdownStatusBar.innerHTML=`Tìm thấy <mark>${matchedItems.length}</mark> kết quả.${window.innerWidth<500?"<br/>":" "}Mode <small><mark>${sHighlite.wordMode}</mark>＋<mark>${sHighlite.diacriticsFilterMode?"Bỏ dấu":"Nguyên dấu"}</mark></small>.`;if(!sddDropdownStatusBar.classList.contains("statusbar-hidden")&&sddDropdownStatusBar.lastTO)clearTimeout(sddDropdownStatusBar.lastTO);sddDropdownStatusBar.lastTO=setTimeout(_=>{sddDropdownStatusBar.classList.add("statusbar-hidden")},_settings.statusBarTimeout)}_items.forEach(item=>{const optionIdx=_items.indexOf(item);sHighlite.removeHighlight(item);item.classList.remove("is-active");if(!indexesArr.includes(optionIdx)){item.classList.add("elm-hidden")}else{if(item.classList.contains("elm-hidden"))item.classList.remove("elm-hidden");sHighlite.highlight(item)}});sddDropdownContent.querySelectorAll("DIV.optgroup").forEach(_optGroup=>{if(_optGroup.querySelectorAll("section > .sdd-dropdown-item:not(.elm-hidden)").length==0)_optGroup.classList.add("elm-hidden");else _optGroup.querySelector('[id^="grpChkbox"]').checked=true});sddDropdownContent.querySelector("DIV.no_results").classList.toggle("elm-hidden",matchedItems.length>0);if(matchedItems.length>0){if(matchedItems.includes(_selectedItem))setActiveOption(_selectedItem,true,false);else setActiveOption(matchedItems[0])}evt&&evt.stopPropagation()}function closeIfClickedOutside(evt){if(!sddDropdownWrapper.classList.contains("elm-hidden")&&evt.target.closest(".sdd-wrapper")!==_sddWrapper){toggleDropdown(-1)}}function toggleOptGroups(evt,type){const _toggleButton=sddInputWrapper.querySelector(".close-open-groups-button");const allChkboxElem=sddDropdownContent.querySelectorAll("div.optgroup > input[type='checkbox']");if(allChkboxElem.length===0)return;const checkedCount=[...allChkboxElem].reduce((count,_chkBox)=>count+_chkBox.checked,0);const toChecked=checkedCount<allChkboxElem.length/2;allChkboxElem.forEach(chkBox=>chkBox.checked=toChecked);if(type==1&&!toChecked){sddDropdownContent.querySelectorAll("div.optgroup > input[type='checkbox']:has( +label+section>.sdd-dropdown-item:is(.is-selected,.is-active) )").forEach(chkBox=>chkBox.checked=true)}if(toChecked||type==1)setTimeout(scrollToOption.bind(null,_selectedItem,"smooth",true),800);evt&&evt.stopPropagation()}function toggleExtraTitles(evt){let _middle_viewport_anchor_option=null;_items.some(_item=>{if(_item.offsetTop+_item.offsetHeight>sddDropdownContent.scrollTop+sddDropdownContent.offsetHeight/2&&_item.offsetTop<sddDropdownContent.scrollTop+sddDropdownContent.offsetHeight){_middle_viewport_anchor_option=_item;return true}});const _toggle_extra_title_button=sddInputWrapper.querySelector(".toggle-extra-title-button");if(!_toggle_extra_title_button.offsetParent)return;_toggle_extra_title_button.toggleAttribute("attr-extra-title-hidden");_sddWrapper.classList.toggle("hideOptionExtraTitle");_doInternalAlignRight();if(!_middle_viewport_anchor_option)sddInputWrapper.querySelector(".jump-to-selected-item-button").click();else{scrollToOption(_middle_viewport_anchor_option,"auto",true);setTimeout(_=>sddDropdownContent.scrollTop-=.1,100)}}function clearSearchButtonClick(evt){setTimeout(_=>sddSearchBox.focus(),0);clearSearch(evt)}function restoreHoverOnOption(){if(!sddDropdownContent.classList.contains("allow-hover-on-item"))sddDropdownContent.classList.add("allow-hover-on-item")}function setDiacriticsFilterMode(_evt_forcedState){const _sddDiacriticsOptionBtn=sddInputWrapper.querySelector(".search-diacritics-option-button");if(_evt_forcedState!==undefined){if(_evt_forcedState==event){_settings.diacriticsFilterMode=!_settings.diacriticsFilterMode;if("function"==typeof _settings.callbacks.diacriticsFilterModeOnChanged)_settings.callbacks.diacriticsFilterModeOnChanged(_settings.diacriticsFilterMode)}else if(typeof _evt_forcedState=="boolean"){_settings.diacriticsFilterMode=_evt_forcedState;if("function"==typeof _settings.callbacks.diacriticsFilterModeOnChanged)_settings.callbacks.diacriticsFilterModeOnChanged(_settings.diacriticsFilterMode)}sHighlite.diacriticsFilterMode=_settings.diacriticsFilterMode;filterItems()}_sddDiacriticsOptionBtn.classList.toggle("search-diacritics-exactSearch",!_settings.diacriticsFilterMode);_sddDiacriticsOptionBtn.dataset.tooltip=_settings.diacriticsFilterMode?"Chữ nét, nền vàng: Tìm kiếm bỏ dấu cả từ tìm (keyword) và đích tìm.\nVí dụ: nếu cần tìm 'hoàn Kiếm' hoặc 'Hoàng Kiệm' gõ 'hoan kiem', 'Họa KiẾM' hoặc 'hÓan kIêm' đều tìm được":"Chữ nhòe: tìm kiếm nguyên dấu.\nVí dụ muốn tìm 'Hoàn Kiếm' thì phải gõ 'Hoàn Kiếm', nếu chỉ gõ 'Hoan Kiếm' sẽ không tìm ra."}const _rightAlignElems=(_container,_subContainerElemQueryStr="div.sdd-dropdown-item")=>{const _allSubContainers=_container.querySelectorAll(_subContainerElemQueryStr);if(_allSubContainers.length<=1)return;const _alignElemTags=Array.from(_allSubContainers[0].querySelectorAll("[data-rAlignGroup]")).map(elem=>{return{tagName:elem.tagName,attrId:elem.dataset.raligngroup,elemsArray:[],maxWidth:0}});_allSubContainers.forEach(_option=>{_alignElemTags.forEach(_tag=>{const queryStr=_tag.tagName+"[data-rAlignGroup = '"+_tag.attrId+"']";const _elem=_option.querySelector(queryStr);_tag.elemsArray.push(_elem);_tag.maxWidth=Math.max(_tag.maxWidth,_elem.offsetWidth)})});_alignElemTags.forEach(_tag=>{if(_tag.maxWidth>0)_tag.elemsArray.forEach(_elem=>_elem.style.width=_tag.maxWidth+"px")});_alignElemTags.length=0};const _doInternalAlignRight=_=>{if(_alignRightElementsDoneFlag)return;const _doSubAlignRight=_subQueryStr=>{const _allSections=sddDropdownContent.querySelectorAll("div.optgroup > section");if(_allSections.length>0&&_settings.rightAlignInEachOptGroup)_allSections.forEach(sectionElem=>_rightAlignElems(sectionElem));else _rightAlignElems(sddDropdownContent)};const _extraTitleHidden=sddInputWrapper.querySelector(".toggle-extra-title-button").hasAttribute("attr-extra-title-hidden");if(_dropdownOpenFirstTime){if(_extraTitleHidden){_doSubAlignRight("div.sdd-dropdown-item > :not(div.item-2nd-main-div)")}else{_doSubAlignRight();_alignRightElementsDoneFlag=true}}else{if(!_extraTitleHidden&&!_alignRightElementsDoneFlag){_doSubAlignRight("div.sdd-dropdown-item > div.item-2nd-main-div");_alignRightElementsDoneFlag=true}}};function scrollToOption(option,behavior="auto",toMiddle=false){_scrollToElement(sddDropdownContent,option,behavior,toMiddle)}function _scrollToElement(container,option,behavior="auto",toMiddle=false){if(!option)return;function scroll(scrollTop,behavior){if(behavior){container.style.scrollBehavior=behavior}container.scrollTop=scrollTop;container.style.scrollBehavior=""}const _containerHeight=container.clientHeight;const scrollTop=container.scrollTop||0;const _itemHeight=option.offsetHeight;const y=option.getBoundingClientRect().top-container.getBoundingClientRect().top+scrollTop;if(toMiddle)return scroll(y-_containerHeight/2+_itemHeight,behavior);if(y+_itemHeight>_containerHeight+scrollTop){scroll(y-_containerHeight+_itemHeight,behavior)}else if(y<scrollTop){scroll(y,behavior)}}function _setSDDAvatar(_spriteIcon){function svgSprite2Background(_sprite){const _pathMarup=_sprite.innerHTML.replace(/\"/g,"'").replace(/[\t\n\r]/g,"");const _svgMarkup=`<svg xmlns='http://www.w3.org/2000/svg' viewBox='${_sprite.getAttribute("viewBox")}'>${_pathMarup}</svg>`;return`url("data:image/svg+xml;utf8,${_svgMarkup}")`}let _bgrndCss="";if(_spriteIcon instanceof SVGElement)_bgrndCss=svgSprite2Background(_spriteIcon);else if("string"===typeof _spriteIcon){if(_spriteIcon.match(/^https?:\/\//))_bgrndCss=`url('${_spriteIcon}')`;else _bgrndCss=svgSprite2Background(document.getElementById(_spriteIcon))}if(_bgrndCss)representativeDiv.style.setProperty("--sdd-avatar-icon",_bgrndCss)}const _glowingElem=_elem=>{_elem.classList.add("glowing-border");_elem.addEventListener("animationend",function _tmp_glowing_end(evt){_elem.removeEventListener("animationend",_tmp_glowing_end);_elem.classList.remove("glowing-border")})};function SearchHighlite(diacriticsFilterMode){let _diacriticsFilterMode=diacriticsFilterMode??false;Object.defineProperty(this,"diacriticsFilterMode",{get(){return _diacriticsFilterMode},set(val){_diacriticsFilterMode=Boolean(val)}});const _WORD_MODE=Object.freeze({Number:"Số",Break:"Khớp từ",FirstLetter:"Chữ cái đầu",Phrase:"Cụm từ"});let _wordSearchMode=_WORD_MODE.Break;Object.defineProperty(this,"wordMode",{get(){return _wordSearchMode}});let _searchKeys=[];Object.defineProperty(this,"queryString",{get(){return _searchKeys},set(queryStr){_searchKeys=queryStr2RegexWords(queryStr)}});const asciifold=function(){const DIACRITICS={0:"߀",a:"àáạảãâầấậẩẫăằắặẳẵÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄⱥɐɑ",b:"␢βΒB฿𐌁ᛒƀɓƃ",c:"ĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃꜿƈȼↄ",d:"đĐĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄðđɗɖᴅƌꮷԁɦ",e:"èéẹẻẽêềếệểễÈÉẸẺẼÊỀẾỆỂỄÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐεɛǝᴇɇ",f:"ƑƒḞḟꝼƒ",g:"ɢ₲ǤǥĜĝĞğĢģƓɠĠġǥɠꞡᵹꝿɢ",h:"ĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕħⱨⱶɥ",i:"ìíịỉĩÌÍỊỈĨÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉɨı",j:"ȷĴĵɈɉʝɟʲɉȷ",k:"ƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭ƙⱪꝁꝃꝅꞣ",l:"ŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌłƚɫⱡꝉꝇꞁɭ",n:"ŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋꞥƞɲꞑᴎлԉ",o:"òóọỏõôồốộổỗơờớợởỡÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօøǿɔɵꝋꝍᴑ",p:"ṔṕṖṗⱣᵽƤƥᵱƥᵽꝑꝓꝕρ",q:"ꝖꝗʠɊɋꝘꝙq̃ꝗꝙɋ",r:"ŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽɍɽꝛꞧꞃ",s:"ŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈ßȿꞩꞅʂ",t:"ŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭŧƭʈⱦꞇ",u:"ùúụủũưừứựửữÙÚỤỦŨƯỪỨỰỬỮŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪ʉ",v:"ṼṽṾṿƲʋꝞꝟⱱʋʋꝟʌ",w:"ẂẃẀẁŴŵẄẅẆẇẈẉⱳ",x:"ẌẍẊẋχ",y:"ỳýỵỷỹỲÝỴỶỸÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴƴɏỿ",z:"ŹźẐẑŽžŻżẒẓẔẕƵƶƶȥɀⱬꝣ","/":"⁄∕",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",m:"ɱɯϻ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",th:"þ",tz:"ꜩ",vy:"ꝡ",hv:"ƕ"};let foreignletters="";let lookup={};for(const k in DIACRITICS){if(DIACRITICS.hasOwnProperty(k)){const chunk=DIACRITICS[k];foreignletters+=chunk;for(let i=0,n=chunk.length;i<n;i++){lookup[chunk.charAt(i)]=k}}}let regexp=new RegExp("["+foreignletters+"]","g");return function(str){return str.replace(regexp,function(foreignletter){return lookup[foreignletter]}).toLowerCase()}}();const uni2Latin=(txtContent,forceRemoveDiacratics=false)=>{txtContent=txtContent.replaceAll(/\s\s+/g," ").trim();if(!_diacriticsFilterMode&&!forceRemoveDiacratics)return txtContent.toLowerCase();txtContent=txtContent.normalize("NFC").toLowerCase();return asciifold(txtContent)};function queryStr2RegexWords(queryStr){if(!queryStr)return null;queryStr=queryStr.trim();const _allLeters="[A-zÀ-ÖØ-öø-įĴ-őŔ-žǍ-ǰǴ-ǵǸ-țȞ-ȟȤ-ȳɃɆ-ɏḀ-ẞƀ-ƓƗ-ƚƝ-ơƤ-ƥƫ-ưƲ-ƶẠ-ỿ]";const _matchLeterRegex=new RegExp(_allLeters,"iu");if(queryStr.match(/^[\d.]+$/))_wordSearchMode=_WORD_MODE.Number;else if(queryStr.length>1&&_matchLeterRegex.test(queryStr)&&queryStr==queryStr.toUpperCase())_wordSearchMode=_WORD_MODE.FirstLetter;else if(queryStr.length>1&&_matchLeterRegex.test(queryStr)&&queryStr==queryStr.toLowerCase())_wordSearchMode=_WORD_MODE.Phrase;else _wordSearchMode=_WORD_MODE.Break;queryStr=uni2Latin(queryStr);const escape_regex=str=>{return(str+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1")};let searchKeys;if(_wordSearchMode==_WORD_MODE.FirstLetter){const _word=_diacriticsFilterMode?"[A-z]*":_allLeters+"*";searchKeys=queryStr.replace(/\s/g,"").split("").map(key=>escape_regex(key)+_word)}else if(_wordSearchMode==_WORD_MODE.Phrase){searchKeys=[queryStr.replace(/\s{2,}/g," ").trim()]}else searchKeys=queryStr.trim().split(/\s+/).map(key=>escape_regex(key)).sort((a,b)=>b.length-a.length);return searchKeys}const _char_separator="[\\s\\$\\(\\)\\*\\-–—\\+,;\\.!&*\\?\\[\\]\\^\\{\\|\\}\\\\]";const makeFirstCharModeRegEx=searchKeysArray=>{const _word_seperator="\\s+";const _markBegin=_diacriticsFilterMode?"\\b":`(?<=^|${_char_separator})`;const _markEnd=_diacriticsFilterMode?"\\b":`(?=${_char_separator}|$)`;return new RegExp(_markBegin+searchKeysArray.join(_word_seperator)+_markEnd,"iu")};const makePhraseModeRegEx=searchKeysArray=>{const _word_seperator="\\s+";const _markBegin=_diacriticsFilterMode?"\\b":`(?<=^|${_char_separator})`;return new RegExp(_markBegin+searchKeysArray.join(_word_seperator),"iu")};function matchSearch(searchKeys,txtContent){if(!searchKeys)return true;txtContent=uni2Latin(txtContent);let isMatched;if(_wordSearchMode==_WORD_MODE.FirstLetter){const regEx=makeFirstCharModeRegEx(searchKeys);isMatched=regEx.test(txtContent)}else if(_wordSearchMode==_WORD_MODE.Phrase){const regEx=makePhraseModeRegEx(searchKeys);isMatched=regEx.test(txtContent)}else isMatched=searchKeys.reduce((ismatch,key)=>{if(!ismatch)return false;const regEx=new RegExp(`(${key})`,"i");return ismatch&=regEx.test(txtContent)},true);return!!isMatched}const highlightOneKey=(elem,regex)=>{if(regex===null)return;const replaceNode=(existing,replacement)=>{if(existing.parentNode)existing.parentNode.replaceChild(replacement,existing)};if(typeof regex==="string"){if(!regex.length)return;regex=new RegExp(regex,"i")}const highlightText=node=>{var match=uni2Latin(node.data).match(regex);if(match&&node.data.length>0){var spannode=document.createElement("span");spannode.className="highlight";var middlebit=node.splitText(match.index);middlebit.splitText(match[0].length);var middleclone=middlebit.cloneNode(true);spannode.appendChild(middleclone);replaceNode(middlebit,spannode);return 1}return 0};const highlightChildren=node=>{if(node.nodeType===Node.ELEMENT_NODE&&node.childNodes&&!/(script|style)/i.test(node.tagName)&&(node.className!=="highlight"||node.tagName!=="SPAN")){Array.from(node.childNodes).forEach(element=>{highlightRecursive(element)})}};const highlightRecursive=node=>{if(node.nodeType===Node.TEXT_NODE){return highlightText(node)}highlightChildren(node);return 0};highlightRecursive(elem)};const removeHighlight=elem=>{var elements=elem.querySelectorAll("span.highlight");Array.prototype.forEach.call(elements,function(el){var parent=el.parentNode;parent.replaceChild(el.firstChild,el);parent.normalize()})};this.WORD_MODE=_WORD_MODE;this.removeHighlight=removeHighlight;this.matchSearch=txtContent=>{return matchSearch(_searchKeys,txtContent)};this.highlight=elem=>{if(_wordSearchMode==_WORD_MODE.FirstLetter){const regEx=makeFirstCharModeRegEx(_searchKeys);highlightOneKey(elem,regEx)}else if(_wordSearchMode==_WORD_MODE.Phrase){const regEx=makePhraseModeRegEx(_searchKeys);highlightOneKey(elem,regEx)}else _searchKeys.forEach(regexKey=>highlightOneKey(elem,regexKey))}}let sddRegisterEvents=()=>{sddDropdownContent.addEventListener("click",dropdownItemClickDelegation);sddDropdownContent.addEventListener("mousemove",restoreHoverOnOption);representativeDiv.addEventListener("click",toggleDropdown);sddSearchBox.addEventListener("input",filterItems);sddSearchBox.addEventListener("keydown",onKeyDown);document.addEventListener("click",closeIfClickedOutside);sddInputWrapper.querySelector(".close-open-groups-button").addEventListener("click",toggleOptGroups);sddInputWrapper.querySelector(".jump-to-selected-item-button").addEventListener("click",_=>getAdjacent(_selectedItem,0));sddInputWrapper.querySelector(".toggle-extra-title-button").addEventListener("click",toggleExtraTitles);sddInputWrapper.querySelector(".clear-input-button").addEventListener("click",clearSearchButtonClick);sddInputWrapper.querySelector(".search-diacritics-option-button").addEventListener("click",setDiacriticsFilterMode)};let sddUnregisterEvents=()=>{sddDropdownContent.removeEventListener("click",dropdownItemClickDelegation);sddDropdownContent.removeEventListener("mousemove",restoreHoverOnOption);representativeDiv.removeEventListener("click",toggleDropdown);sddSearchBox.removeEventListener("input",filterItems);sddSearchBox.removeEventListener("keydown",onKeyDown);document.removeEventListener("click",closeIfClickedOutside);sddInputWrapper.querySelector(".close-open-groups-button").removeEventListener("click",toggleOptGroups);sddInputWrapper.querySelector(".toggle-extra-title-button").removeEventListener("click",toggleExtraTitles);sddInputWrapper.querySelector(".clear-input-button").removeEventListener("click",clearSearchButtonClick);sddInputWrapper.querySelector(".search-diacritics-option-button").removeEventListener("click",setDiacriticsFilterMode)};let selectItem=(option,seizeOnChange=false)=>{if(typeof option==="number"){const _index=option;if(_index<0||_index>=_items.length){console.warn("SDD selectedIndex set: index out of bound");return null}else return setSelected(_items[_index],seizeOnChange)}if(typeof option==="string"){let value=option.toString().toLowerCase().trim();if(!value){console.warn("SDD value set: no value to set");return null}let foundItem=_items.filter(item=>item.value.toLowerCase()==value);if(foundItem.length==0){console.warn("SDD value set: no such value");return null}return setSelected(foundItem[0],seizeOnChange)}if(typeof option==="object"&&option instanceof HTMLElement){if(_items.indexOf(option)==-1)option=_items[0];return setSelected(option,seizeOnChange)}};const loadSDDMode=Object.freeze({SettingLoadOnly:"justSomeSettings",DataLoadOnly:"loadDataOnly",All:"SettingsAndData"});function loadDropdown(_settingParam,loadMode=loadSDDMode.All,initSelectedItem){if("object"!==typeof _settingParam)return console.error("Search-Dropdown need to be initialized with a setting parameter");if(loadMode!==loadSDDMode.DataLoadOnly){const _DEFAULT_PROPS={displayOneLine:false,makeSelectKey:"Ctrl + Shift",maxHeight:[400,900],customizedCssClass:null,avatarIcon:null,searchBoxPlaceholder:"Search in {_items_length} items ...",statusBarTimeout:5e3,rightAlignInEachOptGroup:true,diacriticsFilterMode:true,valueField:"value",optgroupField:"gId",searchField:[]};const _DEFAULT_RENDER={option:(data,escape)=>{return"<span>"+escape(data["label"])+"</span>"},select_option:(option,escape)=>{return"<span>"+escape(option.textContent)+"</span>"},optgroup_header:(data,escape)=>{return"<span>"+escape(data["label"])+"</span>"},no_results:()=>{return"<span>No results found</span>"}};const _DEFAULT_CALLBACKS={onChange:null,notify:message=>{toast.showToast(message,toast.ToastType.Warning)},diacriticsFilterModeOnChanged:null};if(_settingParam.maxHeight){if(!Array.isArray(_settingParam.maxHeight))delete _settingParam.maxHeight}_settings={};_settings=Object.assign({},_DEFAULT_PROPS,_settingParam);_settings.render=Object.assign({},_DEFAULT_RENDER,_settingParam.render);_settings.callbacks=Object.assign({},_DEFAULT_CALLBACKS,_settingParam.callbacks);const _customizedCss=_settings.customizedCssClass;if(_customizedCss)_sddWrapper.classList.add(_customizedCss);if(_settings.avatarIcon)_setSDDAvatar(_settings.avatarIcon);_onChange=_settings.callbacks.onChange;if("function"==typeof _settings.callbacks.notify)_notifyFunction=_settings.callbacks.notify;sHighlite=new SearchHighlite(_settings.diacriticsFilterMode);setDiacriticsFilterMode()}if(loadMode!==loadSDDMode.SettingLoadOnly){if(loadMode===loadSDDMode.DataLoadOnly){_settings=Object.assign(_settings,_settingParam)}populateDropdown(initSelectedItem);_dropdownOpenFirstTime=true;_alignRightElementsDoneFlag=false;sddInputWrapper.querySelector(".close-open-groups-button").dataset.toggleState=0}}this.onchange=()=>{if("function"==typeof _onChange)_onChange(_selectedItem)};this.loadDropdown=loadDropdown;this.selectItem=selectItem;this.sddUnregisterEvents=sddUnregisterEvents;this.toggle=toggleDropdown;SddDropdown.prototype.rightAlignElems=_rightAlignElems;SddDropdown.prototype.scrollToElement=_scrollToElement;this.glowing=_=>_glowingElem(representativeDiv);this.nextItem=_=>goAdjacent(1);this.prevItem=_=>goAdjacent(-1);if("object"==typeof _settingParam)loadDropdown(_settingParam);sddRegisterEvents()}
</script>

<svg width="0" height="0" class="elm-hidden" style="content-visibility: hidden" id="core-svg-icon"><symbol id="icnSvgReload" viewBox="0 0 122.88 118.66"><path d="M 16.68,22.2 C 14.9,24.41 13.25,26.75 11.62,29.66 5.63,40.31 3.1,52.39 4.13,64.2 5.14,75.74 9.56,87.03 17.5,96.47 c 2.85,3.39 5.91,6.38 9.13,8.97 11.11,8.93 24.28,13.34 37.41,13.22 13.13,-0.12 26.21,-4.78 37.14,-13.98 3.19,-2.68 6.18,-5.73 8.91,-9.13 6.4,-7.96 10.51,-17.29 12.07,-27.14 1.53,-9.67 0.59,-19.83 -3.07,-29.66 C 115.6,29.4 110.27,21.07 103.31,14.54 96.7,8.33 88.59,3.76 79.2,1.48 76.26,0.77 73.26,0.3 70.21,0.11 c -3.06,-0.2 -6.19,-0.13 -9.4,0.22 -2.01,0.22 -3.46,2.03 -3.24,4.04 0.22,2.01 2.03,3.46 4.04,3.24 2.78,-0.31 5.49,-0.37 8.14,-0.19 2.65,0.17 5.23,0.57 7.73,1.17 8.11,1.96 15.1,5.91 20.84,11.29 6.14,5.75 10.85,13.12 13.94,21.43 3.21,8.61 4.04,17.51 2.7,25.96 -1.37,8.58 -4.96,16.73 -10.56,23.69 -2.47,3.07 -5.12,5.78 -7.91,8.13 -9.59,8.07 -21.03,12.15 -32.5,12.26 -11.47,0.11 -23,-3.76 -32.76,-11.61 C 28.33,97.41 25.61,94.76 23.1,91.77 16.18,83.55 12.33,73.68 11.45,63.57 10.54,53.19 12.77,42.58 18.02,33.24 19.61,30.42 21.23,28.17 23.03,26 l 0.53,14.7 c 0.07,2.02 1.76,3.6 3.78,3.53 2.02,-0.07 3.6,-1.76 3.53,-3.78 L 30.02,17.03 c -0.07,-2.02 -1.76,-3.59 -3.78,-3.52 -0.13,0.01 -0.25,0.02 -0.37,0.03 v 0 l -22.7,3.19 c -2,0.28 -3.4,2.12 -3.12,4.13 0.28,2 2.12,3.4 4.13,3.12 z M 98.2393,58.71 42.72725,89.104525 42.282275,31.187 Z"/></symbol><symbol id="icnSvgPlay" viewBox="0 0 24 24"><path d="m10 16.5 6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></symbol><symbol id="icnSvgPause" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"/></symbol><symbol id="icnSvgFastForward" viewBox="0 0 512 512"><path d="M256 0c70.69 0 134.7 28.66 181.02 74.98C483.34 121.31 512 185.32 512 256.01c0 70.68-28.66 134.69-74.98 181.01C390.7 483.34 326.68 512 256 512s-134.69-28.66-181.02-74.98C28.66 390.7 0 326.69 0 256.01c0-70.68 28.66-134.7 74.98-181.03C121.31 28.66 185.32 0 256 0zm110.47 269.8c10.3-9.17 10.02-17.33 0-26.62l-86.09-76.78c-11.21-7.03-22.9-2.9-22.59 11.73l.12 43.14-61.54-54.87c-11.2-7.03-22.89-2.9-22.59 11.73l.45 154.47c.96 15.86 10.01 20.21 23.37 12.87l60.51-53.95.12 41.08c.96 15.86 10.01 20.21 23.36 12.87l84.88-75.67zm46.28-170.55C372.64 59.15 317.22 34.33 256 34.33S139.36 59.15 99.26 99.25c-40.11 40.11-64.93 95.55-64.93 156.76 0 61.21 24.82 116.63 64.93 156.74 40.1 40.1 95.52 64.92 156.74 64.92 61.21 0 116.64-24.82 156.75-64.92 40.1-40.11 64.92-95.53 64.92-156.74 0-61.23-24.82-116.65-64.92-156.76z"/></symbol><symbol id="icnSvgSkipNext" viewBox="0 0 512 512"><path d="M255.99 0c70.68 0 134.7 28.66 181.02 74.98C483.33 121.3 512 185.31 512 256c0 70.68-28.67 134.69-74.99 181.01C390.69 483.33 326.67 512 255.99 512S121.3 483.33 74.98 437.01C28.66 390.69 0 326.68 0 256c0-70.67 28.66-134.7 74.98-181.02C121.3 28.66 185.31 0 255.99 0zm53.25 163.2h29.85c5.65 0 10.27 4.66 10.27 10.28v165.04c0 5.62-4.65 10.28-10.27 10.28h-29.85c-5.63 0-10.28-4.63-10.28-10.28V173.48c0-5.65 4.63-10.28 10.28-10.28zm-41.69 106.6c10.29-9.17 10.01-17.33 0-26.62l-82.3-76.78c-11.21-7.03-22.9-2.9-22.59 11.73l.44 154.47c.97 15.86 10.01 20.21 23.37 12.87l81.08-75.67zM412.74 99.25c-40.1-40.1-95.54-64.92-156.75-64.92-61.21 0-116.63 24.82-156.74 64.92-40.1 40.11-64.92 95.54-64.92 156.75 0 61.22 24.82 116.64 64.92 156.74 40.11 40.11 95.53 64.93 156.74 64.93 61.21 0 116.65-24.82 156.75-64.93 40.11-40.1 64.93-95.52 64.93-156.74 0-61.22-24.82-116.64-64.93-156.75z"/></symbol><symbol id="icnSvgPlayProgress" viewBox="0 0 142 142"><g transform="rotate(-90 71 71)"><circle r="61" cx="71" cy="71" fill="transparent" stroke="var(--audio-playing-current-progress-remained-color)" stroke-width="16px" stroke-dasharray="383.08000000000004px" stroke-dashoffset="0"/><circle id="svgProgressCirclePlaying" r="61" cx="71" cy="71" stroke="var(--audio-playing-current-progress-played-color)" stroke-width="16px" stroke-linecap="round" stroke-dashoffset="var(--audio-playing-current-progress-percent)" fill="transparent" stroke-dasharray="383.08000000000004px"/></g><polygon transform="translate(53 32), scale(0.6)" style="fill-rule:evenodd;clip-rule:evenodd" points="92.2,60.97 0,122.88 0,0 92.2,60.97"/></symbol><symbol id="icnSvgPauseProgress" viewBox="0 0 142 142"><path transform="translate(14.95 14.9), scale(0.915)" style="fill-rule:evenodd;clip-rule:evenodd" d="M61.44,0c33.93,0,61.44,27.51,61.44,61.44c0,33.93-27.51,61.44-61.44,61.44S0,95.37,0,61.44 C0,27.51,27.51,0,61.44,0L61.44,0z M68.16,33.88H84.1V89l-15.94,0V33.88L68.16,33.88L68.16,33.88z M38.78,33.88h15.94V89l-15.94,0 V33.88L38.78,33.88L38.78,33.88z"/><g transform="rotate(-90 71 71)"><circle r="61" cx="71" cy="71" fill="transparent" stroke="var(--audio-playing-current-progress-remained-color)" stroke-width="10" stroke-dasharray="383.08000000000004px" stroke-dashoffset="0"/><circle id="svgProgressCirclePaused" r="61" cx="71" cy="71" stroke="var(--audio-playing-current-progress-played-color)" stroke-width="10" stroke-linecap="round" stroke-dashoffset="var(--audio-playing-current-progress-percent)" fill="transparent" stroke-dasharray="383.08000000000004px"/></g></symbol><symbol id="icnSvgVolumeOn" viewBox="0 1.01 16 13.99"><path d="M7 1.008a.99.99 0 0 0-.77.351L3 5H2C.906 5 0 5.844 0 7v2c0 1.09.91 2 2 2h1l3.23 3.64A.97.97 0 0 0 7 15zm6.46.96a1 1 0 0 0-.558.169 1.005 1.005 0 0 0-.27 1.39 7.995 7.995 0 0 1 0 8.946 1.005 1.005 0 0 0 .27 1.39 1.005 1.005 0 0 0 1.391-.27 10.015 10.015 0 0 0 0-11.187 1 1 0 0 0-.832-.437m-3.42 2.02A1.004 1.004 0 0 0 9 4.996v.059a.95.95 0 0 0 .2.535 4 4 0 0 1 0 4.816.97.97 0 0 0-.2.535v.063c0 .305.133.605.395.805a1 1 0 0 0 1.398-.2A5.98 5.98 0 0 0 12 8a6 6 0 0 0-1.207-3.613 1 1 0 0 0-.754-.399m0 0"/></symbol><symbol id="icnSvgVolumeOff" viewBox="0 1.01 15.01 13.99"><path d="M7 1.008a.99.99 0 0 0-.77.351L3 5H2C.906 5 0 5.844 0 7v2c0 1.09.91 2 2 2h1l3.23 3.64A.97.97 0 0 0 7 15zM10 5a1 1 0 0 0-.707 1.707L10.586 8 9.293 9.293a1 1 0 1 0 1.414 1.414L12 9.414l1.293 1.293a1 1 0 1 0 1.414-1.414L13.414 8l1.293-1.293a1 1 0 1 0-1.414-1.414L12 6.586l-1.293-1.293A1 1 0 0 0 10 5m0 0"/></symbol><symbol id="icnSvgMinusSign" viewBox="0 0 24 24"><g transform="matrix(0.22 0 0 0.22 12 12)"><path transform=" translate(-50, -50)" d="M 94.75 50 C 94.75 56.213 89.514 61.25 83.054 61.25 L 16.946 61.25 C 10.486 61.25 5.25 56.213 5.25 50 L 5.25 50 C 5.25 43.787 10.486 38.75 16.945999999999998 38.75 L 83.053 38.75 C 89.514 38.75 94.75 43.787 94.75 50 L 94.75 50 z"/></g></symbol><symbol id="icnSvgPlusSign" viewBox="0 0 24 24"><g transform="matrix(0.22 0 0 0.22 12 12)"><path transform="translate(-50, -50)" d="M 40.747 13.955 L 59.254000000000005 13.955 C 60.353 13.955 61.242000000000004 14.845 61.242000000000004 15.941 L 61.242000000000004 38.787 L 84.08600000000001 38.787 C 85.18400000000001 38.787 86.07000000000001 39.675 86.07000000000001 40.772999999999996 L 86.07000000000001 59.226 C 86.07000000000001 60.324999999999996 85.183 61.211999999999996 84.08600000000001 61.211999999999996 L 61.242 61.211999999999996 L 61.242 84.05799999999999 C 61.242 85.157 60.352 86.044 59.254 86.044 L 40.747 86.044 C 39.652 86.044 38.762 85.15599999999999 38.762 84.05799999999999 L 38.762 61.213 L 15.915 61.213 C 14.819999999999999 61.213 13.93 60.325 13.93 59.227000000000004 L 13.93 40.773 C 13.93 39.67400000000001 14.82 38.787000000000006 15.915 38.787000000000006 L 38.762 38.787000000000006 L 38.762 15.941 C 38.762 14.845 39.651 13.955 40.747 13.955 z"/></g></symbol><symbol id="icnSvgJump2PlayingChap" viewBox="3.74 4.53 16.35 14.79"><path d="M8.694 7.625V6.003h9.782v11.854H8.859v-1.292H7.238v2.761h12.859V4.534H7.073v3.09z"/><path d="m16.45 11.932-2.865 2.64-2.851 2.64v-3.24H3.742V9.71h6.992V6.65l2.851 2.642z"/></symbol><symbol id="icnSvgRunJumping" viewBox="0 0 105.74 122.88"><path d="M3.07 79.92c4.32 1.19 29.57 17.12 32.69 10.85.32-.64 2.87-6.24 2.87-6.27l13.62 3.47c.44 1.39-5.97 12.95-7.23 14.27-1.6 1.68-3.21 2.68-4.93 3.57C34.31 108.79 6.82 94.12 0 93.16zm72.78 39.9c.63.24.89 1.1.58 1.93s-1.07 1.31-1.7 1.07l-18.78-7.03c-.63-.24-.89-1.1-.58-1.93s1.07-1.31 1.7-1.07zm10.94-7.69c.63.24.89 1.1.58 1.93s-1.07 1.31-1.7 1.07l-18.78-7.03c-.63-.24-.89-1.1-.58-1.93s1.07-1.31 1.7-1.07zm.33-11.66c.63.24.89 1.1.58 1.93s-1.07 1.31-1.7 1.07l-18.78-7.03c-.63-.24-.89-1.1-.58-1.93s1.07-1.31 1.7-1.07zM22.26 22.99c-.66-.15-1.03-.97-.83-1.83.19-.86.88-1.44 1.54-1.29l19.56 4.41c.66.15 1.03.97.83 1.83-.19.86-.88 1.44-1.54 1.29zm-2.47-10.86c-.66-.15-1.03-.97-.83-1.83.19-.86.88-1.44 1.54-1.29l19.56 4.41c.66.15 1.03.97.83 1.83-.19.86-.88 1.44-1.54 1.29zm5.9-8.98c-.66-.15-1.03-.97-.84-1.83s.88-1.44 1.54-1.29l19.56 4.41c.66.15 1.03.97.83 1.83-.19.86-.88 1.44-1.54 1.29zm13.28 44.06-2.86 17.67c-.58 6.69-.63 11.89 5.95 15 3.44 1.62 4.32 1.42 8.12 2.06l19.27-.42c1.04-.02 26.34 11.02 28.43 12.43l7.83-9.36c1.1-1.31-25.7-14.04-29.63-15.46-18.65-6.72-20.64 10.5-16.9-15.51 3.75 2.9 6.93 3.62 13.62 5.39 8.01 1.1 11.41-.86 17.65-3.7l9.22-4.57-7.14-10.84-7.05 4.2c-.26.12-.92.45-2.08 1.01-2.92 1.07-5.25 1.95-7.25 1.26-6.64-2.32-12.06-12.07-29.81-11.45-24.69.86-22.32-2.09-38.63 17.42l9.79 7.55c7.7-9.21 8.39-11.43 20.79-12.61.23-.04.45-.05.68-.07M59.12 9.04c6.83-3.12 14.89-.11 18 6.72 3.12 6.83.11 14.89-6.72 18-6.83 3.12-14.89.11-18-6.72-3.12-6.83-.11-14.89 6.72-18"/></symbol><symbol id="icnSvgSleepTimer" viewBox="0 0 493 511.92"><path d="M277.16 41.75c49.87 6.77 94.55 29.89 128.47 63.79 40.67 40.67 65.83 96.87 65.83 158.93 0 62.08-25.15 118.28-65.83 158.96a227 227 0 0 1-25.34 21.83l27.24 38.33c5.68 8.18 3.65 19.42-4.54 25.11-8.19 5.68-19.44 3.65-25.12-4.54l-28.28-39.78c-30.84 15.91-65.83 24.89-102.92 24.89-37.7 0-73.23-9.28-104.43-25.69l-26.59 39.71c-5.54 8.28-16.76 10.5-25.04 4.95-8.29-5.55-10.5-16.75-4.95-25.03l26.07-38.95a226 226 0 0 1-24-20.83c-40.68-40.68-65.84-96.89-65.84-158.96 0-62.06 25.17-118.26 65.84-158.93 36.44-36.44 85.34-60.4 139.74-65.03 16.45-1.4 33.38-.97 49.69 1.24m5.6 195.95 65.46-.03v31.57H234.68V239l63.71-63.71h-62.95v-31.57h110.69v30.24zM177.59 355.19l44.18-.03v21.31h-76.64v-20.41l43.01-43h-42.49v-21.31h74.71v20.41zm304.1-210.46c17.29-41.28 15.24-84.52-9.52-113.49-29.69-34.76-83.39-38.75-133.25-14.3 53.01 36.36 101.11 78.78 142.77 127.79m-470.15 1.35C-6.1 104.02-4.01 59.97 21.21 30.45 51.47-4.97 106.18-9.03 156.99 15.88c-54 37.06-103.03 80.26-145.45 130.2m368.56-15.02c-34.14-34.15-81.31-55.27-133.42-55.27-52.1 0-99.28 21.12-133.43 55.27-34.14 34.14-55.26 81.31-55.26 133.42s21.12 99.28 55.26 133.43c34.15 34.14 81.32 55.26 133.42 55.26 52.12 0 99.29-21.12 133.43-55.26 34.14-34.15 55.27-81.32 55.27-133.44 0-52.1-21.12-99.27-55.27-133.41"/></symbol><symbol id="icnSvgHourGlass" viewBox="0 0 14 24"><path d="M13.974 19.455c0-.342-.01-.748-.077-1.169a4.11 4.11 0 00-.649-1.653c-.174-.263-1.05-1.176-3.127-3.258a69.969 69.969 0 01-.372-.374l-.156-.159a5.561 5.561 0 01-.2-.217 2.823 2.823 0 01-.056-.07 1.504 1.504 0 01-.157-.226.652.652 0 01-.078-.2 1.729 1.729 0 01-.008-.263v-.031c.002-.106.005-.2.023-.27a.592.592 0 01.098-.186 3.43 3.43 0 01.225-.288c.076-.085.158-.168.244-.256l.065-.067.37-.372c2.078-2.083 2.955-2.997 3.13-3.26a4.106 4.106 0 00.649-1.653 7.57 7.57 0 00.076-1.169V2.261A.741.741 0 0014 2.075C14 .727 10.393 0 7 0S0 .727 0 2.075c0 .062.01.122.025.182v2.057c0 .322.01.745.077 1.17A4.116 4.116 0 00.75 7.135c.174.263 1.051 1.177 3.129 3.26.187.188.32.321.37.373l.062.063a3.43 3.43 0 01.471.547.59.59 0 01.099.186c.018.07.021.16.023.27v.03c.002.096.003.188-.008.263a.647.647 0 01-.078.2 1.515 1.515 0 01-.157.228 2.849 2.849 0 01-.153.177 6.914 6.914 0 01-.103.108l-.104.104c-3.288 3.29-3.486 3.59-3.551 3.688a4.114 4.114 0 00-.649 1.653 7.692 7.692 0 00-.077 1.17v2.239C.025 23.279 3.641 24 7 24c3.36 0 6.975-.721 6.975-2.305v-.306l-.001-1.934zm-.949 2.24v.016c-.051.422-2.1 1.367-6.025 1.367-3.976 0-6.026-.97-6.026-1.384-.001-.615-.002-1.621 0-2.237 0-.307.008-.67.065-1.031a3.208 3.208 0 01.509-1.293c.055-.081.466-.576 3.434-3.545l.113-.113a6.845 6.845 0 00.24-.262 2.436 2.436 0 00.325-.46c.066-.123.145-.29.175-.494.022-.146.02-.285.018-.408v-.029a1.954 1.954 0 00-.053-.485 1.475 1.475 0 00-.239-.485 4.256 4.256 0 00-.287-.367 8.51 8.51 0 00-.276-.29l-.06-.061c-.05-.052-.187-.189-.378-.38-1.865-1.87-2.878-2.918-3.012-3.117a3.209 3.209 0 01-.509-1.294 6.732 6.732 0 01-.066-1.031V3.168c1.3.643 3.713.981 6.027.981 2.313 0 4.725-.338 6.026-.98v1.143c-.001.308-.01.671-.066 1.031a3.203 3.203 0 01-.51 1.294c-.133.199-1.146 1.247-3.011 3.117-.191.191-.328.328-.378.38l-.064.064c-.09.092-.182.186-.273.287-.109.123-.202.249-.287.367a1.474 1.474 0 00-.239.485 1.95 1.95 0 00-.052.486v.03c-.002.121-.004.26.017.406.03.203.11.37.175.494a2.464 2.464 0 00.325.46 4.399 4.399 0 00.24.261l.157.161.38.382c1.864 1.869 2.877 2.917 3.01 3.115a3.209 3.209 0 01.51 1.294c.057.36.065.723.065 1.031.002.616.001 1.622 0 2.237z"/><path d="M12.715 19.253a5.274 5.274 0 00-.133-.127 5.793 5.793 0 00-.656-.542 5.292 5.292 0 00-.75-.425 11.85 11.85 0 00-1.715-.636c-.145-.042-.29-.084-.435-.128-.154-.048-.31-.09-.457-.155a1.752 1.752 0 01-.325-.185 1.982 1.982 0 01-.447-.45c-.131-.182-.256-.391-.297-.605-.04.214-.166.423-.297.605-.122.17-.27.323-.447.45-.1.073-.21.135-.326.185-.146.064-.303.107-.456.155-.145.044-.29.086-.436.128a11.875 11.875 0 00-1.715.636 5.294 5.294 0 00-.75.425 5.79 5.79 0 00-.655.542 5.297 5.297 0 00-.278.28.858.858 0 00-.14.193C2 20.373 4.461 21 7.497 21c3.035 0 5.496-.627 5.496-1.401H13a.852.852 0 00-.14-.194 5.181 5.181 0 00-.145-.152zM6.417 10.512c.063.06.123.135.177.221.096.153.178.337.244.54.072.219.14.47.162.727.022-.257.09-.508.162-.727.066-.203.148-.387.244-.54.054-.086.114-.16.177-.221.08-.077.166-.129.25-.186.078-.053.158-.103.237-.154.162-.103.321-.214.478-.343.155-.129.309-.266.458-.42.143-.149.28-.316.408-.51.13-.196.245-.42.358-.65a6.916 6.916 0 00.152-.336A1.39 1.39 0 0010 7.681C10 6.753 8.658 6 7.002 6c-1.656 0-2.998.753-2.998 1.681H4c.019.085.046.16.076.232a5.72 5.72 0 00.152.335c.112.231.228.455.357.651.128.194.266.361.41.51a5.4 5.4 0 00.457.42c.156.129.316.24.478.343.08.05.158.1.237.154.084.057.17.109.25.186z"/></symbol><symbol id="icnSvgSpinWaiting" viewBox="22 22 56 56"><g transform="rotate(0 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(30 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(60 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.75s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(90 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(120 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(150 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(180 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(210 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(240 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.25s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(270 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(300 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(330 50 50)"><rect x="47" y="24" rx="3" ry="6" width="6" height="12"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animate></rect></g></symbol><symbol id="icnSvgSetting" viewBox="0 0 122.88 122.878"><path fill-rule="evenodd" clip-rule="evenodd" d="M101.589,14.7l8.818,8.819c2.321,2.321,2.321,6.118,0,8.439l-7.101,7.101 c1.959,3.658,3.454,7.601,4.405,11.752h9.199c3.283,0,5.969,2.686,5.969,5.968V69.25c0,3.283-2.686,5.969-5.969,5.969h-10.039 c-1.231,4.063-2.992,7.896-5.204,11.418l6.512,6.51c2.321,2.323,2.321,6.12,0,8.44l-8.818,8.819c-2.321,2.32-6.119,2.32-8.439,0 l-7.102-7.102c-3.657,1.96-7.601,3.456-11.753,4.406v9.199c0,3.282-2.685,5.968-5.968,5.968H53.629 c-3.283,0-5.969-2.686-5.969-5.968v-10.039c-4.063-1.232-7.896-2.993-11.417-5.205l-6.511,6.512c-2.323,2.321-6.12,2.321-8.441,0 l-8.818-8.818c-2.321-2.321-2.321-6.118,0-8.439l7.102-7.102c-1.96-3.657-3.456-7.6-4.405-11.751H5.968 C2.686,72.067,0,69.382,0,66.099V53.628c0-3.283,2.686-5.968,5.968-5.968h10.039c1.232-4.063,2.993-7.896,5.204-11.418l-6.511-6.51 c-2.321-2.322-2.321-6.12,0-8.44l8.819-8.819c2.321-2.321,6.118-2.321,8.439,0l7.101,7.101c3.658-1.96,7.601-3.456,11.753-4.406 V5.969C50.812,2.686,53.498,0,56.78,0h12.471c3.282,0,5.968,2.686,5.968,5.969v10.036c4.064,1.231,7.898,2.992,11.422,5.204 l6.507-6.509C95.471,12.379,99.268,12.379,101.589,14.7L101.589,14.7z M61.44,36.92c13.54,0,24.519,10.98,24.519,24.519 c0,13.538-10.979,24.519-24.519,24.519c-13.539,0-24.519-10.98-24.519-24.519C36.921,47.9,47.901,36.92,61.44,36.92L61.44,36.92z"/></symbol><symbol id="icnSvgFullTrashBin" viewBox="0 0 512 512"><path d="M322.62 254.95h-20.71v195.41h20.71V254.95zM111.53 2.02l105.89 36.64 3.26-9.41c.11-.32.23-.64.38-.94 3.69-9.25 13.28-14.76 23.08-13.35 2.56.37 4.75 1.19 7.16 2.03l60.97 21.1c.82.28 1.62.53 2.4.91 5.11 2.08 9.07 5.94 11.32 10.59 2.21 4.56 2.8 9.93 1.36 15.13-.17.61-.35 1.25-.55 1.83l-3.07 8.89 106.95 37.01c1.43.49 2.47.88 3.84 1.61 6.86 3.69 10.35 11.45 8.43 19.03-.21.82-.44 1.59-.72 2.38l-12.01 34.71c-1.67 4.85-6.97 7.41-11.81 5.74l-19.61-6.79a81.15 81.15 0 0 1 6.56 28.24c1.22.78 2.35 1.68 3.36 2.68 3.52 3.47 5.81 8.14 5.93 13.34.02 1.1-.11 2.21-.21 3.3L388.9 490.72c-.33 3.6-.93 6.8-2.75 10.18-3.52 6.55-10.03 11.1-18.14 11.1H117.06c-5.32 0-9.19-.47-13.67-3.53-5.28-3.61-8.74-9.7-9.35-16.46L68.66 215.9c-.08-.87-.16-1.82-.13-2.68.18-5.15 2.44-9.76 5.94-13.19 2.78-2.73 6.45-4.74 10.43-5.61-.19-.97-.3-1.96-.3-2.99v-66.36c0-8.26 6.76-15.02 15.02-15.02h78.92c8.25 0 15.01 6.76 15.01 15.02v22.45c12.39-10.17 28.24-16.28 45.52-16.28a71.52 71.52 0 0 1 32.54 7.79c4.18-3.5 8.71-6.6 13.54-9.22L79.45 58.63c-4.85-1.68-7.42-6.97-5.75-11.82l.07-.2 11.29-32.63C89.79.32 98.32-2.56 111.53 2.02zm143.75 252.93h-20.72v195.41h20.72V254.95zm-67.34 0h-20.71v195.41h20.71V254.95zm205.55-42.48H89.89c-1.99 0-2.94.34-2.75 2.45l25.11 273.2c.16 1.69.13 5.33 2.53 5.29h253.25c2.08 0 2.32-2.93 2.46-4.44l25.57-274.23c.16-1.77-.89-2.27-2.57-2.27zm-224.75-23.88h9.8v-52.32c0-5.98-4.9-10.87-10.88-10.87h-57.17c-5.98 0-10.87 4.89-10.87 10.87v52.32h69.12zm100.12 2.44H379.1c-2.52-15.25-11.22-28.4-23.44-36.82l-.15-.11-.23-.15-.38-.26-.38-.25-.02-.01-.37-.25-.39-.24-.26-.17-.13-.08-.4-.24-.39-.24-.11-.06-.29-.17-.4-.23-.36-.21-.04-.02-.4-.23-.41-.22-.41-.22-.41-.21-.41-.22-.06-.03-.35-.17-.42-.21-.32-.16-.09-.04-.42-.2-.43-.2-.16-.07-.26-.12-.43-.19-.42-.18-.01-.01-.42-.17-.71-.29-.16-.06-.84-.33-.02-.01-.12-.05-.32-.12-.44-.16-.4-.14-.04-.01-.45-.16-.44-.15-.24-.07-.21-.07-.45-.15-.45-.13-.06-.02-.39-.12-.45-.13-.35-.1-.11-.03-.45-.12-.46-.12-.18-.05-.28-.07-.46-.11-.46-.11h-.01l-.46-.1-.76-.17-.17-.03-.46-.09-.48-.09-.12-.03-.34-.06-.48-.08-.42-.07-.05-.01-.48-.07-.47-.07-.24-.04-.24-.03-.48-.06-.48-.05-.06-.01-.42-.05-.48-.05-.37-.03-.11-.01-.49-.04-.48-.04-.19-.01-.3-.02c-1.18-.08-2.37-.12-3.57-.12-27.51 0-50.44 19.73-55.12 46.67z"/></symbol><symbol id="icnSvgTrashBin" viewBox="128 64 768 896"><path d="M384 384h64v384h-64zm192 0h64v384h-64z"/><path d="M128 192v64h64v640a64 64 0 0 0 64 64h512a64 64 0 0 0 64-64V256h64v-64zm128 704V256h512v640zM384 64h256v64H384z"/></symbol><symbol id="icnSvgCheckDBsUpdate" viewBox="1.1 0 56 58.2"><path d="M44.1 32.201c-3.764 0-7.317 1.581-9.75 4.338a1.001 1.001 0 0 0 1.5 1.324c2.053-2.327 5.061-3.662 8.25-3.662 6.065 0 11 4.935 11 11s-4.935 11-11 11c-4.992 0-9.407-3.367-10.741-8H38.1v-2h-8v8h2v-3.664c2.093 4.531 6.781 7.664 12 7.664 7.168 0 13-5.832 13-13s-5.832-13-13-13M26.243 43.109a16.95 16.95 0 0 1 5.092-10.15q-1.28.073-2.628.111a84 84 0 0 1-5.22-.001c-7.341-.201-13.191-1.238-17.403-2.717C4.104 29.685 2.409 28.899 1.1 28v9.4c2.846 2.971 12.394 5.711 25 5.711zm-2.507-13.144q.487.014.982.023a79 79 0 0 0 2.765.001q.494-.01.982-.023l.349-.008c11.253-.359 19.648-2.915 22.286-5.668v-9.401C46.233 18.232 35.944 20 26.1 20s-20.133-1.768-25-5.111v9.4c2.638 2.754 11.033 5.31 22.286 5.668z"/><path d="M51.1 11.306V9a.9.9 0 0 0-.135-.458C49.843 4.241 41.215 0 26.1 0 11.023 0 2.404 4.22 1.247 8.51A.97.97 0 0 0 1.1 9v2.306C3.937 14.267 13.417 17 26.1 17s22.164-2.733 25-5.694M26.151 46.2H26.1c-12.346 0-20.866-2.29-25-5.201V49.2a.94.94 0 0 0 .117.451C2.398 54.546 12.964 58.2 26.1 58.2c2 0 3.93-.094 5.787-.255A16.95 16.95 0 0 1 26.151 46.2"/></symbol><symbol id="icnSvgHistory" viewBox="3 2 18 20"><path d="M19 10H5c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-8c0-1.103-.897-2-2-2M5 6h14v2H5zm2-4h10v2H7z"/></symbol><symbol id="icnSvgGUI" viewBox="2 4 28 24"><circle cx="20" cy="8" r="1"/><circle cx="23" cy="8" r="1"/><circle cx="26" cy="8" r="1"/><path d="M28 4H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m0 2v4H4V6ZM4 12h6v14H4Zm8 14V12h16v14Z"/><path style="fill:none" d="M0 0h32v32H0z"/></symbol><symbol id="icnSvgDatabaseConfig" viewBox="3 2 29.1 28.82"><ellipse cx="14" cy="8" rx="10" ry="5"/><ellipse cx="14" cy="8" rx="11" ry="6"/><path d="M14 24c-4.8 0-8.8-1.4-11-3.6V24c0 3.4 4.8 6 11 6 .9 0 1.8-.1 2.7-.2-1.5-1.5-2.4-3.6-2.7-5.8M3 12.4V16c0 3.4 4.8 6 11 6h.1c.2-2.4 1.4-4.6 3-6.2-1 .1-2 .2-3.1.2-4.8 0-8.8-1.4-11-3.6m28.7 8.5c-.1-.5-.7-.8-1.2-.7-.7.2-1.2 0-1.3-.2s0-.7.5-1.3c.4-.4.4-1 0-1.4q-1.5-1.5-3.6-2.1c-.5-.1-1.1.2-1.2.7-.2.7-.6 1-.9 1s-.6-.4-.9-1c-.2-.5-.7-.8-1.2-.7q-2.1.6-3.6 2.1c-.4.4-.4 1 0 1.4.5.5.6 1 .5 1.3-.1.2-.6.4-1.3.2-.5-.1-1.1.2-1.2.7Q16 21.95 16 23c0 1.05.1 1.4.3 2.1.1.5.7.8 1.2.7.7-.2 1.2 0 1.3.2s0 .7-.5 1.3c-.4.4-.4 1 0 1.4q1.5 1.5 3.6 2.1c.5.1 1.1-.2 1.2-.7.2-.7.6-1 .9-1s.6.4.9 1c.1.4.5.7 1 .7h.3q2.1-.6 3.6-2.1c.4-.4.4-1 0-1.4-.5-.5-.6-1-.5-1.3.1-.2.6-.4 1.3-.2.5.1 1.1-.2 1.2-.7q.3-1.05.3-2.1c0-1.05-.2-1.4-.4-2.1M24 26c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3"/></symbol><symbol id="icnSvgKeyboard" viewBox="3 3.7 26 25.31"><path d="M27 29.016H5a2 2 0 0 1-2-2v-13a2 2 0 0 1 2-2l1.058.006c0-1.634.497-2.694 1.492-3.807q1.492-1.668 3.702-1.668 1.049 0 2.323.354s1.847.614 3.129.614q2.936 0 4.001-2.574.5-1.238 1.017-1.238.742 0 .742.691 0 1.223-1.322 2.703-1.773 2.012-4.367 2.012c-1.343 0-3.644-.63-3.644-.63q-1.402-.339-1.998-.339-1.435 0-2.458 1.226c-1.023 1.226-1.023 1.54-1.023 2.669L27 12.016a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2m1-15a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h22a1 1 0 0 0 1-1zm-7.997 7.011h6.018v1.981h-6.018zm1.985-3h4.021v1.981h-4.021zm2.019-3.011h2.003v2.044h-2.003zm-2.97 0h1.961v2.044h-1.961zm-2.029 3.011h1.981v1.981h-1.981zm-.983-3.011h2.002v2.044h-2.002zm-2.071 3.011h2.044v1.981h-2.044zm-.982-3.011h2.044v2.044h-2.044zm-2.97 0h2.023v2.044h-2.023zm-3.074 0h2.065v2.044H8.928zm-2.928 0h2.044v2.044H6zm6.018 4.993H6v-1.981h6.018zm-3.974 6.044H6v-2.044h2.044zm-2.033-5.026h4.021v1.981H6.011zm5.024 5.026H8.99v-2.044h2.045zm4.969-3.044h-2.045v-1.981h2.045zm-2.991 0h-2.044v-1.981h2.044zm1.995-3h-2.045v-1.981h2.045zm3.986 1.018v1.981h-1.981v-1.981zm1.013 5.026h-7.963v-2.044h7.963zm2.991 0h-2.045v-2.044h2.045zm2.99 0h-1.981v-2.044h1.981z"/></symbol><symbol id="icnSvgBookSets" viewBox="0 0 122.88 99.45"><path d="M64.48.38H82.9c1.85 0 3.36 1.51 3.36 3.36v14.84H61.12V3.74c0-1.85 1.51-3.36 3.36-3.36m21.79 27.27v45.19H61.12V27.65zm0 54.27v13.8c0 1.85-1.51 3.36-3.36 3.36H64.48c-1.85 0-3.36-1.51-3.36-3.36v-13.8zM101.09.38h18.42c1.85 0 3.36 1.51 3.36 3.36v14.84H97.73V3.74c0-1.85 1.52-3.36 3.36-3.36m21.79 27.27v45.19H97.73V27.65zm0 54.27v13.8c0 1.85-1.51 3.36-3.36 3.36H101.1c-1.85 0-3.36-1.51-3.36-3.36v-13.8zM35.95.2l17.31 6.3c1.74.63 2.64 2.57 2.01 4.31L50.2 24.75l-23.63-8.6 5.07-13.94C32.28.47 34.22-.43 35.95.2M47.1 33.28 31.65 75.75l-23.63-8.6 15.45-42.46zm-18.55 51-4.72 12.96c-.63 1.74-2.57 2.64-4.31 2.01l-17.31-6.3C.47 92.32-.43 90.38.2 88.64l4.72-12.96z"/></symbol><symbol id="icnSvgBooks" viewBox="102.4 153.6 870.4 819.2"><path d="M512 819.2c-23.3 31.1-60.5 51.2-102.4 51.2H179.2a76.8 76.8 0 0 1-76.8-76.8V230.4a76.8 76.8 0 0 1 76.8-76.8h230.4c41.9 0 79.1 20.1 102.4 51.2 23.3-31.1 60.5-51.2 102.4-51.2h230.4a76.8 76.8 0 0 1 76.8 76.8v358.4c0-41.9-20.1-79.1-51.2-102.4v-256a25.6 25.6 0 0 0-25.6-25.6H614.4a76.8 76.8 0 0 0-76.8 76.8v460.8c0 26.8 13.8 50.5 34.7 64.2 6.6 22.7 16.5 43.9 29.2 63.2a127.8 127.8 0 0 1-89.5-50.6M153.6 230.4v563.2a25.6 25.6 0 0 0 25.6 25.6h230.4a76.8 76.8 0 0 0 76.8-76.8V281.6a76.8 76.8 0 0 0-76.8-76.8H179.2a25.6 25.6 0 0 0-25.6 25.6M892.2 824a127.5 127.5 0 0 0 29.4-81.6 25.6 25.6 0 0 1 51.2 0 179.3 179.3 0 0 1-153.6 177.4v27.4a25.6 25.6 0 0 1-51.2 0v-27.4a179.8 179.8 0 0 1-136.3-100.6 178.5 178.5 0 0 1-17.3-76.8 25.6 25.6 0 0 1 51.2 0A127.5 127.5 0 0 0 695 824c23.4 28.3 58.9 46.4 98.5 46.4h.2c39.7 0 75.1-18.1 98.5-46.4M716.8 588.8a76.8 76.8 0 0 1 153.6 0v153.6a76.8 76.8 0 0 1-153.6 0z"/></symbol><symbol id="icnSvgClearHistory" viewBox="0 0 469 503.83"><path d="m 381.11617,403.59756 c 0.62578,-0.65795 1.2824,-1.26347 1.98274,-1.81082 0.5261,-0.83393 1.12396,-1.62039 1.78642,-2.37814 7.21069,-8.05937 13.76554,-16.6275 19.58337,-25.74825 3.18815,-5.00492 8.68614,-8.12229 14.63376,-8.19884 13.99176,-0.27228 22.67458,15.34326 15.18358,27.10929 -6.86879,10.7419 -14.5975,20.90895 -23.11016,30.40119 -0.80181,0.89691 -1.67825,1.6832 -2.59409,2.36683 -0.49157,0.7564 -1.06068,1.4783 -1.67927,2.15493 l -0.17532,0.18512 0.0295,0.0208 C 362.43204,474.85634 303.18715,499.57992 243.22206,501.44327 183.25338,503.29726 122.58315,482.28383 75.430095,437.96857 28.273455,393.64397 3.5498604,334.3991 1.6865324,274.43401 -0.1767985,214.46891 20.845975,153.7951 65.157653,106.6327 80.651923,90.15565 97.97448,76.404451 116.52512,65.405988 132.16185,56.136617 148.6682,48.825679 165.66865,43.499506 L 152.97927,38.29103 C 142.92837,34.179883 138.11551,22.702323 142.23024,12.660779 146.34138,2.609903 157.81896,-2.2029589 167.8605,1.911773 l 50.72806,20.813083 c 1.97027,0.807554 3.72498,1.890665 5.26129,3.186151 8.0534,5.381343 11.07261,16.037105 6.67646,24.954859 l -24.21807,49.196584 c -4.78796,9.71086 -16.53638,13.70649 -26.25656,8.9221 -9.71084,-4.78797 -13.7065,-16.53638 -8.91857,-26.247207 l 2.31493,-4.712601 c -13.5005,4.454005 -26.60925,10.375036 -39.06061,17.757548 -15.71719,9.31097 -30.41067,20.98181 -43.56923,34.97697 -37.66808,40.08123 -55.528739,91.63616 -53.949554,142.57345 1.573429,50.95023 22.603219,101.2979 62.688004,138.97532 40.08122,37.66808 91.63616,55.52873 142.57347,53.94953 28.18114,-0.86679 56.18383,-7.69562 81.96039,-20.40742 0.56283,-0.37666 1.14411,-0.72492 1.74174,-1.04349 2.94605,-1.50578 5.83758,-3.09776 8.71122,-4.73641 0.73187,-0.40947 1.49098,-0.77586 2.25293,-1.07905 16.00441,-9.39981 30.94497,-21.20832 44.29969,-35.41804 z"/><path d="m 201.26897,182.98215 c 0,-10.03 8.13,-18.16 18.16,-18.16 10.03,0 18.16,8.13 18.16,18.16 v 110.52001 l 75.64,33.25 c 9.17,4.04 13.33,14.74 9.3,23.9 -4.04,9.17 -14.74,13.33 -23.91,9.29 l -85.58,-37.61 c -6.87,-2.59 -11.77,-9.22 -11.77,-17.01 z"/><g transform="matrix(1.8093715,0,0,1.9111334,269.98843,23.875916)"><path d="m 4.873,9.058 h 33.35 V 6.2 6.187 c 0,-0.095 0.002,-0.186 0.014,-0.279 0.075,-1.592 0.762,-3.037 1.816,-4.086 L 40.046,1.815 c 1.104,-1.104 2.637,-1.79 4.325,-1.806 l 0.023,0.002 V 0 h 0.031 19.884 0.016 c 0.106,0 0.207,0.009 0.309,0.022 1.583,0.084 3.019,0.76 4.064,1.81 1.102,1.104 1.786,2.635 1.803,4.315 l -0.003,0.021 h 0.014 V 6.2 9.057 h 32.909 0.017 c 0.138,0 0.268,0.014 0.401,0.034 1.182,0.106 2.254,0.625 3.034,1.41 l 0.004,0.007 0.005,-0.007 c 0.851,0.857 1.386,2.048 1.401,3.368 l -0.002,0.032 h 0.014 v 0.032 10.829 c 0,1.472 -1.195,2.665 -2.667,2.665 H 105.558 2.667 C 1.195,27.426 0,26.233 0,24.762 V 24.699 13.933 13.919 C 0,13.813 0.004,13.708 0.018,13.604 V 13.583 C 0.107,12.376 0.642,11.279 1.44,10.485 L 1.433,10.483 C 2.295,9.622 3.49,9.087 4.81,9.069 L 4.842,9.071 V 9.058 Z M 77.79,49.097 h -5.945 v 56.093 h 5.945 z m -19.33,0 h -5.948 v 56.093 h 5.948 z m -19.33,0 H 33.184 V 105.19 H 39.13 Z M 10.837,31.569 h 87.385 l 0.279,0.018 0.127,0.007 0.134,0.011 h 0.009 l 0.163,0.023 c 1.363,0.163 2.638,0.789 3.572,1.708 1.04,1.025 1.705,2.415 1.705,3.964 0,0.098 -0.009,0.193 -0.019,0.286 l -0.002,0.068 -0.014,0.154 -7.393,79.335 -0.007,0.043 h 0.007 l -0.016,0.139 -0.051,0.283 -0.002,0.005 -0.002,0.018 c -0.055,0.331 -0.12,0.646 -0.209,0.928 l -0.007,0.022 -0.002,0.005 -0.009,0.018 -0.023,0.062 -0.004,0.021 c -0.118,0.354 -0.264,0.698 -0.432,1.009 -1.009,1.88 -2.879,3.187 -5.204,3.187 H 18.13 l -0.247,-0.014 v 0.003 l -0.011,-0.003 -0.032,-0.004 c -0.46,-0.023 -0.889,-0.091 -1.288,-0.202 -0.415,-0.116 -0.818,-0.286 -1.197,-0.495 l -0.009,-0.002 -0.002,0.002 c -1.785,-0.977 -2.975,-2.882 -3.17,-5.022 L 4.88,37.79 4.869,37.665 4.858,37.418 4.854,37.302 H 4.849 c 0,-1.553 0.664,-2.946 1.707,-3.971 0.976,-0.955 2.32,-1.599 3.756,-1.726 l 0.122,-0.004 v -0.007 l 0.3,-0.013 0.104,0.002 v -0.014 z m 87.386,5.334 H 10.837 V 36.896 L 10.721,36.9 c -0.163,0.022 -0.322,0.106 -0.438,0.222 -0.063,0.063 -0.104,0.132 -0.104,0.179 h -0.007 l 0.007,0.118 7.282,79.244 h -0.002 l 0.002,0.012 c 0.032,0.376 0.202,0.691 0.447,0.825 l -0.002,0.004 0.084,0.032 0.063,0.012 h 0.077 72.695 c 0.207,0 0.399,-0.157 0.518,-0.377 l 0.084,-0.197 0.054,-0.216 0.014,-0.138 H 91.5 L 98.884,37.41 98.881,37.3 c 0,-0.045 -0.041,-0.111 -0.103,-0.172 -0.12,-0.118 -0.286,-0.202 -0.451,-0.227 z m 0.111,-0.002 h -0.016 z m 0.549,0.512 v -0.004 z m 5.297,0.377 -0.002,0.018 z M 40.887,14.389 H 5.332 v 7.706 h 97.63 V 14.389 H 67.907 67.844 c -1.472,0 -2.664,-1.192 -2.664,-2.664 V 6.2 6.168 h 0.007 C 65.18,5.948 65.081,5.735 64.928,5.583 64.791,5.442 64.604,5.354 64.407,5.331 H 64.325 64.309 44.425 44.394 V 5.325 C 44.181,5.332 43.972,5.429 43.818,5.584 L 43.814,5.58 43.807,5.584 c -0.131,0.134 -0.231,0.313 -0.259,0.501 l 0.007,0.102 V 6.2 11.724 c -10e-4,1.472 -1.196,2.665 -2.668,2.665 z"/></g></symbol><symbol id="icnSvgHistoryForward" viewBox="0 0 122.883 122.882"><path d="M61.441,0C44.475,0,29.115,6.877,17.996,17.996C6.877,29.115,0,44.475,0,61.441c0,16.966,6.877,32.326,17.996,43.445 c11.119,11.118,26.479,17.995,43.445,17.995c16.967,0,32.327-6.877,43.446-17.995c11.119-11.119,17.996-26.479,17.996-43.445 c0-16.967-6.877-32.327-17.996-43.445C93.768,6.877,78.408,0,61.441,0L61.441,0z M51.505,42.166 c-1.735-1.784-1.696-4.637,0.088-6.372c1.784-1.735,4.637-1.696,6.373,0.088l21.839,22.521l-3.23,3.142l3.244-3.146 c1.738,1.792,1.693,4.652-0.098,6.39c-0.053,0.05-0.105,0.099-0.158,0.146L57.966,87.017c-1.735,1.784-4.588,1.823-6.373,0.088 c-1.784-1.734-1.823-4.588-0.088-6.372l18.78-19.201L51.505,42.166L51.505,42.166z M24.386,24.386 C33.869,14.903,46.97,9.038,61.441,9.038c14.471,0,27.573,5.865,37.055,15.348c9.484,9.483,15.35,22.584,15.35,37.056 c0,14.471-5.865,27.572-15.35,37.055c-9.482,9.483-22.584,15.349-37.055,15.349c-14.471,0-27.572-5.865-37.055-15.349 C14.903,89.014,9.038,75.912,9.038,61.441C9.038,46.97,14.903,33.869,24.386,24.386L24.386,24.386z"/></symbol><symbol id="icnSvgSquareLinkArrow" viewBox="300 150 424 724"><path d="M725.4 853.3H256C208.9 853.3 170.7 815.1 170.7 768V298.7C170.7 251.5 208.9 213.3 256 213.3H426.7V298.7H256V768H725.4V597.3H810.7V768C810.7 815.1 772.5 853.3 725.4 853.3ZM499.2 584.8L439.1 524.5 707.6 256H554.7V170.7H853.4V469.3H768V316.4L499.2 584.8Z"></path></symbol><symbol id="icnSvgMicrophone" viewBox="192 0 640 1024"><path d="M224 416a32 32 0 0 1 32 32v64a256 256 0 0 0 512 0v-64a32 32 0 0 1 64 0v64a320 320 0 0 1-288 318.4V960h192a32 32 0 0 1 0 64H288a32 32 0 0 1 0-64h192V830.4A320 320 0 0 1 192 512v-64a32 32 0 0 1 32-32"/><path d="M640 512a128 128 0 1 1-256 0V192a128 128 0 1 1 256 0zM512 0a192 192 0 0 0-192 192v320a192 192 0 0 0 384 0V192A192 192 0 0 0 512 0"/></symbol><symbol id="icnSvgDuration" viewBox="0 0 640 512"><path d="M320 0c8 0 14.8 5.9 15.9 13.9l49.3 369.5 47-305.8c1.2-7.9 8-13.6 16-13.6s14.6 6 15.7 13.8l34.6 254L528.3 173c1.4-7.3 7.6-12.7 15-13s14.1 4.5 16.1 11.6L588.1 272H624c8.8 0 16 7.2 16 16s-7.2 16-16 16h-48c-7.1 0-13.4-4.7-15.4-11.6l-13.4-46.8-35.5 189.3c-1.4 7.7-8.3 13.2-16.1 13s-14.4-6.1-15.5-13.8L447 191.4l-47.2 307c-1.2 7.9-8 13.6-16 13.6s-14.6-6-15.7-13.9l-48.1-361-48.1 361c-1.1 7.9-7.7 13.8-15.7 13.9s-14.8-5.7-16-13.6l-47.2-307-33.1 242.8c-1.1 7.8-7.6 13.6-15.5 13.8s-14.7-5.3-16.1-13L92.8 245.6l-13.4 46.8c-2 6.9-8.2 11.6-15.4 11.6H16c-8.8 0-16-7.2-16-16s7.2-16 16-16h35.9l28.7-100.4c2-7.1 8.7-11.9 16.1-11.6s13.6 5.7 15 13l29.8 158.8 34.6-254c1.1-7.9 7.8-13.8 15.7-13.8s14.7 5.7 16 13.6l47.1 305.9 49.2-369.6C305.2 5.9 312 0 320 0"/></symbol><symbol id="icnSvgListenTime" viewBox="0 0 115.34 122.88"><path d="M97.74 119.52a2 2 0 0 1-.68-.12V65.93a2 2 0 0 1 .68-.12c3.34 0 6.43 5 8.48 7l-.46-12.12c0-12.8-3.72-23.11-9.68-30.93a7.37 7.37 0 0 1-5.86-2.23l-.68-.7C80.91 18.29 69 14.44 57.24 14.66s-23.48 4.53-31.55 12.25l-.66.64a7.3 7.3 0 0 1-6.49 2.05c-6 7.84-9.75 18.21-9.75 31.14l-.46 13.89c2.25-2.71 6.34-8.66 10-8.82v53.71C10.52 119.36 4.91 107.05 3 101H0V60.74a57.33 57.33 0 0 1 12.83-36.17 7.35 7.35 0 0 1 1.8-7.36l1-.95C26.36 6 41.62.3 57 0s31.25 4.9 42.87 16.46l.91.93a7.33 7.33 0 0 1 1.74 7.2 57.34 57.34 0 0 1 12.81 36.13V101h-2.21c-1.89 6.14-7.54 18.57-15.39 18.57Zm-5.55 3.36h-9a3.48 3.48 0 0 1-3.48-3.47V65.65a3.49 3.49 0 0 1 3.48-3.48h9zm-69-60.71H33a3.5 3.5 0 0 1 3.48 3.48v53.76a3.49 3.49 0 0 1-3.48 3.47h-9.86V62.17Z"/></symbol><symbol id="icnSvgCalendar" viewBox="0 0 119.92 122.88"><path d="M108.68,122.88H11.24A11.28,11.28,0,0,1,0,111.64V22.55A11.28,11.28,0,0,1,11.24,11.31H21.61V25.14a12.35,12.35,0,0,0,4.67,9.61,14.55,14.55,0,0,0,18.31,0,12.35,12.35,0,0,0,4.67-9.61V11.31H70.2V25.14a12.35,12.35,0,0,0,4.67,9.61,14.55,14.55,0,0,0,18.31,0,12.35,12.35,0,0,0,4.67-9.61V11.31h10.83a11.3,11.3,0,0,1,11.24,11.24v89.09a11.27,11.27,0,0,1-11.24,11.24ZM83.58,56.77h16.1a2.07,2.07,0,0,1,2.06,2v13.4a2.07,2.07,0,0,1-2.06,2H83.58a2.06,2.06,0,0,1-2-2V58.82a2.05,2.05,0,0,1,2-2Zm-31.51,0H68.18a2.06,2.06,0,0,1,2,2v13.4a2.07,2.07,0,0,1-2,2H52.07a2.06,2.06,0,0,1-2-2V58.82a2.06,2.06,0,0,1,2-2Zm-31.84,0H36.34a2.06,2.06,0,0,1,2,2v13.4a2.07,2.07,0,0,1-2,2H20.23a2.06,2.06,0,0,1-2.05-2V58.82a2.05,2.05,0,0,1,2.05-2ZM83.58,85.26h16.1a2.07,2.07,0,0,1,2.06,2v13.4a2.06,2.06,0,0,1-2.06,2.05H83.58a2.06,2.06,0,0,1-2-2.05V87.31a2.06,2.06,0,0,1,2-2Zm-31.51,0H68.18a2.06,2.06,0,0,1,2,2v13.4a2.06,2.06,0,0,1-2,2.05H52.07a2.06,2.06,0,0,1-2-2.05V87.31a2.07,2.07,0,0,1,2-2Zm-31.84,0H36.34a2.06,2.06,0,0,1,2,2v13.4a2.06,2.06,0,0,1-2,2.05H20.23a2.06,2.06,0,0,1-2.05-2.05V87.31a2.06,2.06,0,0,1,2.05-2ZM78.6,4.45C78.6,2,81,0,84,0s5.43,2,5.43,4.45V25.14c0,2.46-2.42,4.45-5.43,4.45s-5.42-2-5.42-4.45V4.45ZM30,4.45C30,2,32.44,0,35.44,0s5.42,2,5.42,4.45V25.14c0,2.46-2.42,4.45-5.42,4.45S30,27.6,30,25.14V4.45ZM3.6,43.86v66.58a8.87,8.87,0,0,0,8.84,8.84h95a8.87,8.87,0,0,0,8.85-8.84V43.86Z"/></symbol><symbol id="icnSvgChapterInfor" viewBox="204.8 102.4 614.4 819.2"><path d="M204.8 204.8v614.4a102.4 102.4 0 0 0 102.4 102.4h486.4a25.6 25.6 0 0 0 0-51.2H307.2a51.2 51.2 0 0 1-51.2-51.2h512a51.2 51.2 0 0 0 51.2-51.2V204.8a102.4 102.4 0 0 0-102.4-102.4H307.2a102.4 102.4 0 0 0-102.4 102.4m512-51.2a51.2 51.2 0 0 1 51.2 51.2V768H256V204.8a51.2 51.2 0 0 1 51.2-51.2zM550.4 294.4a38.4 38.4 0 1 0-76.8 0 38.4 38.4 0 0 0 76.8 0M537.6 640a25.6 25.6 0 0 1-51.2 0V435.2a25.6 25.6 0 0 1 51.2 0z"/></symbol><symbol id="icnSvgChapGroupIcon" viewBox="1 1 13 14"><path d="M1.5 1h2v1H2v12h1.5v1h-2l-.5-.5v-13zm6 6h-2L5 6.5v-2l.5-.5h2l.5.5v2zM6 6h1V5H6zm7.5 1h-3l-.5-.5v-3l.5-.5h3l.5.5v3zM11 6h2V4h-2zm-3.5 6h-2l-.5-.5v-2l.5-.5h2l.5.5v2zM6 11h1v-1H6zm7.5 2h-3l-.5-.5v-3l.5-.5h3l.5.5v3zM11 12h2v-2h-2zm-1-2H8v1h2zm0-5H8v1h2z"/></symbol><symbol id="icnSvgMediaLinks" viewBox="0 0 122.88 95.19"><path d="M11.7 0h6.19v2.07c15.49 3.54 17.26 11 8.28 22.7.95-11.63-.22-14.12-8.28-14.66v29.4a4 4 0 0 1 0 .47c0 3.82-4 7.61-8.95 8.47S0 46.9 0 43.07c0-5.21 7.16-9.74 11.7-8.14zM103 0h6.19v2.07c15.48 3.54 17.25 11 8.27 22.7 1-11.63-.22-14.12-8.27-14.66v29.87c0 3.82-4 7.61-9 8.47s-9-1.55-9-5.38c0-5.21 7.16-9.74 11.7-8.14V0ZM70.51 68.64a11.3 11.3 0 0 1 4.5.08V37.13l-33.43 9.59v37.3c0 5.82-6.42 10.06-11.57 11-6.39 1.1-11.58-2-11.58-7S23.65 78.18 30 77.08a13 13 0 0 1 6.49.42V32.34l43.54-9.91v50.88c.48 5.4-5 9.49-9.56 10.28-5.34.92-9.66-1.68-9.66-5.81s4.32-8.22 9.66-9.14Z"/></symbol><symbol id="icnSvgSwitchChapterLinks" viewBox="64 64 896 896"><path d="M768 768v64h78.7A190.1 190.1 0 0 1 704 896a192.2 192.2 0 0 1-192-192h-64a255.5 255.5 0 0 0 448 168.5V960h64V768zm-64-320a257.3 257.3 0 0 0-192 87.5V448h-64v192h192v-64h-78.7A190.1 190.1 0 0 1 704 512a192.2 192.2 0 0 1 192 192h64a256.3 256.3 0 0 0-256-256"/><path d="M384 896H192V768h64v-64h-64V544h64v-64h-64V320h64v-64h-64V128h576v256h64V128a64 64 0 0 0-64-64H192a64 64 0 0 0-64 64v128H64v64h64v160H64v64h64v160H64v64h64v128a64 64 0 0 0 64 64h192Z"/></symbol><symbol id="icnSvgFeather" viewBox="0 0 121.24 122.88"><path class="st0" d="M10.05,96.6C6.38,105.51,1.42,113.97,0,122.88l5.13-0.44c8.1-23.56,15.4-39.4,31.23-59.21 C48.24,48.39,61.13,36.58,77.66,27.2c8.8-5,20.07-10.47,30.21-11.85c2.77-0.38,5.58-0.49,8.46-0.24 c-31.4,7.19-56.26,23.84-76.12,48.8C32.1,74.09,25.05,85.4,18.57,97.32l11.94,2.18l-4.97-2.47l17.78-2.83 c-6.6-2.33-13.12-1.55-15.21-4.06c18.3-0.83,33.34-4.78,43.9-12.45c-3.93-0.55-8.46-1.04-10.82-2.17 c17.69-5.98,27.92-16.73,40.9-26.27c-16.87,3.54-32.48,2.96-37-0.25c29.77,2.21,49-6.02,55.59-26.77c0.57-2.24,0.73-4.5,0.37-6.78 C118.74,0.62,92.49-4.39,83.95,7.77c-1.71,2.43-4.12,4.66-6.11,7.48L85.97,0c-21.88,7.39-23.68,15.54-35,40.09 c0.9-7.47,2.97-14.24,5.66-20.63c-27.34,10.55-36.45,37.11-37.91,59.7c-0.79-7.88,0.67-17.78,3.49-28.9 c-7.98,8-13.41,17.39-11.47,30.79l-3.65-1.63l1.92,7.19l-5.46-2.59L10.05,96.6L10.05,96.6z"/></symbol><symbol id="icnSvgChapters" viewBox="0 0 122.88 111.96"><path d="M61.15 0 0 26.52l61.41 24.96 61.47-24.88zm61.73 57.12L95.46 45.31 62.73 58.56c-.88.36-1.83.33-2.65 0L27.27 45.22 0 57.05 61.41 82zM96.14 75.56 62.73 89.08c-.88.36-1.83.33-2.65 0L26.59 75.47 0 87.01l61.41 24.96 61.47-24.88z"/></symbol><symbol id="icnSvgRemainTime" viewBox="-0.42 0 1024.32 1024.2"><path d="M545 65.2a448 448 0 0 0-33-1.2V0a512 512 0 0 1 37.7 1.4zM673.2 94a448 448 0 0 0-63-19.1l14-62.5c24.5 5.5 48.6 12.8 72.1 21.9zm87.7 45.5a449 449 0 0 0-28.1-17.3l31.6-55.7a513.6 513.6 0 0 1 62.6 41.9l-39.4 50.4a448 448 0 0 0-26.7-19.3M878.3 254a447.4 447.4 0 0 0-41.8-50.9l46.3-44.2c17.3 18.2 33.3 37.8 47.8 58.3zm47.6 86.5a453 453 0 0 0-13.7-29.9l57.1-28.8a510.5 510.5 0 0 1 28.8 69.6l-60.8 20.1a450 450 0 0 0-11.4-31M959.8 501a447.4 447.4 0 0 0-6.4-65.6l63-10.9c4.3 24.7 6.8 49.8 7.5 74.9l-64 1.6zm-8.4 98.4c2.1-10.9 3.8-21.7 5.2-32.6l63.6 7.9a509 509 0 0 1-14.8 73.9l-61.7-17.1c2.9-10.6 5.5-21.2 7.7-32.1m-60.9 152.3c11.8-18.6 22.1-38 31.1-58.1l58.5 25.9c-10.2 23-22.1 45.2-35.5 66.4zm-61.7 77.1c7.8-7.8 15.3-15.9 22.4-24.2l48.5 41.8A517 517 0 0 1 874 874z"/><path d="M512 64a448 448 0 1 0 316.8 764.8L874 874A512.1 512.1 0 1 1 512 0z"/><path d="M480 192a32 32 0 0 1 32 32v333.4l207.9 118.8a32 32 0 0 1-31.8 55.6l-224-128A32 32 0 0 1 448 576V224a32 32 0 0 1 32-32"/></symbol><symbol id="icnSvgMaleAuthor" viewBox="0 0 117.37 122.88"><path d="M78.08 115.36H6.11c-5.24-.4-6.5-4.17-6.02-8.52C2.96 81.2 31.72 88.62 43.28 78.21c5.76 16.96 29.85 17.59 35.26 0 3.18 2.87 9.48 4.58 15.85 6.08.32.08.65.15 1 .23-7.77 4.75-13.88 12.08-16.32 20.65-1 3.52-1.31 6.95-.99 10.19m31.43-26.51 7.04 5.43c.93.72 1.1 2.06.39 2.99l-1.83 2.29-10.42-8.04 1.83-2.29c.71-.92 2.06-1.09 2.99-.38m-7.59 28.62c-2.4 1.1-4.79 2.19-7.19 3.28-5.63 2.57-5.45 3.78-4.58-2.08l1.37-9.22-.01-.01 11.54-15.87 10.42 8.04-11.55 15.87zm-8.62-6.65 6.84 5.28c-1.58.72-3.15 1.44-4.72 2.15-3.7 1.68-3.58 2.48-3.01-1.37zM43.13 61.2c2.19 3.47 4.48 7.02 7.32 9.63 2.74 2.5 6.06 4.2 10.45 4.21 4.76.01 8.23-1.75 11.06-4.39 2.94-2.75 5.25-6.52 7.54-10.28l6.14-10.12c1.14-2.62 1.56-4.36 1.3-5.39-.16-.61-.83-.91-1.98-.96-.24-.01-.49-.01-.74-.01-.27.01-.56.03-.86.05-.17.01-.32 0-.47-.03-.54.03-1.11-.01-1.68-.09l2.1-9.31c-15.61 2.46-27.28-9.13-43.77-2.32l1.19 10.97c-.65.04-1.29.01-1.87-.07-9.47.31 2.4 15.14 4.27 18.11m43.95-20.09c1.51.46 2.48 1.42 2.88 2.97.44 1.72-.04 4.14-1.5 7.45-.03.06-.05.12-.09.18l-6.21 10.23c-2.4 3.94-4.82 7.9-8.07 10.93-3.36 3.15-7.5 5.24-13.16 5.22-5.28-.01-9.27-2.03-12.53-5.02-3.94-3.62-22.12-26.37-14-31.85.4-.26.84-.49 1.32-.67-.36-4.7-.48-10.63-.26-15.59.12-1.17.35-2.35.67-3.53 1.39-4.98 4.89-8.99 9.21-11.74 2.39-1.52 5-2.67 7.72-3.43 1.73-.49-1.47-6.03.31-6.2 8.65-.89 22.66 7.01 28.7 13.55 3.02 3.27 4.93 7.62 5.34 13.36z"/></symbol><symbol id="icnSvgBookType" viewBox="0 0 353 512.32"><path d="M74.05 244.67h38.71c1.5-4.16 2.96-8.33 4.3-12.54l-17.01-27.12 12.78 4.82-5.65-15.84 8.53 3c-6.84-29.82 3.66-51.96 20.14-71.46-4.28 25.57-5.73 48.13-2.5 65.73-.89-51.13 14.71-112.63 74.32-141.43-4.89 14.88-8.31 30.5-8.94 47.49 20.95-57.37 23.5-76.06 71.4-96.75l-15.49 35.85c3.97-6.72 8.98-12.18 12.38-17.97C284-10.53 344.03-4.1 352 28.85c1.22 5.07 1.28 10.19.41 15.33-10.99 47.95-52.78 70.02-120.22 70.57 10.78 6.38 46.02 4.81 83.36-6.29-27.47 23.87-48.51 49.98-87.25 66.72 5.53 2.11 15.82 2.38 24.78 2.89-22.36 19.23-55.49 30.9-96.54 36.16 5.18 5.27 19.71 2.3 35 6.33l-39.51 9.67 11.64 4.65-27.29-2.7c12.39-28.04 26.16-54.82 42.52-79.24 40.11-59.89 93.01-101.98 162.38-123.98-6.51-.02-12.83.76-19 2.12-22.58 4.98-46.94 19.39-65.83 32.27-35.47 24.19-62.32 53.17-86.3 88.8-22.05 32.77-35.33 60.54-45.99 92.52h46.04c4.57 0 8.74 1.88 11.77 4.9l.05.05c3.01 3.03 4.88 7.19 4.88 11.75v36.45c0 4.56-1.88 8.74-4.91 11.78l.01.01a16.74 16.74 0 0 1-8.92 4.66v21.82c3.4 1.18 7.36 2.46 11.56 3.8 21.21 6.79 47.87 15.34 56.04 31.64 3.32 6.64 4.16 13.61 3.23 21.24-.83 6.86-3.1 14.21-6.21 22.4l-24.58 67.59-.35.79c-3.72 7.58-8.2 13.82-13.48 18.57-5.46 4.92-11.75 8.28-18.91 9.92-.68.18-1.4.28-2.13.28H66a9 9 0 0 1-1.71-.19c-7.33-1.6-13.76-4.99-19.34-10.01-5.17-4.66-9.57-10.75-13.25-18.13q-.33-.585-.57-1.23L6.55 415.17c-3.02-7.96-5.25-15.14-6.13-21.91-.98-7.54-.31-14.4 2.71-20.89 7.87-16.9 35.04-25.61 56.58-32.51 4.16-1.33 8.09-2.59 11.46-3.77v-21.83a16.66 16.66 0 0 1-8.89-4.64h-.04a16.7 16.7 0 0 1-4.89-11.8v-36.45c0-4.6 1.87-8.78 4.89-11.8s7.2-4.9 11.81-4.9m19.27 126.18h57.6v16.23h-57.6zm-55.93 81.77h169.47l15.69-43.15c2.68-7.05 4.61-13.22 5.27-18.6.56-4.62.16-8.62-1.59-12.12-5.1-10.19-28.18-17.58-46.54-23.46-6.63-2.12-12.71-4.07-17.76-6.14-3.14-1.27-5.03-4.29-5.04-7.48h-.03v-27.16H87.39v27.16c0 3.7-2.47 6.81-5.84 7.79-4.88 1.95-10.64 3.79-16.9 5.8-18.53 5.94-41.92 13.44-46.82 23.96-1.63 3.5-1.96 7.45-1.38 11.95.69 5.26 2.61 11.35 5.25 18.3zm163.57 16.23H43.29l2.93 8.06c2.73 5.45 5.91 9.87 9.57 13.17 3.26 2.94 6.96 4.97 11.12 6.02h110.43c4.16-1.05 7.85-3.08 11.12-6.02 3.66-3.3 6.84-7.72 9.57-13.17zM170.2 260.89H74.05c-.13 0-.25.06-.33.15-.09.09-.15.21-.15.33v36.45c0 .12.06.23.15.32.07.1.19.15.33.15h96.15c.12 0 .24-.06.33-.15h.03c.07-.07.12-.19.12-.32v-36.45c0-.14-.05-.26-.12-.33l-.03-.03a.47.47 0 0 0-.33-.12"/></symbol><symbol id="svgIconToastInfor" viewBox="0 0 122.88 122.88"><path fill-rule="evenodd" d="M61.44 0c33.926 0 61.44 27.514 61.44 61.44s-27.514 61.439-61.44 61.439C27.513 122.88 0 95.366 0 61.44S27.513 0 61.44 0m17.98 98.215H43.46v-6.053h6.757v-36.96H43.46v-4.816h16.808c4.245 0 8.422-.51 12.549-1.551v43.328h6.604v6.052zM63.859 21.078c2.785 0 4.975.805 6.571 2.396 1.579 1.59 2.377 3.771 2.377 6.581 0 2.848-1.358 5.381-4.093 7.601-2.751 2.22-5.941 3.338-9.577 3.338-2.733 0-4.905-.765-6.569-2.297-1.665-1.551-2.497-3.556-2.497-6.05 0-3.143 1.358-5.853 4.059-8.152q4.05-3.416 9.729-3.417"/></symbol><symbol id="svgIconToastSuccess" viewBox="0 0 122.881 122.88"><path fill-rule="evenodd" d="M61.44 0c33.933 0 61.441 27.507 61.441 61.439s-27.508 61.44-61.441 61.44C27.508 122.88 0 95.372 0 61.439S27.508 0 61.44 0M34.106 67.678l-.015-.014a3.87 3.87 0 0 1-1.256-2.669 3.86 3.86 0 0 1 .984-2.777l.029-.031a3.87 3.87 0 0 1 2.668-1.256 3.87 3.87 0 0 1 2.792.998l12.956 11.748 31.089-32.559a3.87 3.87 0 0 1 2.719-1.204 3.87 3.87 0 0 1 2.771 1.067v.001a3.87 3.87 0 0 1 1.205 2.718 3.87 3.87 0 0 1-1.068 2.773L55.279 81.769a1 1 0 0 1-.073.067 3.87 3.87 0 0 1-2.598 1.13 3.86 3.86 0 0 1-2.744-1L34.118 67.688z"/></symbol><symbol id="svgIconToastWarning" viewBox="0 0 512 463.43"><path fill-rule="evenodd" d="M189.46 44.02c34.26-58.66 99.16-58.77 133.24.12l.97 1.81 175.27 304.4c33.71 56.4-1.2 113.76-66.17 112.96v.12H73.53c-.9 0-1.78-.04-2.66-.11-58.34-.79-86.64-54.22-61.9-106.84.39-.85.82-1.67 1.28-2.46l-.04-.03 179.3-309.94zm50.32 302.4c4.26-4.13 9.35-6.19 14.45-6.56 3.4-.24 6.8.29 9.94 1.48 3.13 1.19 6.01 3.03 8.39 5.41 6.92 6.91 8.72 17.38 4.64 26.16-2.69 5.8-7.08 9.7-12.11 11.78-3.03 1.27-6.3 1.84-9.56 1.76-3.27-.08-6.49-.82-9.41-2.18-5.02-2.33-9.3-6.43-11.7-12.2-2.65-6.36-2.27-12.96.63-19.15 1.15-2.46 2.75-4.81 4.73-6.5m33.86-47.07c-.8 19.91-34.51 19.93-35.28-.01-3.41-34.1-12.13-110.53-11.85-142.58.28-9.87 8.47-15.72 18.94-17.95 3.23-.69 6.78-1.03 10.35-1.02 3.6.01 7.16.36 10.39 1.05 10.82 2.3 19.31 8.39 19.31 18.45l-.05 1z"/></symbol><symbol id="svgIconToastError" viewBox="0 0 122.88 122.88"><path style="fill-rule:evenodd" d="M61.44 0A61.44 61.44 0 1 1 0 61.44 61.44 61.44 0 0 1 61.44 0m13.14 36.8c1.74-1.77 2.83-3.18 5-1l7 7.13c2.29 2.26 2.17 3.58 0 5.69L73.33 61.83l12.75 12.75c1.77 1.74 3.18 2.83 1 5l-7.13 7c-2.26 2.29-3.58 2.17-5.68 0L61.44 73.72 48.63 86.53c-2.1 2.15-3.42 2.27-5.68 0l-7.13-7c-2.2-2.15-.79-3.24 1-5l12.73-12.7-13.2-13.19c-2.15-2.11-2.27-3.43 0-5.69l7-7.13c2.15-2.2 3.24-.79 5 1l13.09 13.12z"/></symbol><symbol id="svgIconToastPromise" viewBox="0.05 0.05 127.9 127.9"><path d="M38.52 33.37 21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z"></path><path d="M67.642 24.324 67.649.05a63.6 63.6 0 0 1 38.31 15.627L88.778 32.86a39.5 39.5 0 0 0-21.142-8.528zM94.63 38.52l17.17-17.16a63.6 63.6 0 0 1 16.04 38.14h-24.3a39.5 39.5 0 0 0-8.92-20.98zm9.046 29.122 24.275.007a63.6 63.6 0 0 1-15.627 38.31L95.14 88.778a39.5 39.5 0 0 0 8.528-21.142zM89.48 94.63l17.16 17.17a63.6 63.6 0 0 1-38.14 16.04v-24.3a39.5 39.5 0 0 0 20.98-8.92zm-29.122 9.046-.007 24.275a63.6 63.6 0 0 1-38.31-15.627L39.222 95.14a39.5 39.5 0 0 0 21.142 8.528zM33.37 89.48 16.2 106.64A63.6 63.6 0 0 1 .16 68.5h24.3a39.5 39.5 0 0 0 8.92 20.98zm-9.046-29.122L.05 60.351a63.6 63.6 0 0 1 15.627-38.31L32.86 39.222a39.5 39.5 0 0 0-8.528 21.142z" style="opacity:.6"></symbol><symbol id="svgIconNoInternetConnection" viewBox="0 0 122.88 122.88"><path d="m101.68 32.93-68.76 68.75a49.29 49.29 0 0 0 77.83-40.24A49.3 49.3 0 0 0 108 45.15a48.9 48.9 0 0 0-6.32-12.22M24 93.5 93.49 24A49.31 49.31 0 0 0 24 93.5" style="fill:#fff"/><path d="M30.29 52a3 3 0 0 1-4.29-.37 3 3 0 0 1 .34-4.24A59.3 59.3 0 0 1 43.27 37a48 48 0 0 1 36.4.31A61 61 0 0 1 96.46 47.9a1.3 1.3 0 0 1 .17.16 3 3 0 0 1 .27 4.07 1.5 1.5 0 0 1-.17.19 3 3 0 0 1-4.16.19A55.2 55.2 0 0 0 77.47 43a41.86 41.86 0 0 0-32.08-.27A53.4 53.4 0 0 0 30.29 52m31.15 24.09A6.59 6.59 0 1 1 56.77 78a6.62 6.62 0 0 1 4.67-1.93ZM50.05 72.5a3 3 0 0 1-4.16-.35 1.4 1.4 0 0 1-.16-.18 3 3 0 0 1 .43-4.07l.17-.14a27.6 27.6 0 0 1 7.33-4.33 21.7 21.7 0 0 1 7.84-1.52 21.4 21.4 0 0 1 7.8 1.47 27.1 27.1 0 0 1 7.34 4.36 3 3 0 0 1 .44 4.26 3 3 0 0 1-2 1.1 3.06 3.06 0 0 1-2.21-.66 21.3 21.3 0 0 0-5.62-3.37 15.12 15.12 0 0 0-11.47 0 22 22 0 0 0-5.7 3.41Zm-9.56-9.71-.15.13a3.06 3.06 0 0 1-2.08.67 3 3 0 0 1-2-1 1 1 0 0 1-.14-.15 3 3 0 0 1 .34-4.16 45.8 45.8 0 0 1 12.36-8 30.76 30.76 0 0 1 25.6.42 45.7 45.7 0 0 1 12.11 8.41l.08.07a3.1 3.1 0 0 1 .87 2 3 3 0 0 1-.82 2.15l-.07.08a3 3 0 0 1-2 .87 3 3 0 0 1-2.15-.81A40.1 40.1 0 0 0 72 56.28a24.75 24.75 0 0 0-21-.35 39.7 39.7 0 0 0-10.5 6.86Z"/><path d="M61.44 0A61.31 61.31 0 1 1 38 4.66 61.3 61.3 0 0 1 61.44 0m40.24 32.93-68.75 68.75A49.44 49.44 0 0 0 80.31 107 49.53 49.53 0 0 0 107 80.3a49 49 0 0 0 3.73-18.86 48.93 48.93 0 0 0-9.08-28.51ZM24 93.5 93.5 24A49.32 49.32 0 0 0 24 93.5" style="fill:#d92d27"/></symbol></svg>
</body>

</html>